/*! For license information please see IMICROS_DMN_Converter.js.LICENSE.txt */
var IMICROS_DMN_Converter;(()=>{var e={603:e=>{"use strict";e.exports=class{static get NUMBER(){return"NUMBER"}static get NAME(){return"NAME"}static get STRING(){return"STRING"}static get NULL(){return"NULL"}static get BOOLEAN(){return"BOOLEAN"}static get DASH(){return"DASH"}static get EVAL(){return"EVAL"}static get NEGATION(){return"NEGATION"}static get SUM(){return"SUM"}static get PRODUCT(){return"PRODUCT"}static get EXPONENTATION(){return"EXPONENTATION"}static get LOGICAL(){return"LOGICAL"}static get COMPARISON(){return"COMPARISON"}static get NOT(){return"NOT"}static get IN(){return"IN"}static get IN_INTERVAL(){return"IN_INTERVAL"}static get IN_LIST(){return"IN_LIST"}static get BETWEEN(){return"BETWEEN"}static get INSTANCE_OF(){return"INSTANCE_OF"}static get LIST(){return"LIST"}static get INTERVAL(){return"INTERVAL"}static get PATH(){return"PATH"}static get FILTER(){return"FILTER"}static get UNARY(){return"UNARY"}static get UNARYTESTS(){return"UNARYTESTS"}static get LIST_OF(){return"LIST_OF"}static get CONTEXT(){return"CONTEXT"}static get CONTEXT_ENTRY(){return"CONTEXT_ENTRY"}static get NAMED_PARAMETER(){return"NAMED_PARAMETER"}static get CONTEXT_TYPE(){return"CONTEXT_TYPE"}static get CONTEXT_ELEMENT(){return"CONTEXT_ELEMENT"}static get FORMAL_PARAMETER(){return"FORMAL_PARAMETER"}static get BOXED(){return"BOXED"}static get FOR(){return"FOR"}static get IF(){return"IF"}static get QUANTIFIED(){return"QUANTIFIED"}static get FUNCTION_CALL(){return"FUNCTION_CALL"}static get FUNCTION_DEFINITION(){return"FUNCTION_DEFINITION"}static get DATE_AND_TIME(){return"DATE_AND_TIME"}static get AT_LITERAL(){return"AT_LITERAL"}constructor(e){Object.assign(this,e)}}},156:(e,t,n)=>{"use strict";const{XMLParser:r}=n(932),s=n(289),i=n(184),o=new r({attributeNamePrefix:"_",removeNSPrefix:!0,ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0,cdataTagName:"__cdata",cdataPropName:"__cdata",cdataPositionChar:"\\c",parseTrueNumberOnly:!1}),a=new s;class l{static get MAIN(){return"MAIN"}static get INPUT(){return"INPUT"}static get INVOCATION(){return"INVOCATION"}static get CONTEXT(){return"CONTEXT"}static get FUNCTION(){return"FUNCTION"}static get DECISIONTABLE(){return"DECISIONTABLE"}static get RETURN(){return"RETURN"}}class u{parseContextEntry(e,t){const n=this.createNode(e);this.parseDependencies(e,n),this.parseVariable(e,n),this.parseInvocation(e,n),this.parseContext(e,n),this.parseDecisionTable(e,n),this.parseReturnValue(e,n),t.push(n)}parseInvocation(e,t){e.invocation&&(t.type=l.INVOCATION,t.functionName=e.invocation.literalExpression?.text??"#undefined",t.parameters=[],(Array.isArray(e.invocation.binding)?e.invocation.binding:[e.invocation.binding]).forEach((e=>{t.parameters.push({name:e.parameter._name,expression:e.literalExpression.text})})))}parseReturnValue(e,t){e.literalExpression&&(t.type=l.RETURN,t.expression=e.literalExpression.text)}parseContext(e,t){e.context&&(this.parseContext(e.context,t),t.type=l.CONTEXT,t.entries=[],(Array.isArray(e.context.contextEntry)?e.context.contextEntry:[e.context.contextEntry]).forEach((e=>{this.parseContextEntry(e,t.entries)})))}parseFunctionDefinition(e,t){e.encapsulatedLogic&&(t.type=l.FUNCTION,t.kind=e.encapsulatedLogic._kind||"not supported",t.parameters=[],Array.isArray(e.encapsulatedLogic.formalParameter)&&e.encapsulatedLogic.formalParameter.forEach((e=>{t.parameters.push({name:e._name,type:e._typeRef||void 0})})),t.expression=e.encapsulatedLogic.literalExpression?.text||null)}parseDecisionTable(e,t){if(e.decisionTable){t.type=l.DECISIONTABLE;const n=this.toArray(e.decisionTable.input);t.inputs=[],n.forEach((e=>{e.inputExpression&&t.inputs.push({name:e.inputExpression.text||void 0,type:e.inputExpression._typeRef||void 0})}));const r=this.toArray(e.decisionTable.output);t.outputs=[],r.forEach((e=>{e._name&&t.outputs.push({name:e._name||void 0,type:e._typeRef||void 0})})),t.outputs.length<=0&&t.variable&&t.outputs.push(t.variable);const s=this.toArray(e.decisionTable.rule);switch(t.rules=[],s.forEach((e=>{const n=this.toArray(e.inputEntry),r=this.toArray(e.outputEntry),s={inputs:n.map((e=>e.text))||[],outputs:r.map((e=>e.text))||[],annotation:e.annotationEntry?.text??""};t.rules.push(s)})),(e.decisionTable._hitPolicy||"Unique").toUpperCase()){case"A":case"ANY":t.hitPolicy="Any";break;case"F":case"FIRST":t.hitPolicy="First";break;case"U":case"UNIQUE":t.hitPolicy="Unique";break;case"R":case"RULE ORDER":t.hitPolicy="Rule order";break;case"C":case"COLLECT":t.hitPolicy="Collect";break;case"C+":t.hitPolicy="C+";break;case"C<":t.hitPolicy="C<";break;case"C>":t.hitPolicy="C>";break;case"C#":t.hitPolicy="C#"}}}parseInputData(e,t){const n=this.createNode(e);this.parseVariable(e,n),n.type=l.INPUT,t.push(n)}parseBusinessKnowledgeModel(e,t){const n=this.createNode(e);this.parseVariable(e,n),this.parseFunctionDefinition(e,n),t.push(n)}parseDecision(e,t){const n=this.createNode(e);this.parseDependencies(e,n),this.parseVariable(e,n),this.parseContext(e,n),this.parseDecisionTable(e,n),this.parseReturnValue(e,n),t.push(n)}parseDependency(e){function t(e){if("string"==typeof e){let t=/^#(.*)/g.exec(e);return t[1]?t[1]:"#undefined"}return"#undefined"}return e.requiredInput?t(e.requiredInput._href):e.requiredKnowledge?t(e.requiredKnowledge._href):e.requiredDecision?t(e.requiredDecision._href):"#undefined"}parseDependencies(e,t){let n=[];n=n.concat(this.toArray(e.informationRequirement).map((e=>this.parseDependency(e)))),n=n.concat(this.toArray(e.knowledgeRequirement).map((e=>this.parseDependency(e)))),n.length>0&&(t.dependencies=n)}parseVariable(e,t){e.variable&&(t.variable={name:e.variable._name||void 0,type:e.variable._typeRef||void 0})}createNode(e){const t={};return e._id&&(t.id=e._id||null),e._name&&(t.name=e._name||null),t}toArray(e){return Array.isArray(e)?e:e?[e]:[]}parse(e){const t=o.parse(e),n=this.createNode(t);n.type=l.MAIN,n.definitions=[],t.definitions.inputData&&this.toArray(t.definitions.inputData).forEach((e=>{this.parseInputData(e,n.definitions)})),t.definitions.businessKnowledgeModel&&this.toArray(t.definitions.businessKnowledgeModel).forEach((e=>{this.parseBusinessKnowledgeModel(e,n.definitions)})),t.definitions.decision&&this.toArray(t.definitions.decision).forEach((e=>{this.parseDecision(e,n.definitions)}));const r=[],s=[];n.definitions.forEach((e=>{e.dependencies?e.dependencies.forEach((t=>{s.push([t,e.id])})):r.push(e.id)}));const a=r.concat(i.tsort(s)),u=n.definitions.map(((e,t)=>({index:t,sort:a.indexOf(e.id)})));return u.sort(((e,t)=>e.sort>t.sort?1:e.sort<t.sort?-1:0)),n.definitions=u.map((e=>n.definitions[e.index])),n}}e.exports={DMNParser:u,DMNConverter:class{convert({node:e=null,xml:t=null}){return e||t?(e||(e=(new u).parse(t)),this.lines=[],this.indent=0,this.lastName=[],this._build(e),this.expression="",this.tab="   ",this.newline="\n",this.lines.forEach((e=>{this.expression+=this.tab.repeat(e.indent)+e.text})),this.expression):null}_build(e,t){if(!e)throw new Error("Can't build empty node");if(this["__"+e.type]&&"[object Function]"==={}.toString.call(this["__"+e.type]))return this["__"+e.type](e,t);throw new Error("Interpreter - missing function "+e.type,{node:e,partlyBuild:this.expression})}__MAIN(e,t){this.lines.push({indent:this.indent++,text:"{\n"}),e.definitions.forEach(((t,n)=>{this._build(t,{more:n+1<e.definitions.length})})),this.lines.push({indent:--this.indent,text:"}\n"})}__INPUT(e,t){this.lines.push({indent:this.indent,text:`"${e.variable?.name??e.name}": ${e.variable?.name??e.name}${t.more?",\n":"\n"}`})}__FUNCTION(e,t){const n=e.parameters.map((e=>`${e.name}${e.type?":"+e.type:""}`)).join(",");this.lines.push({indent:this.indent,text:`"${e.variable.name}": function (${n}) ${e.expression}${t.more?",\n":"\n"}`})}__INVOCATION(e,t){const n=e.parameters.map((e=>`${e.name}: ${e.expression}`)).join(",");this.lines.push({indent:this.indent,text:`"${e.variable.name}": ${e.functionName}(${n})${t.more?",\n":"\n"}`})}__RETURN(e,t){this.lastName[this.lastName.length-1]=e.variable?.name||"__return",this.lines.push({indent:this.indent,text:`"${this.lastName[this.lastName.length-1]}": ${e.expression}${t.more?",\n":"\n"}`})}__CONTEXT(e,t){this.lastName.push(""),this.lines.push({indent:this.indent++,text:`"${e.variable.name}": {\n`}),e.entries.forEach(((t,n)=>{this._build(t,{more:n+1<e.entries.length})})),this.lines.push({indent:--this.indent,text:`}${this.lastName[this.lastName.length-1]?"."+this.lastName[this.lastName.length-1]:""}${t.more?",":""}\n`}),this.lastName.pop()}__DECISIONTABLE(e,t){this.lines.push({indent:this.indent++,text:`"${e.variable?.name??e.name}": decision table(\n`});const n=e.inputs.map((e=>`${e.name}`)).join(",");this.lines.push({indent:this.indent,text:`inputs: [${n}],\n`});const r=e.outputs.map((e=>`"${e.name}"`)).join(",");this.lines.push({indent:this.indent,text:`outputs: [${r}],\n`}),this.lines.push({indent:this.indent++,text:"rule list: [\n"}),e.rules.forEach(((t,n)=>{const r=t.inputs.map((e=>`${function(e){if("string"==typeof e){if(a.parse(e),a.ast,a.ast&&Array.isArray(a.ast)&&"UNARYTESTS"===a.ast[0]?.node)return`[${e}]`;if(0===e.length)return"-"}return e}(e)}`)).concat(t.outputs.map((e=>`${e}`))).join(",");this.lines.push({indent:this.indent,text:`[${r}]${n+1<e.rules.length?",":""}${t.annotation?" // "+t.annotation:""}\n`})})),this.lines.push({indent:--this.indent,text:"],\n"}),this.lines.push({indent:this.indent,text:`hit policy: "${e.hitPolicy}"\n`}),this.lines.push({indent:--this.indent,text:`)${1===e.outputs.length?"."+e.outputs[0].name:""}${t.more?",\n":"\n"}`})}}}},231:e=>{"use strict";class t{constructor(e){Object.assign(this,e)}static parse(e){let t=e.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);return t&&t.length>=6?new n({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3]),hour:parseInt(t[4]),minute:parseInt(t[5]),second:parseInt(t[6])}):(t=e.match(/(\d{4})-(\d{2})-(\d{2})/),t&&t.length>=4?new r({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])}):(t=e.match(/(P(?:\d+[D|M|Y])*(?:T(?:\d+[H|M|S])*)?)/),t?new i({years:parseInt(e.match(/P(?:(?:\d+[D|M])*)(\d+)Y/)?.[1]??0),months:parseInt(e.match(/P(?:(?:\d+[D|Y])*)(\d+)M/)?.[1]??0),days:parseInt(e.match(/P(?:(?:\d+[M|Y])*)(\d+)D/)?.[1]??0),hours:parseInt(e.match(/P(?:\d+[D|M|Y])*T(?:\d+[M|S])*(\d+)H/i)?.[1]??0),minutes:parseInt(e.match(/P(?:\d+[D|M|Y])*T(?:\d+[H|S])*(\d+)M/i)?.[1]??0),seconds:parseInt(e.match(/P(?:\d+[D|M|Y])*T(?:\d+[H|M])*(\d+)S/i)?.[1]??0)}):(t=e.match(/(\d{2}):(\d{2}):(\d{2})/),t&&t.length>=3?new s({hour:parseInt(t[1]),minute:parseInt(t[2]),second:parseInt(t[3])}):void 0)))}static today(){const e=new Date;return new r({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()})}static now(){const e=new Date;return new n({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()})}static dayOfWeek({date:e=null}){return e instanceof n||e instanceof r?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDate().getDay()]:null}static dayOfYear({date:e=null}){if(e instanceof n||e instanceof r){let t=e.getDate(),n=new Date(t.getFullYear(),0,0),r=t-n+60*(n.getTimezoneOffset()-t.getTimezoneOffset())*1e3;const s=864e5;return Math.floor(r/s)}return null}static monthOfYear({date:e=null}){return e instanceof n||e instanceof r?["January","February","March","April","May","June","July","August","September","October","November","December"][e.getDate().getMonth()]:null}static weekOfYear({date:e=null}){if(e instanceof n||e instanceof r){let n=e.getDate();n.setHours(0,0,0,0),n.setDate(n.getDate()+3-(n.getDay()+6)%7);var t=new Date(n.getFullYear(),0,4);return 1+Math.round(((n.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)}return null}static monthBetween({from:e=null,to:t=null}){return e instanceof r&&e instanceof r?i.build(12*(t.year-e.year)+(t.month-e.month),0):null}add(e){}dateDiff(e,t){var n={days:0,months:0,years:0};if(e==t)return n;if(e>t){var r=t;t=e,e=r}var s=e.getFullYear(),i=t.getFullYear(),o=e.getMonth(),a=t.getMonth(),l=e.getDate(),u=t.getDate();if(n.years=i-s,n.months=a-o,n.days=u-l,n.days<0){var c=new Date(e.getFullYear(),e.getMonth()+1,1,0,0,-1).getDate();n.months-=1,n.days+=c}return n.months<0&&(n.months+=12,n.years-=1),n}}class n extends t{get exp(){let e=String(this.year).padStart(4,"0")+"-"+String(this.month).padStart(2,"0")+"-"+String(this.day).padStart(2,"0");return e+="T"+String(this.hour).padStart(2,"0")+":"+String(this.minute).padStart(2,"0")+":"+ +String(this.second).padStart(2,"0"),e}get value(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second).valueOf()}getDate(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second)}add(e){if(e instanceof i){const t={year:this.year+e.years,month:this.month+e.months,day:this.day+e.days,hour:this.hour+e.hours,minute:this.minute+e.minutes,second:this.second+e.seconds};return new n(t)}}subtract(e){if(e instanceof i){const t={year:this.year-e.years,month:this.month-e.months,day:this.day-e.days,hour:this.hour-e.hours,minute:this.minute-e.minutes,second:this.second-e.seconds};return new n(t)}}}class r extends t{get exp(){return String(this.year).padStart(4,"0")+"-"+String(this.month).padStart(2,"0")+"-"+String(this.day).padStart(2,"0")}get value(){return new Date(this.year,this.month-1,this.day,0,0,0).valueOf()}static build(e){if(Array.isArray(e)&&3===e.length)return new r({year:e[0],month:e[1],day:e[2]})}getDate(){return new Date(this.year,this.month-1,this.day)}add(e){if(e instanceof i){const t={year:this.year+e.years,month:this.month+e.months,day:this.day+e.days};return new r(t)}}subtract(e){if(e instanceof r){const t=e.value>this.value?-1:1,n=e.getDate(),r=this.getDate(),s=this.dateDiff(n,r),o=s.months+12*s.years,a=24*s.days*60*60;return i.build(o*t,a*t)}}}class s extends t{get exp(){return String(this.hour).padStart(2,"0")+":"+String(this.minute).padStart(2,"0")+":"+ +String(this.second).padStart(2,"0")}get dtd(){return this.second+60*this.minute+60*this.hour*60}static build(e){if(Array.isArray(e)&&e.length>=3){let t=new s({hour:e[0],minute:e[1],second:e[2]});return e[3]?t.add(e[3]):t}if("number"==typeof e){const t=Math.abs(e)%86400,n={hour:t>0?Math.floor(t%86400/3600):0,minute:t>0?Math.floor(t%3600/60):0,second:t>0?t%60:0};return new s(n)}}add(e){if(e instanceof i)return s.build(this.dtd+e.dtd)}hoursminutes;subtract(e){if(e instanceof i)return s.build(this.dtd-e.dtd>0?this.dtd-e.dtd:0)}}class i extends t{get exp(){let e="P";return this.value<0&&(e="-"+e),this.days&&(e+=Math.abs(this.days)+"D"),this.months&&(e+=Math.abs(this.months)+"M"),this.years&&(e+=Math.abs(this.years)+"Y"),(this.hours||this.minutes|this.seconds)&&(e+="T"),this.hours&&(e+=Math.abs(this.hours)+"H"),this.minutes&&(e+=Math.abs(this.minutes)+"M"),this.seconds&&(e+=Math.abs(this.seconds)+"S"),e}get dtd(){return this.seconds+60*this.minutes+60*this.hours*60+24*this.days*60*60}get ymd(){return this.months+12*this.years}get value(){return 2592e3*this.ymd+this.dtd}static build(e,t){const n={years:e>0?Math.floor(e/12):-Math.floor(Math.abs(e)/12),months:e>0?e%12:-Math.abs(e)%12,days:t>0?Math.floor(t/86400):-Math.floor(Math.abs(t)/86400),hours:t>0?Math.floor(t%86400/3600):-Math.floor(Math.abs(t)%86400/3600),minutes:t>0?Math.floor(t%3600/60):-Math.floor(Math.abs(t)%3600/60),seconds:t>0?t%60:-Math.abs(t)%60};return new i(n)}add(e){return e instanceof i?i.build(this.ymd+e.ymd,this.dtd+e.dtd):e instanceof n?e.add(this):void 0}subtract(e){if(e instanceof i){const t=this.ymd-e.ymd,n=Math.sign(t)===Math.sign(this.dtd-e.dtd)?this.dtd-e.dtd:0;return i.build(t,n)}}abs(){return i.build(Math.abs(this.ymd),Math.abs(this.dtd))}}e.exports={Temporal:t,DateAndTime:n,DateOnly:r,Time:s,Duration:i}},649:(e,t,n)=>{!function(){function t(e){return e[0]}const r=n(271),s=n(603),i=r.compile({singlelinecomment:{match:/\/\/.*/},multilinecomment:{match:/\/\*[.\s\S]+?\*+\//,lineBreaks:!0},string:{match:/"(?:\\"|[^"])*?"/,value:e=>e.slice(1,-1)},dayandtime:/date[ ]+and[ ]+time/,fn:/put[ ]+all|string[ ]+length|string[ ]+join|week[ ]+of[ ]+year|month[ ]+of[ ]+year|day[ ]+of[ ]+year|month[ ]+of[ ]+year|day[ ]+of[ ]+week|years[ ]+and[ ]+months[ ]+duration/,types:/day-time-duration|year-month-duration/,instance:/instance[ ]+of/,whitespace:{match:/[ \t\n\r\u00A0\uFEFF\u000D\u000A]+/,lineBreaks:!0},word:{match:/[\?_'A-Za-z]+/,type:r.keywords({keywords:["for","return","if","true","false","in","and","or","between","some","every","then","else"],not:["not"],types:["string","number","boolean"],null:["null"],dayandtime:["date","time","duration"],fn:["even","abs","length","all","any"]})},number:/[0-9]+/,comparator:/!=|==|<=|>=|<{1}|>{1}|={1}/,operator:/-|\+|\.\.|\/|\*{1,2}/,punctuator:/@|[.,:;[\](){}]/});var o=[];function a(e){return Array.isArray(e)?e.reduce(((e,t)=>e.concat(a(t))),[]).join(""):e}function l(e){return Array.isArray(e)&&1===e.length?l(e[0]):e}function u(e,t){return Array.isArray(e)?e.reduce(((e,n)=>e.concat(a(n[t]))),[]):[]}function c(e,t){return Array.isArray(e)?e.reduce(((e,n)=>e.concat(l(n[t]))),[]):[]}var p={Lexer:i,ParserRules:[{name:"main",symbols:["UnaryTests"],postprocess:e=>l([e[0]])},{name:"main",symbols:["_","Expression","_"],postprocess:e=>l([e[1]])},{name:"Expression",symbols:["BoxedExpression"]},{name:"Expression",symbols:["TextualExpression"],postprocess:e=>l([e])},{name:"TextualExpression",symbols:["ForExpression"]},{name:"TextualExpression",symbols:["IfExpression"]},{name:"TextualExpression",symbols:["QuantifiedExpression"]},{name:"TextualExpression",symbols:["LogicalExpression"],postprocess:(e,t,n)=>e},{name:"NonArithmeticExpression",symbols:["InstanceOf"]},{name:"NonArithmeticExpression",symbols:["PathExpression"]},{name:"NonArithmeticExpression",symbols:["FilterExpression"]},{name:"NonArithmeticExpression",symbols:["SimplePositiveUnaryTest"]},{name:"NonArithmeticExpression",symbols:[{literal:"("},"_","Expression","_",{literal:")"}],postprocess:e=>new s({node:s.EVAL,expression:e[2]})},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:"<"}]},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:"<="}]},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:">"}]},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:">="}]},{name:"SimplePositiveUnaryTest",symbols:["SimplePositiveUnaryTest$subexpression$1","_","Endpoint"],postprocess:e=>new s({node:s.UNARY,operator:l(e[0]).value,value:l(e[2])})},{name:"SimplePositiveUnaryTest",symbols:["Interval"]},{name:"Interval$subexpression$1",symbols:[{literal:"("}]},{name:"Interval$subexpression$1",symbols:[{literal:"]"}]},{name:"Interval$subexpression$1",symbols:[{literal:"["}]},{name:"Interval$subexpression$2",symbols:[{literal:")"}]},{name:"Interval$subexpression$2",symbols:[{literal:"["}]},{name:"Interval$subexpression$2",symbols:[{literal:"]"}]},{name:"Interval",symbols:["Interval$subexpression$1","_","Endpoint","_",{literal:".."},"_","Endpoint","_","Interval$subexpression$2"],postprocess:e=>new s({node:s.INTERVAL,open:l(e[0]).value,from:l(e[2]),to:l(e[6]),close:l(e[8]).value})},{name:"Interval",symbols:["FunctionInvocation"]},{name:"Interval",symbols:["Literal"]},{name:"PositiveUnarytest",symbols:["Expression"]},{name:"PositiveUnarytests$ebnf$1$subexpression$1",symbols:[{literal:","},"_","PositiveUnarytest"]},{name:"PositiveUnarytests$ebnf$1",symbols:["PositiveUnarytests$ebnf$1$subexpression$1"]},{name:"PositiveUnarytests$ebnf$1$subexpression$2",symbols:[{literal:","},"_","PositiveUnarytest"]},{name:"PositiveUnarytests$ebnf$1",symbols:["PositiveUnarytests$ebnf$1","PositiveUnarytests$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"PositiveUnarytests",symbols:["PositiveUnarytest","_","PositiveUnarytests$ebnf$1"],postprocess:e=>new s({node:s.LIST,entries:[].concat(e[0]).concat(c(e[2],2))})},{name:"UnaryTests",symbols:["PositiveUnarytests"],postprocess:e=>new s({node:s.UNARYTESTS,list:l([e])})},{name:"UnaryTests",symbols:["Expression","_",{literal:"in"},"_","List"],postprocess:e=>new s({node:s.IN_LIST,input:l(e[0]),list:l(e[4])})},{name:"UnaryTests",symbols:["UnaryNot"]},{name:"UnaryTests",symbols:["UnaryDash"]},{name:"UnaryNot",symbols:[i.has("not")?{type:"not"}:not,"_",{literal:"("},"_","PositiveUnarytests","_",{literal:")"}],postprocess:e=>new s({node:s.UNARY_NOT,test:l(e[4])})},{name:"UnaryDash",symbols:["_",{literal:"-"},"_"],postprocess:e=>new s({node:s.DASH})},{name:"Endpoint",symbols:["SimpleValue"]},{name:"SimpleValue",symbols:["QualifiedName"]},{name:"SimpleValue",symbols:["SimpleLiteral"]},{name:"ArithmeticNegation",symbols:[{literal:"-"},"_","NonArithmeticExpression"],postprocess:e=>new s({node:s.NEGATION,expression:l(e[2])})},{name:"ArithmeticNegation",symbols:["NonArithmeticExpression"]},{name:"Sum$subexpression$1",symbols:[{literal:"+"}]},{name:"Sum$subexpression$1",symbols:[{literal:"-"}]},{name:"Sum",symbols:["Sum","_","Sum$subexpression$1","_","Product"],postprocess:e=>new s({node:s.SUM,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"Sum",symbols:["Product"]},{name:"Product$subexpression$1",symbols:[{literal:"*"}]},{name:"Product$subexpression$1",symbols:[{literal:"/"}]},{name:"Product",symbols:["Product","_","Product$subexpression$1","_","Exponentation"],postprocess:e=>new s({node:s.PRODUCT,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"Product",symbols:["Exponentation"]},{name:"Exponentation$subexpression$1",symbols:[{literal:"**"}]},{name:"Exponentation",symbols:["Exponentation","_","Exponentation$subexpression$1","_","ArithmeticNegation"],postprocess:(e,t,n)=>new s({node:s.EXPONENTATION,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"Exponentation",symbols:["ArithmeticNegation"]},{name:"QualifiedName",symbols:["Name","_",{literal:"."},"_","Name"],postprocess:e=>new s({node:s.PATH,object:e[0],property:e[4]})},{name:"QualifiedName",symbols:["Name"]},{name:"Name",symbols:["PotentialName"],postprocess:(e,t,n)=>new s({node:s.NAME,value:a([e])})},{name:"PotentialName$ebnf$1",symbols:[]},{name:"PotentialName$ebnf$1$subexpression$1",symbols:["__","NamePart"]},{name:"PotentialName$ebnf$1",symbols:["PotentialName$ebnf$1","PotentialName$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"PotentialName",symbols:["NameStart","PotentialName$ebnf$1"],postprocess:e=>a([e])},{name:"NameStart$ebnf$1",symbols:[i.has("number")?{type:"number"}:number],postprocess:t},{name:"NameStart$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"NameStart",symbols:[i.has("word")?{type:"word"}:word,"NameStart$ebnf$1"],postprocess:e=>a(e)},{name:"NamePart$ebnf$1",symbols:[i.has("number")?{type:"number"}:number],postprocess:t},{name:"NamePart$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"NamePart",symbols:[i.has("word")?{type:"word"}:word,"NamePart$ebnf$1"],postprocess:e=>a(e)},{name:"NamePart",symbols:[i.has("types")?{type:"types"}:types],postprocess:e=>a(e)},{name:"Literal",symbols:["SimpleLiteral"]},{name:"Literal",symbols:[i.has("null")?{type:"null"}:null],postprocess:e=>new s({node:s.NULL})},{name:"SimpleLiteral",symbols:["NumericLiteral"]},{name:"SimpleLiteral",symbols:["BooleanLiteral"]},{name:"SimpleLiteral",symbols:["StringLiteral"]},{name:"SimpleLiteral",symbols:["DateTimeLiteral"]},{name:"StringLiteral",symbols:[i.has("string")?{type:"string"}:string],postprocess:e=>new s({node:s.STRING,value:String.raw`${e}`})},{name:"BooleanLiteral$subexpression$1",symbols:[{literal:"true"}]},{name:"BooleanLiteral$subexpression$1",symbols:[{literal:"false"}]},{name:"BooleanLiteral",symbols:["BooleanLiteral$subexpression$1"],postprocess:e=>new s({node:s.BOOLEAN,value:"true"===a([e])})},{name:"NumericLiteral$ebnf$1$subexpression$1",symbols:[{literal:"."},"Digits"]},{name:"NumericLiteral$ebnf$1",symbols:["NumericLiteral$ebnf$1$subexpression$1"],postprocess:t},{name:"NumericLiteral$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"NumericLiteral",symbols:["Digits","NumericLiteral$ebnf$1"],postprocess:e=>new s({node:s.NUMBER,integer:parseInt(e[0]),decimals:parseInt(e[1]?e[1][1]:null),float:parseFloat(a([e]))})},{name:"NumericLiteral",symbols:[{literal:"."},"Digits"],postprocess:e=>new s({node:s.NUMBER,decimals:parseInt(a(e[1])),float:parseFloat("."+a([e[1]]))})},{name:"Digits",symbols:[i.has("number")?{type:"number"}:number],postprocess:e=>a([e])},{name:"FunctionInvocation",symbols:["FunctionName","_","Parameters"],postprocess:(e,t,n)=>new s({node:s.FUNCTION_CALL,name:l(e[0]),parameters:l(e[2])})},{name:"FunctionInvocation",symbols:[i.has("not")?{type:"not"}:not,"_",{literal:"("},"_","Expression","_",{literal:")"}],postprocess:(e,t,n)=>new s({node:s.NOT,parameters:l(e[4])})},{name:"FunctionName",symbols:[i.has("fn")?{type:"fn"}:fn],postprocess:e=>new s({node:s.NAME,value:a([e])})},{name:"FunctionName",symbols:["PotentialName"],postprocess:e=>new s({node:s.NAME,value:a([e])})},{name:"FunctionName",symbols:[{literal:"number"}],postprocess:e=>new s({node:s.NAME,value:a([e])})},{name:"FunctionName",symbols:[{literal:"string"}],postprocess:e=>new s({node:s.NAME,value:a([e])})},{name:"FunctionName",symbols:[{literal:"context"}],postprocess:e=>new s({node:s.NAME,value:a([e])})},{name:"Parameters$ebnf$1$subexpression$1",symbols:["NamedParameterList"]},{name:"Parameters$ebnf$1$subexpression$1",symbols:["PositionalParameterList"]},{name:"Parameters$ebnf$1",symbols:["Parameters$ebnf$1$subexpression$1"],postprocess:t},{name:"Parameters$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Parameters",symbols:[{literal:"("},"_","Parameters$ebnf$1","_",{literal:")"}],postprocess:e=>l(e[2])},{name:"NamedParameterList$ebnf$1",symbols:[]},{name:"NamedParameterList$ebnf$1$subexpression$1",symbols:[{literal:","},"_","NamedParameter"]},{name:"NamedParameterList$ebnf$1",symbols:["NamedParameterList$ebnf$1","NamedParameterList$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"NamedParameterList",symbols:["NamedParameter","_","NamedParameterList$ebnf$1"],postprocess:e=>new s({node:s.LIST,entries:[].concat(e[0]).concat(c(e[2],2))})},{name:"NamedParameter",symbols:["Name","_",{literal:":"},"_","Expression"],postprocess:e=>new s({node:s.NAMED_PARAMETER,name:a(e[0]),expression:l(e[4])})},{name:"PositionalParameterList$ebnf$1",symbols:[]},{name:"PositionalParameterList$ebnf$1$subexpression$1",symbols:[{literal:","},"_","Expression"]},{name:"PositionalParameterList$ebnf$1",symbols:["PositionalParameterList$ebnf$1","PositionalParameterList$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"PositionalParameterList",symbols:["Expression","_","PositionalParameterList$ebnf$1"],postprocess:e=>new s({node:s.LIST,entries:[].concat(l(e[0])).concat(l(c(e[2],2)))})},{name:"PathExpression",symbols:["NonArithmeticExpression",{literal:"."},"Name"],postprocess:e=>new s({node:s.PATH,object:l(e[0]),property:e[2]})},{name:"PathExpression",symbols:["BoxedExpression",{literal:"."},"Name"],postprocess:e=>new s({node:s.PATH,object:l(e[0]),property:e[2]})},{name:"PathExpression",symbols:["Name"]},{name:"ForExpression",symbols:[{literal:"for"},"__","Name","__",{literal:"in"},"__","Expression","__",{literal:"return"},"__","Expression"],postprocess:e=>new s({node:s.FOR,var:e[2],context:l(e[6]),return:l(e[10])})},{name:"IfExpression",symbols:[{literal:"if"},"__","Expression","__",{literal:"then"},"__","Expression","__",{literal:"else"},"__","Expression","_"],postprocess:e=>new s({node:s.IF,condition:e[2],then:e[6],else:e[10]})},{name:"QuantifiedExpression$subexpression$1",symbols:[{literal:"some"}]},{name:"QuantifiedExpression$subexpression$1",symbols:[{literal:"every"}]},{name:"QuantifiedExpression",symbols:["QuantifiedExpression$subexpression$1","__","Name","__",{literal:"in"},"__","Expression","__",{literal:"satisfies"},"__","Expression"],postprocess:e=>new s({node:s.QUANTIFIED,operator:l(e[0]).value,variable:e[2],context:e[6],satisfy:e[10]})},{name:"LogicalExpression$subexpression$1",symbols:[{literal:"and"}]},{name:"LogicalExpression$subexpression$1",symbols:[{literal:"or"}]},{name:"LogicalExpression",symbols:["LogicalExpression","__","LogicalExpression$subexpression$1","__","Comparison"],postprocess:e=>new s({node:s.LOGICAL,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"LogicalExpression",symbols:["Comparison"]},{name:"Comparison$subexpression$1",symbols:[{literal:"="}]},{name:"Comparison$subexpression$1",symbols:[{literal:"!="}]},{name:"Comparison$subexpression$1",symbols:[{literal:"<"}]},{name:"Comparison$subexpression$1",symbols:[{literal:"<="}]},{name:"Comparison$subexpression$1",symbols:[{literal:">"}]},{name:"Comparison$subexpression$1",symbols:[{literal:">="}]},{name:"Comparison",symbols:["Comparison","_","Comparison$subexpression$1","_","Sum"],postprocess:e=>new s({node:s.COMPARISON,operator:l(e[2]).value,left:l(e[0]),right:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"between"},"__","Expression","__",{literal:"and"},"__","Expression"],postprocess:e=>new s({node:s.BETWEEN,expression:l(e[0]),left:l(e[4]),right:l(e[8])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"__","PositiveUnarytest"],postprocess:e=>new s({node:s.IN,input:l(e[0]),test:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"__","UnaryNot"],postprocess:e=>new s({node:s.IN,input:l(e[0]),test:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"__","UnaryDash"],postprocess:e=>new s({node:s.IN,input:l(e[0]),test:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"_",{literal:"("},"_","PositiveUnarytests","_",{literal:")"}],postprocess:e=>new s({node:s.IN_LIST,input:l(e[0]),list:l(e[6])})},{name:"Comparison",symbols:["Sum"]},{name:"FilterExpression",symbols:["Expression","_",{literal:"["},"_","Expression","_",{literal:"]"}],postprocess:e=>new s({node:s.FILTER,list:l(e[0]),filter:l(e[4])})},{name:"InstanceOf",symbols:["Expression","_",i.has("instance")?{type:"instance"}:instance,"_","Type"],postprocess:e=>new s({node:s.INSTANCE_OF,instance:l(e[0]),of:l(e[4])})},{name:"Type",symbols:["QualifiedName"]},{name:"Type",symbols:[{literal:"list"},"_",{literal:"<"},"_","Type","_",{literal:">"}],postprocess:e=>new s({node:s.LIST_OF,single:l(e[4])})},{name:"Type",symbols:[{literal:"context"},"_",{literal:"<"},"_","ContextElements","_",{literal:">"}],postprocess:e=>new s({node:s.CONTEXT_TYPE,elements:l(e[4])})},{name:"Type$ebnf$1$subexpression$1$ebnf$1",symbols:[]},{name:"Type$ebnf$1$subexpression$1$ebnf$1$subexpression$1",symbols:[{literal:","},"_","Type"]},{name:"Type$ebnf$1$subexpression$1$ebnf$1",symbols:["Type$ebnf$1$subexpression$1$ebnf$1","Type$ebnf$1$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"Type$ebnf$1$subexpression$1",symbols:["Type","_","Type$ebnf$1$subexpression$1$ebnf$1"]},{name:"Type$ebnf$1",symbols:["Type$ebnf$1$subexpression$1"],postprocess:t},{name:"Type$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Type",symbols:[{literal:"function"},"_",{literal:"<"},"_","Type$ebnf$1","_",{literal:">"},"_",{literal:"->"},"_","Type"]},{name:"Type",symbols:["BasicType"],postprocess:e=>l(e)},{name:"ContextElements$ebnf$1",symbols:[]},{name:"ContextElements$ebnf$1$subexpression$1",symbols:[{literal:","},"_","ContextElement"]},{name:"ContextElements$ebnf$1",symbols:["ContextElements$ebnf$1","ContextElements$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"ContextElements",symbols:["ContextElement","_","ContextElements$ebnf$1"],postprocess:e=>new s({node:s.LIST,entries:[].concat(e[0]).concat(u(e[2],2))})},{name:"ContextElement",symbols:["Name","_",{literal:":"},"_","Type"],postprocess:e=>new s({node:s.CONTEXT_ELEMENT,name:a(e[0]),type:l(e[4])})},{name:"BasicType$subexpression$1",symbols:[{literal:"boolean"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"number"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"string"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"date"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"time"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"date and time"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"day-time-duration"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"year-month-duration"}]},{name:"BasicType",symbols:["BasicType$subexpression$1"],postprocess:e=>l(e).value},{name:"BasicType",symbols:[{literal:"date"},"__",{literal:"time"}],postprocess:e=>a(e)},{name:"BoxedExpression",symbols:["List"]},{name:"BoxedExpression",symbols:["FunctionDefintion"],postprocess:e=>l(e)},{name:"BoxedExpression",symbols:["Context","__","Expression"],postprocess:e=>new s({node:s.BOXED,context:l(e[0]),result:l(e[2])})},{name:"BoxedExpression",symbols:["Context"],postprocess:e=>l(e)},{name:"List",symbols:[{literal:"["},"_","ListEntries","_",{literal:"]"}],postprocess:e=>new s({node:s.LIST,entries:e[2]})},{name:"List",symbols:[{literal:"["},"_",{literal:"]"}],postprocess:e=>new s({node:s.LIST,entries:[]})},{name:"ListEntries$ebnf$1",symbols:[]},{name:"ListEntries$ebnf$1$subexpression$1",symbols:[{literal:","},"_","ListEntry"]},{name:"ListEntries$ebnf$1",symbols:["ListEntries$ebnf$1","ListEntries$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"ListEntries",symbols:["ListEntry","_","ListEntries$ebnf$1"],postprocess:e=>[].concat(e[0]).concat(c(e[2],2))},{name:"ListEntry",symbols:["Expression"],postprocess:e=>l(e)},{name:"ListEntry",symbols:["UnaryDash"]},{name:"ListEntry",symbols:["UnaryNot"]},{name:"FunctionDefintion$ebnf$1",symbols:["FormalParameterList"],postprocess:t},{name:"FunctionDefintion$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"FunctionDefintion",symbols:[{literal:"function"},"_",{literal:"("},"_","FunctionDefintion$ebnf$1","_",{literal:")"},"_","Expression"],postprocess:e=>new s({node:s.FUNCTION_DEFINITION,parameters:l(e[4]),expression:l(e[8])})},{name:"FormalParameterList$ebnf$1",symbols:[]},{name:"FormalParameterList$ebnf$1$subexpression$1",symbols:[{literal:","},"_","FormalParameter"]},{name:"FormalParameterList$ebnf$1",symbols:["FormalParameterList$ebnf$1","FormalParameterList$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"FormalParameterList",symbols:["FormalParameter","_","FormalParameterList$ebnf$1"],postprocess:e=>new s({node:s.LIST,entries:[].concat(l(e[0])).concat(l(c(e[2],2)))})},{name:"FormalParameter$ebnf$1",symbols:["FormalParameterType"],postprocess:t},{name:"FormalParameter$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"FormalParameter",symbols:["Name","_","FormalParameter$ebnf$1"],postprocess:e=>new s({node:s.FORMAL_PARAMETER,name:a(e[0]),type:l(e[2])})},{name:"FormalParameterType",symbols:[{literal:":"},"_","Type"],postprocess:e=>l(e[2])},{name:"Context$ebnf$1$subexpression$1",symbols:["ContextEntries"]},{name:"Context$ebnf$1",symbols:["Context$ebnf$1$subexpression$1"],postprocess:t},{name:"Context$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Context",symbols:[{literal:"{"},"_","Context$ebnf$1","_",{literal:"}"}],postprocess:e=>new s({node:s.CONTEXT,data:l(e[2])})},{name:"ContextEntries$ebnf$1",symbols:[]},{name:"ContextEntries$ebnf$1$subexpression$1",symbols:[{literal:","},"_","ContextEntry"]},{name:"ContextEntries$ebnf$1",symbols:["ContextEntries$ebnf$1","ContextEntries$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"ContextEntries",symbols:["ContextEntry","_","ContextEntries$ebnf$1"],postprocess:e=>new s({node:s.LIST,entries:[].concat(e[0]).concat(c(e[2],2))})},{name:"ContextEntry",symbols:["Key","_",{literal:":"},"_","Expression"],postprocess:e=>{var t;return t=l(e[0]),t?.value&&o.indexOf(t.value)<0&&o.push(t.value),new s({node:s.CONTEXT_ENTRY,key:l(e[0]),expression:l(e[4])})}},{name:"Key",symbols:["Name"]},{name:"Key",symbols:["StringLiteral"]},{name:"DateTimeLiteral",symbols:["AtLiteral"]},{name:"DateTimeLiteral",symbols:["DateTimeFunction"]},{name:"DateTimeFunction",symbols:[i.has("dayandtime")?{type:"dayandtime"}:dayandtime,"_","Parameters"],postprocess:e=>new s({node:s.DATE_AND_TIME,name:e[0].value,parameters:l(e[2])})},{name:"WhiteSpace",symbols:[i.has("whitespace")?{type:"whitespace"}:whitespace]},{name:"WhiteSpace",symbols:[i.has("singlelinecomment")?{type:"singlelinecomment"}:singlelinecomment]},{name:"WhiteSpace",symbols:[i.has("multilinecomment")?{type:"multilinecomment"}:multilinecomment]},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","WhiteSpace"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:()=>" "},{name:"__$ebnf$1",symbols:["WhiteSpace"]},{name:"__$ebnf$1",symbols:["__$ebnf$1","WhiteSpace"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"__",symbols:["__$ebnf$1"],postprocess:()=>" "},{name:"AtLiteral",symbols:[{literal:"@"},"StringLiteral"],postprocess:e=>new s({node:s.AT_LITERAL,expression:l(e[1])})}],ParserStart:"main"};void 0!==e.exports?e.exports=p:window.grammar=p}()},289:(e,t,n)=>{"use strict";const r=n(654),s=n(649),i=n(603),{Temporal:o,DateAndTime:a,DateOnly:l,Time:u,Duration:c}=n(231),{Strings:p}=n(177),h=n(776),m=n(184);e.exports=class{parse(e){const t=new r.Parser(r.Grammar.fromCompiled(s));try{return this.error=null,t.feed(e),this.ast=t.results,this.exp=e,!0}catch(t){return this.ast={},this.error={exp:e,number:t.token?.offset?100:900,text:t.token?.text||null,position:e.substring(t.token?.offset>10?t.token?.offset-10:0,t.token?.offset||0),offset:t.token?.offset||null,line:t.token?.line||null,col:t.token?.col||null},!1}}evaluate({expression:e,context:t}={}){if(this.error=null,e||t?(e&&this.parse(e),this.data=t||{}):arguments.length>1?(this.parse(arguments[0]),this.data=arguments[1]):"string"==typeof arguments[0]?(this.parse(arguments[0]),this.data={}):this.data=arguments[0],this.ast&&this.ast.length&&!this.ast.length>0)return this.error={exp:this.exp,number:300},null;if(!this.error){this.decisionContext={},this.functionDefinitions={};try{const e=this._build(this.ast[0]);return e&&e instanceof o?e.exp:e}catch(e){throw this.error={exp:this.exp,number:200,message:e.message},e}}return null}_build(e,t){if(!e)return"#undefined";if(this["__"+e.node]&&"[object Function]"==={}.toString.call(this["__"+e.node]))return this["__"+e.node](e,t);throw new Error("Interpreter - missing function "+e.node)}__NUMBER(e){return e.float}__NAME(e,t){return t&&e.value in t?t[e.value]:this.decisionContext&&e.value in this.decisionContext?this.decisionContext[e.value]:this.data[e.value]}__BOOLEAN(e){return e.value}__STRING(e){return e.value.replace(/^"(.+)"$/,"$1")}__NULL(e){return null}__DASH(e){return!0}__SUM(e,t){let n=this._build(e.left,t);const r=this._build(e.right,t);if(n instanceof o)switch(e.operator){case"-":return n.subtract(r);case"+":return n.add(r)}switch(e.operator){case"-":return"number"==typeof n&&"number"==typeof r?new h(n).minus(r).toNumber():n-r;case"+":return"number"==typeof n&&"number"==typeof r?new h(n).plus(r).toNumber():n+r}}__PRODUCT(e,t){switch(e.operator){case"/":return new h(this._build(e.left,t)).div(new h(this._build(e.right,t))).toNumber();case"*":return new h(this._build(e.left,t)).mul(new h(this._build(e.right,t))).toNumber()}}__EXPONENTATION(e,t){return h.pow(new h(this._build(e.left,t)),new h(this._build(e.right,t))).toNumber()}__NEGATION(e,t){return-this._build(e.expression,t)}__COMPARISON(e,t){let n=this._build(e.left,t),r=this._build(e.right,t);switch(n instanceof o&&(n=n.value),r instanceof o&&(r=r.value),e.operator){case"=":return n==r;case"<":return n<r;case">":return n>r;case">=":return n>=r;case"<=":return n<=r;case"!=":return n!==r}}__LOGICAL(e){switch(e.operator){case"and":return this._build(e.left)&&this._build(e.right);case"or":return this._build(e.left)||this._build(e.right)}}__NOT(e,t){return!this._build(e.parameters,t)}__EVAL(e,t){return this._build(e.expression,t)}__LIST(e,t){let n=[];return Array.isArray(e.entries)&&e.entries.forEach((e=>{n.push(this._build(e,t))})),n}__PATH(e,t){let n=this._build(e.object,t);if(Array.isArray(n)){let t=[];return n.forEach((n=>{t.push(n&&e.property&&e.property.value?n[e.property.value]:null)})),t}return n&&e.property&&e.property.value?n[e.property.value]:null}__IF(e){return this._build(e.condition)?this._build(e.then):this._build(e.else)}__CONTEXT(e,t){let n={};return e.data&&Array.isArray(e.data.entries)&&e.data.entries.forEach((e=>{let r=this._build(e,t);r&&(r.key=r.key.replace(/\s\s+/g," "),n[r.key]=r.value,this.decisionContext[r.key]=r.value)})),n}__CONTEXT_ENTRY(e,t){if(e.expression.node===i.FUNCTION_DEFINITION){const n=e.key.node===i.NAME?e.key.value:this._build(e.key,t);return this.functionDefinitions[n]=e.expression,null}return{key:e.key.node===i.NAME?e.key.value:this._build(e.key,t),value:this._build(e.expression,t)}}__DATE_AND_TIME(e,t){let n=this._build(e.parameters,t);return Array.isArray(n)&&3===n.length&&"date"===e.name?l.build(n):Array.isArray(n)&&n.length>=3&&"time"===e.name?u.build(n):o.parse(n?n[0]:null)}__AT_LITERAL(e){let t=this._build(e.expression);return o.parse(t||null)}__FILTER(e){let t=this._build(e.list);if(!Array.isArray(t))return null;switch(e.filter.node){case i.NUMBER:let n=this._build(e.filter);return n>0&&n<=t.length?t[n-1]:null;case i.NEGATION:let r=this._build(e.filter);return t.length+r>0?t[t.length+r-1]:null;case i.NAME:let s=this._build(e.filter);return s>=0?s<=t.length?t[s-1]:null:t.length+s>0?t[t.length+s-1]:null;default:let o=[];return t.forEach((t=>{1==this._build(e.filter,{item:t})&&o.push(t)})),o}}__FOR(e,t){let n=this._build(e.context);const r=e.var?.value||null;if(!Array.isArray(n))return null;let s=[];return n.forEach((n=>{const i={};i[r]=n,s.push(this._build(e.return,Object.assign(t||{},i)))})),s}__IN(e,t){switch(e.test.node){case i.DASH:return!0;case i.EVAL:if(e.test.expression.node===i.UNARY)return e.test.expression.input=e.input,this._build(e.test.expression,t);break;case i.NAME:case i.STRING:case i.BOOLEAN:case i.NUMBER:case i.FUNCTION_CALL:return this._build(e.input,t)===this._build(e.test,t);case i.INTERVAL:let n=!1,r=!1,s=this._build(e.input,t);s instanceof o&&(s=s.value);let a=this._build(e.test.from,t),l=this._build(e.test.to,t);switch(a instanceof o&&(a=a.value),l instanceof o&&(l=l.value),e.test.open){case"[":n=s>=a;break;case"(":case"]":n=s>a}switch(e.test.close){case"]":r=s<=l;break;case")":case"[":r=s<l}return n&&r;case i.UNARY:return e.test.input=e.input,this._build(e.test,t);default:return!1}}__BETWEEN(e,t){let n=this._build(e.expression,t);n instanceof o&&(n=n.value);let r=this._build(e.left,t);r instanceof o&&(r=r.value);let s=this._build(e.right,t);return s instanceof o&&(s=s.value),n>r&&n<s}__IN_LIST(e,t){if(!e.list||!Array.isArray(e.list.entries))return!1;let n=!1;return e.list.entries.forEach((r=>{r.node===i.UNARY?(r.input=e.input,n=n||this._build(r,t)):n=n||this._build(e.input,t)===this._build(r,t)})),n}__UNARY(e){if(!e.input)return!1;switch(e.operator){case"<":return this._build(e.input)<this._build(e.value);case">":return this._build(e.input)>this._build(e.value);case">=":return this._build(e.input)>=this._build(e.value);case"<=":return this._build(e.input)<=this._build(e.value)}}__INSTANCE_OF(e,t){let n=this._build(e.instance,t);if(e.of.node&&e.of.node==i.NAME)return typeof n==typeof this._build(e.of,t);if("string"==typeof e.of)switch(e.of){case"number":return"number"==typeof n;case"string":return"string"==typeof n;case"boolean":return"boolean"==typeof n;case"date":return n instanceof l;case"date and time":return n instanceof a;default:return!1}}__BOXED(e,t){return this._build(e.result,Object.assign(t||{},this._build(e.context)||{}))}buildParameters(e,t,n){let r={};return e&&e.node===i.LIST&&e.entries.forEach(((e,s)=>{if(e.node==i.NAMED_PARAMETER){let s=e.name?.value??null;t.indexOf(s)>=0&&(r[s]=this._build(e.expression,n))}else r[t[s]]=this._build(e,n)})),r}getRawParameters(e,t){let n={};return e&&e.node===i.LIST&&e.entries.forEach(((e,r)=>{if(e.node==i.NAMED_PARAMETER){let r=e.name?.value??null;t.indexOf(r)>=0&&(n[r]=e.expression)}else n[t[r]]=e})),n}getRangeParameters(e,t){return Object.entries(e).map((([e,n])=>{let r={raw:n,type:n?.node===i.INTERVAL?"interval":"point"};return"point"===r.type?(r.value=this._build(r.raw,t),r.value instanceof o&&(r.value=r.value.value)):(r.from=this._build(n.from,t),r.from instanceof o&&(r.from=r.from.value),r.to=this._build(n.to,t),r.to instanceof o&&(r.to=r.to.value),r.includeFrom="["===n.open,r.includeTo="]"===n.close),r}))}callFunctionDefinition(e,t,n){const r=e.parameters?.entries?.map((e=>e.name?.value??null)),s=this.buildParameters(t,r,n);return this._build(e.expression,Object.assign(n||{},s))}__FUNCTION_CALL(e,t){if(this.functionDefinitions[e.name.value])return this.callFunctionDefinition(this.functionDefinitions[e.name.value],e.parameters,t);switch(e.name.value){case"today":return o.today();case"now":return o.now();case"day of week":{const r=this.buildParameters(e.parameters,["date"],t);return o.dayOfWeek(r)}case"day of year":{const s=this.buildParameters(e.parameters,["date"],t);return o.dayOfYear(s)}case"week of year":{const i=this.buildParameters(e.parameters,["date"],t);return o.weekOfYear(i)}case"month of year":{const a=this.buildParameters(e.parameters,["date"],t);return o.monthOfYear(a)}case"years and months duration":{const l=this.buildParameters(e.parameters,["from","to"],t);return o.monthBetween(l)}case"number":{const u=this.buildParameters(e.parameters,["from"],t);return"string"==typeof u.from?parseFloat(u.from):void 0}case"string":{const h=this.buildParameters(e.parameters,["from"],t);return h.from instanceof o?h.from.exp:String(h.from)}case"context":{const m=this.buildParameters(e.parameters,["entries"],t);return Array.isArray(m.entries)?m.entries.reduce(((e,t)=>(t.key&&(e[t.key]=t.value),e)),{}):void 0}case"is defined":return void 0!==this.buildParameters(e.parameters,["value"],t).value;case"substring":{const d=this.buildParameters(e.parameters,["string","start","length"],t);return"string"==typeof d.string?d.string.substring(d.start-1,d.length?d.start+d.length-1:d.string.length):void 0}case"string length":{const f=this.buildParameters(e.parameters,["string"],t);return"string"==typeof f.string?f.string.length:void 0}case"upper case":{const b=this.buildParameters(e.parameters,["string"],t);return"string"==typeof b.string?b.string.toUpperCase():void 0}case"lower case":{const g=this.buildParameters(e.parameters,["string"],t);return"string"==typeof g.string?g.string.toLowerCase():void 0}case"substring before":{const y=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof y.string?y.string.substring(0,y.string.indexOf(y.match)):void 0}case"substring after":{const x=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof x.string?x.string.substring(x.string.indexOf(x.match)+x.match.length,x.string.length):void 0}case"contains":{const v=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof v.string?v.string.indexOf(v.match)>=0:void 0}case"starts with":{const N=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof N.string?N.string.startsWith(N.match):void 0}case"ends with":{const E=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof E.string?E.string.endsWith(E.match):void 0}case"matches":{const w=this.buildParameters(e.parameters,["input","pattern"],t);return p.matches(w)}case"replace":{const $=this.buildParameters(e.parameters,["input","pattern","replacement","flags"],t);return p.replace($)}case"split":{const _=this.buildParameters(e.parameters,["string","delimiter"],t);return p.split(_)}case"extract":{const T=this.buildParameters(e.parameters,["string","pattern"],t);return p.extract(T)}case"list contains":{const A=this.buildParameters(e.parameters,["list","element"],t);return!!Array.isArray(A.list)&&A.list.indexOf(A.element)>=0}case"count":{const P=this.buildParameters(e.parameters,["list"],t);return Array.isArray(P.list)?P.list.length:void 0}case"min":{if(e.parameters?.entries?.length>1)return Math.min(...this._build(e.parameters));const O=this.buildParameters(e.parameters,["list"],t);return Array.isArray(O.list)?Math.min(...O.list):void 0}case"max":{if(e.parameters?.entries?.length>1)return Math.max(...this._build(e.parameters));const I=this.buildParameters(e.parameters,["list"],t);return Array.isArray(I.list)?Math.max(...I.list):void 0}case"sum":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e+t));const S=this.buildParameters(e.parameters,["list"],t);return Array.isArray(S.list)?S.list.reduce(((e,t)=>e+t)):void 0}case"product":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e*t));const C=this.buildParameters(e.parameters,["list"],t);return Array.isArray(C.list)?C.list.reduce(((e,t)=>e*t)):void 0}case"mean":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e+t))/e.parameters.entries.length||0;const L=this.buildParameters(e.parameters,["list"],t);return Array.isArray(L.list)?L.list.reduce(((e,t)=>e+t))/L.list.length||0:void 0}case"median":{const M=e.parameters?.entries?.length>1?[...this._build(e.parameters)]:this.buildParameters(e.parameters,["list"],t).list;function F(e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}return Array.isArray(M)&&M.length>0?F(M):null}case"stddev":{const k=e.parameters?.entries?.length>1?[...this._build(e.parameters)]:this.buildParameters(e.parameters,["list"],t).list;if(!Array.isArray(k))return;const D=k.length,R=k.reduce(((e,t)=>e+t))/D;return Math.sqrt(k.map((e=>Math.pow(e-R,2))).reduce(((e,t)=>e+t))/D)}case"mode":{const U=e.parameters?.entries?.length>1?[...this._build(e.parameters)]:this.buildParameters(e.parameters,["list"],t).list;function B(e){let t=[],n=[],r=0,s=[];e.forEach(((e,s)=>{let i=t.indexOf(e);i<0&&(t.push(e),i=t.length-1),n[i]?n[i]++:n[i]=1,n[i]>r&&(r=n[i])}));for(let e in n)n[e]==r&&s.push(t[e]);return s.sort()}return Array.isArray(U)?B(U):null}case"all":case"and":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e&&t));const j=this.buildParameters(e.parameters,["list"],t);return Array.isArray(j.list)?!(j.list.length>0)||j.list.reduce(((e,t)=>e&&t)):void 0}case"any":case"or":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e||t));const V=this.buildParameters(e.parameters,["list"],t);return Array.isArray(V.list)?V.list.length>0&&V.list.reduce(((e,t)=>e||t)):void 0}case"sublist":{const q=this.buildParameters(e.parameters,["list","start position","length"],t);if(!Array.isArray(q.list))return;const Y=q["start position"]&&q["start position"]>0?q["start position"]-1:0,X=q.length&&q.length>0?Y+q.length:q.list.length;return q.list.slice(Y,X)}case"append":{const H=this.buildParameters(e.parameters,["list"],t),G=e.parameters?.entries?.length>1?this._build(e.parameters).slice(1):[];return Array.isArray(H.list)?H.list.concat(G):void 0}case"union":case"concatenate":return(e.parameters?.entries?.length>1?this._build(e.parameters):[]).reduce(((e,t)=>Array.isArray(t)?Array.isArray(e)?e.concat(t):[].concat(t):e));case"insert before":{const Z=this.buildParameters(e.parameters,["list","position"],t),W=e.parameters?.entries?.length>2?this._build(e.parameters).slice(2):[];return Array.isArray(Z.list)&&Z.position>0?Z.list.splice(Z.position-1,0,...W):Z.list=void 0,Z.list}case"remove":{const Q=this.buildParameters(e.parameters,["list","position"],t);return Array.isArray(Q.list)&&Q.position>0?Q.list.splice(Q.position-1,1):Q.list=void 0,Q.list}case"reverse":{const J=this.buildParameters(e.parameters,["list"],t);return Array.isArray(J.list)?J.list.reverse():void 0}case"index of":{function K(e,t){var n,r=[];for(n=0;n<e.length;n++)e[n]===t&&r.push(n+1);return r}const z=this.buildParameters(e.parameters,["list","match"],t);return Array.isArray(z.list)?K(z.list,z.match):void 0}case"distinct values":{const ee=this.buildParameters(e.parameters,["list"],t);return Array.isArray(ee.list)?[...new Set(ee.list)]:void 0}case"flatten":{const te=this.buildParameters(e.parameters,["list"],t);function ne(e){return e.reduce(((e,t)=>Array.isArray(t)?e.concat(ne(t)):e.concat(t)),[])}return Array.isArray(te.list)?ne(te.list):void 0}case"sort":{const re=this.getRawParameters(e.parameters,["list","precedes"]);var n=this._build(re.list,t);const se=re.precedes?.parameters?.entries?.map((e=>e.name?.value??null));return Array.isArray(n)&&n.sort(((e,t)=>{const n={};return n[se[0]]=e,n[se[1]]=t,this._build(re.precedes.expression,n)?-1:1})),n}case"string join":{const ie=this.buildParameters(e.parameters,["list","delimiter","prefix","suffix"],t),oe=ie.prefix?ie.prefix:"",ae=ie.suffix?ie.suffix:"",le=ie.delimiter?ie.delimiter:"";return oe+(Array.isArray(ie.list)?ie.list.join(le):"")+ae}case"get value":{const ue=this.buildParameters(e.parameters,["context","key"],t);return ue.context&&ue.key?ue.context[ue.key]:null}case"get entries":{const ce=this.buildParameters(e.parameters,["context"],t);return"object"==typeof ce.context?Object.entries(ce.context).map((([e,t])=>({key:e,value:t}))):[]}case"put":{const pe=this.buildParameters(e.parameters,["context","key","value"],t);return pe.context&&pe.key&&(pe.context[pe.key]=pe.value),pe.context}case"put all":{const he=this._build(e.parameters,t);return Array.isArray(he)?Object.assign(...he):void 0}case"decimal":{const me=this.buildParameters(e.parameters,["n","scale"],t);return"number"==typeof me.n&&"number"==typeof me.scale?parseFloat(me.n.toFixed(me.scale)):void 0}case"floor":{const de=this.buildParameters(e.parameters,["n"],t);return"number"==typeof de.n?Math.floor(de.n):void 0}case"ceiling":{const fe=this.buildParameters(e.parameters,["n"],t);return"number"==typeof fe.n?Math.ceil(fe.n):void 0}case"round up":{const be=this.buildParameters(e.parameters,["n","scale"],t),ge="number"==typeof be.scale?10**be.scale:1;return"number"==typeof be.n?be.n>=0?Math.ceil(be.n*ge)/ge:Math.floor(be.n*ge)/ge:void 0}case"round down":{const ye=this.buildParameters(e.parameters,["n","scale"],t),xe="number"==typeof ye.scale?10**ye.scale:1;return"number"==typeof ye.n?Math.trunc(ye.n*xe)/xe:void 0}case"round half up":{const ve=this.buildParameters(e.parameters,["n","scale"],t),Ne=ve.n<0?-1:1,Ee="number"==typeof ve.scale?10**ve.scale:1;return"number"==typeof ve.n?Math.round(Math.abs(ve.n)*Ee)/Ee*Ne:void 0}case"round half down":{const we=this.buildParameters(e.parameters,["n","scale"],t),$e=we.n<0?1:-1,_e="number"==typeof we.scale?10**we.scale:1;return"number"==typeof we.n?Math.round(-Math.abs(we.n)*_e)/_e*$e:void 0}case"abs":{const Te=this.buildParameters(e.parameters,["number"],t);return Te.number instanceof c?Te.number.abs():"number"==typeof Te.number?Math.abs(Te.number):void 0}case"modulo":{const Ae=this.buildParameters(e.parameters,["dividend","divisor"],t);return"number"==typeof Ae.dividend&&"number"==typeof Ae.divisor?Ae.dividend%Ae.divisor:void 0}case"sqrt":{const Pe=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Pe.number?Math.sqrt(Pe.number):void 0}case"log":{const Oe=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Oe.number?Math.log(Oe.number):void 0}case"exp":{const Ie=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Ie.number?Math.exp(Ie.number):void 0}case"odd":{const Se=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Se.number&&Se.number%2!=0}case"even":{const Ce=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Ce.number&&Ce.number%2==0}case"before":{const Le=this.getRangeParameters(e.parameters.entries,t);switch(`${Le[0].type}-${Le[1].type}`){case"point-point":return Le[0].value<Le[1].value;case"point-interval":return Le[1].includeFrom?Le[0].value<Le[1].from:Le[0].value<=Le[1].from;case"interval-point":return Le[0].includeTo?Le[0].to<Le[1].value:Le[0].to<=Le[1].value;case"interval-interval":return Le[0].includeTo&&Le[1].includeFrom?Le[0].to<Le[1].from:Le[0].to<=Le[1].from}return}case"after":{const Me=this.getRangeParameters(e.parameters.entries,t);switch(`${Me[0].type}-${Me[1].type}`){case"point-point":return Me[0].value>Me[1].value;case"point-interval":return Me[1].includeTo?Me[0].value>Me[1].to:Me[0].value>=Me[1].to;case"interval-point":return Me[0].includeFrom?Me[0].from>Me[1].value:Me[0].from>=Me[1].value;case"interval-interval":return Me[0].includeFrom&&Me[1].includeTo?Me[0].from>Me[1].to:Me[0].from>=Me[1].to}return}case"meets":{const Fe=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${Fe[0].type}-${Fe[1].type}`?!(!Fe[0].includeTo||!Fe[1].includeFrom)&&Fe[0].to===Fe[1].from:void 0}case"met by":{const ke=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${ke[0].type}-${ke[1].type}`?!(!ke[0].includeFrom||!ke[1].includeTo)&&ke[0].from===ke[1].to:void 0}case"overlaps":{const De=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${De[0].type}-${De[1].type}`?(De[0].includeTo&&De[1].includeFrom?De[0].to>=De[1].from:De[0].to>De[1].from)&&(De[0].includeFrom&&De[1].includeTo?De[0].from<=De[1].to:De[0].from<De[1].to):void 0}case"overlaps before":{const Re=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${Re[0].type}-${Re[1].type}`?(Re[0].includeTo&&Re[1].includeFrom?Re[0].to>=Re[1].from:Re[0].to>Re[1].from)&&(Re[0].includeFrom&&Re[1].includeTo?Re[0].from<=Re[1].from:Re[0].from<Re[1].from):void 0}case"overlaps after":{const Ue=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${Ue[0].type}-${Ue[1].type}`?(Ue[0].includeTo&&Ue[1].includeFrom?Ue[0].to>=Ue[1].to:Ue[0].to>Ue[1].to)&&(Ue[0].includeFrom&&Ue[1].includeTo?Ue[0].from<=Ue[1].to:Ue[0].from<Ue[1].to):void 0}case"finishes":{const Be=this.getRangeParameters(e.parameters.entries,t);switch(`${Be[0].type}-${Be[1].type}`){case"point-interval":return!!Be[1].includeTo&&Be[0].value==Be[1].to;case"interval-interval":return Be[0].includeTo===Be[1].includeTo&&Be[0].to===Be[1].to}return}case"finished by":{const je=this.getRangeParameters(e.parameters.entries,t);switch(`${je[0].type}-${je[1].type}`){case"interval-point":return!!je[0].includeTo&&je[0].to==je[1].value;case"interval-interval":return je[0].includeTo===je[1].includeTo&&je[0].to===je[1].to}return}case"includes":{const Ve=this.getRangeParameters(e.parameters.entries,t);switch(`${Ve[0].type}-${Ve[1].type}`){case"interval-point":return Ve[0].includeTo,Ve[0].to>=Ve[1].value&&(Ve[0].includeFrom?Ve[0].from<=Ve[1].value:Ve[0].from<Ve[1].value);case"interval-interval":return(Ve[0].includeTo===Ve[1].includeTo?Ve[0].to>=Ve[1].to:Ve[0].to>Ve[1].to)&&(Ve[0].includeFrom===Ve[1].includeFrom?Ve[0].from<=Ve[1].from:Ve[0].from<Ve[1].from)}return}case"during":{const qe=this.getRangeParameters(e.parameters.entries,t);switch(`${qe[0].type}-${qe[1].type}`){case"point-interval":return qe[1].includeTo,qe[1].to>=qe[0].value&&(qe[1].includeFrom?qe[1].from<=qe[0].value:qe[1].from<qe[0].value);case"interval-interval":return(qe[0].includeTo===qe[1].includeTo?qe[1].to>=qe[0].to:qe[1].to>qe[0].to)&&(qe[0].includeFrom===qe[1].includeFrom?qe[1].from<=qe[0].from:qe[1].from<qe[0].from)}return}case"starts":{const Ye=this.getRangeParameters(e.parameters.entries,t);switch(`${Ye[0].type}-${Ye[1].type}`){case"point-interval":return!!Ye[1].includeFrom&&Ye[0].value==Ye[1].from;case"interval-interval":return Ye[0].includeFrom===Ye[1].includeFrom&&Ye[0].from===Ye[1].from}return}case"started by":{const Xe=this.getRangeParameters(e.parameters.entries,t);switch(`${Xe[0].type}-${Xe[1].type}`){case"interval-point":return!!Xe[0].includeFrom&&Xe[0].from==Xe[1].value;case"interval-interval":return Xe[0].includeFrom===Xe[1].includeFrom&&Xe[0].from===Xe[1].from}return}case"coinsides":{const He=this.getRangeParameters(e.parameters.entries,t);switch(`${He[0].type}-${He[1].type}`){case"point-point":return He[0].value===He[1].value;case"interval-interval":return He[0].includeFrom===He[1].includeFrom&&He[0].from===He[1].from&&He[0].includeTo===He[1].includeTo&&He[0].to===He[1].to}return}case"decision table":return this.decisionTable(e,t);case"boxed expression":return this.boxedExpression(e,t)}}decisionTable(e,t){let n={};(e?.parameters?.entries??[]).forEach(((e,t)=>{if(e.node==i.NAMED_PARAMETER){let t=e.name?.value??null;["inputs","outputs","rule list"].indexOf(t)>=0&&(n[t]=e.expression?.entries??[]),"hit policy"==t&&(n[t]=this._build(e.expression)??"Unique")}else t<3?n[["inputs","outputs","rule list"][t]]=e.expression?.entries??[]:3==t&&(n["hit policy"]=this._build(e.expression)??"Unique")}));let r=null,s=[];switch(n["rule list"].forEach(((e,r)=>{let o={rule:r,result:!0,output:{}};n.inputs.forEach(((n,r)=>{const s=n.node===i.STRING?new i({node:i.NAME,value:this._build(n)}):n;e.entries[r]?.node===i.LIST?o.result=o.result&&this._build(new i({node:i.IN_LIST,input:s,list:e.entries[r]}),t):o.result=o.result&&this._build(new i({node:i.IN,input:s,test:e.entries[r]}),t)})),n.outputs.forEach(((r,s)=>{let i=this._build(r,t);m.set(o.output,i,this._build(e.entries[n.inputs.length+s],t))})),s.push(o)})),n["hit policy"]){case"U":case"Unique":return s.forEach((e=>{e.result&&(r=null===r?e.output:void 0)})),r;case"A":case"Any":return s.forEach((e=>{e.result&&(r=null===r||r===e.output?e.output:void 0)})),r;case"F":case"First":return s.forEach((e=>{e.result&&(r=e.output)})),r;case"R":case"Rule order":return r=[],s.forEach((e=>{e.result&&r.push(e.output)})),r;case"C":case"Collect":{if(r={},1!==n.outputs.length)return;const e=this._build(n.outputs[0],t);return s.forEach((t=>{t.result&&(r[e]?r[e].push(t.output[e]):r[e]=[t.output[e]])})),r}case"C+":{if(r={},1!==n.outputs.length)return;const e=this._build(n.outputs[0],t);return s.forEach((t=>{t.result&&(r[e]?r[e]+=t.output[e]:r[e]=t.output[e])})),r}case"C<":{if(r={},1!==n.outputs.length)return;const e=this._build(n.outputs[0],t);return s.forEach((t=>{t.result&&(!r[e]||t.output[e]<r[e])&&(r[e]=t.output[e])})),r}case"C>":{if(r={},1!==n.outputs.length)return;const e=this._build(n.outputs[0],t);return s.forEach((t=>{t.result&&(!r[e]||t.output[e]>r[e])&&(r[e]=t.output[e])})),r}case"C#":{if(r={},1!==n.outputs.length)return;const e=this._build(n.outputs[0],t);return r[e]=0,s.forEach((t=>{t.result&&r[e]++})),r}}}boxedExpression(e,t){let n={};return(e?.parameters?.entries??[]).forEach(((e,t)=>{if(e.node==i.NAMED_PARAMETER){let t=e.name?.value??null;["context","expression"].indexOf(t)>=0&&(n[t]=e.expression??[])}else n[["context","expression"][t]]=e??[]})),this._build(n.expression,Object.assign(t||{},this._build(n.context)||{}))}}},184:e=>{"use strict";e.exports={set:function(e,t,n){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),void 0!==n?t.slice(0,-1).reduce(((e,n,r)=>Object(e[n])===e[n]?e[n]:e[n]=Math.abs(t[r+1])>>0==+t[r+1]?[]:{}),e)[t[t.length-1]]=n:delete t.slice(0,-1).reduce(((e,t)=>Object(e[t])===e[t]?e[t]:{}),e)[t[t.length-1]]),e},tsort:function(e){let t={},n=[],r={},s=function(e){this.id=e,this.afters=[]};return e.forEach((e=>{let n=e[0],r=e[1];t[n]||(t[n]=new s(n)),t[r]||(t[r]=new s(r)),t[n].afters.push(r)})),Object.keys(t).forEach((function e(s,i){let o=t[s],a=o.id;r[s]||(Array.isArray(i)||(i=[]),i.push(a),r[s]=!0,o.afters.forEach((function(t){if(i.indexOf(t)>=0)throw new Error("closed chain : "+t+" is in "+a);e(t.toString(),i.map((function(e){return e})))})),n.unshift(a))})),n}}},177:e=>{"use strict";e.exports={Strings:class{static matches({input:e,pattern:t}){if("string"==typeof e&&"string"==typeof t)try{const n=new RegExp(t);return!!e.match(n)}catch(e){return}}static replace({input:e,pattern:t,replacement:n,flags:r}){if("string"==typeof e&&"string"==typeof t&&"string"==typeof n)try{const s=r?new RegExp(t,r):new RegExp(t);return e.replace(s,n)}catch(e){return}}static split({string:e,delimiter:t}){if("string"==typeof e&&"string"==typeof t)try{const n=new RegExp(t);return e.split(n)}catch(e){return}}static extract({string:e,pattern:t}){if("string"==typeof e&&"string"==typeof t)try{const n=new RegExp(t,"g");return[...e.matchAll(n)].flat()}catch(e){return}}}}},776:function(e,t,n){var r;!function(s){"use strict";var i,o,a,l=9e15,u=1e9,c="0123456789abcdef",p="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",h="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",m={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},d=!0,f="[DecimalError] ",b=f+"Invalid argument: ",g=f+"Precision limit exceeded",y=f+"crypto unavailable",x="[object Decimal]",v=Math.floor,N=Math.pow,E=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,w=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,_=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,T=1e7,A=7,P=p.length-1,O=h.length-1,I={toStringTag:x};function S(e){var t,n,r,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)r=e[t]+"",(n=A-r.length)&&(i+=V(n)),i+=r;o=e[t],(n=A-(r=o+"").length)&&(i+=V(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return i+o}function C(e,t,n){if(e!==~~e||e<t||e>n)throw Error(b+e)}function L(e,t,n,r){var s,i,o,a;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=A,s=0):(s=Math.ceil((t+1)/A),t%=A),i=N(10,A-t),a=e[s]%i|0,null==r?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=n<4&&99999==a||n>3&&49999==a||5e4==a||0==a):o=(n<4&&a+1==i||n>3&&a+1==i/2)&&(e[s+1]/i/100|0)==N(10,t-2)-1||(a==i/2||0==a)&&0==(e[s+1]/i/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(r||n<4)&&9999==a||!r&&n>3&&4999==a):o=((r||n<4)&&a+1==i||!r&&n>3&&a+1==i/2)&&(e[s+1]/i/1e3|0)==N(10,t-3)-1,o}function M(e,t,n){for(var r,s,i=[0],o=0,a=e.length;o<a;){for(s=i.length;s--;)i[s]*=t;for(i[0]+=c.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}I.absoluteValue=I.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),k(e)},I.ceil=function(){return k(new this.constructor(this),this.e+1,2)},I.clampedTo=I.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(b+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},I.comparedTo=I.cmp=function(e){var t,n,r,s,i=this,o=i.d,a=(e=new i.constructor(e)).d,l=i.s,u=e.s;if(!o||!a)return l&&u?l!==u?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(i.e!==e.e)return i.e>e.e^l<0?1:-1;for(t=0,n=(r=o.length)<(s=a.length)?r:s;t<n;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return r===s?0:r>s^l<0?1:-1},I.cosine=I.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+A,r.rounding=1,n=function(e,t){var n,r,s;if(t.isZero())return t;(r=t.d.length)<32?s=(1/K(4,n=Math.ceil(r/3))).toString():(n=16,s="2.3283064365386962890625e-10"),e.precision+=n,t=J(e,1,t.times(s),new e(1));for(var i=n;i--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,z(r,n)),r.precision=e,r.rounding=t,k(2==a||3==a?n.neg():n,e,t,!0)):new r(1):new r(NaN)},I.cubeRoot=I.cbrt=function(){var e,t,n,r,s,i,o,a,l,u,c=this,p=c.constructor;if(!c.isFinite()||c.isZero())return new p(c);for(d=!1,(i=c.s*N(c.s*c,1/3))&&Math.abs(i)!=1/0?r=new p(i.toString()):(n=S(c.d),(i=((e=c.e)-n.length+1)%3)&&(n+=1==i||-2==i?"0":"00"),i=N(n,1/3),e=v((e+1)/3)-(e%3==(e<0?-1:2)),(r=new p(n=i==1/0?"5e"+e:(n=i.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),o=(e=p.precision)+3;;)if(u=(l=(a=r).times(a).times(a)).plus(c),r=F(u.plus(c).times(a),u.plus(l),o+2,1),S(a.d).slice(0,o)===(n=S(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(s||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(k(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!s&&(k(a,e+1,0),a.times(a).times(a).eq(c))){r=a;break}o+=4,s=1}return d=!0,k(r,e,p.rounding,t)},I.decimalPlaces=I.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=((e=t.length-1)-v(this.e/A))*A,e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},I.dividedBy=I.div=function(e){return F(this,new this.constructor(e))},I.dividedToIntegerBy=I.divToInt=function(e){var t=this.constructor;return k(F(this,new t(e),0,1,1),t.precision,t.rounding)},I.equals=I.eq=function(e){return 0===this.cmp(e)},I.floor=function(){return k(new this.constructor(this),this.e+1,3)},I.greaterThan=I.gt=function(e){return this.cmp(e)>0},I.greaterThanOrEqualTo=I.gte=function(e){var t=this.cmp(e);return 1==t||0===t},I.hyperbolicCosine=I.cosh=function(){var e,t,n,r,s,i=this,o=i.constructor,a=new o(1);if(!i.isFinite())return new o(i.s?1/0:NaN);if(i.isZero())return a;n=o.precision,r=o.rounding,o.precision=n+Math.max(i.e,i.sd())+4,o.rounding=1,(s=i.d.length)<32?t=(1/K(4,e=Math.ceil(s/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=J(o,1,i.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=i.times(i),i=a.minus(l.times(c.minus(l.times(c))));return k(i,o.precision=n,o.rounding=r,!0)},I.hyperbolicSine=I.sinh=function(){var e,t,n,r,s=this,i=s.constructor;if(!s.isFinite()||s.isZero())return new i(s);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(s.e,s.sd())+4,i.rounding=1,(r=s.d.length)<3)s=J(i,2,s,s,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,s=J(i,2,s=s.times(1/K(5,e)),s,!0);for(var o,a=new i(5),l=new i(16),u=new i(20);e--;)o=s.times(s),s=s.times(a.plus(o.times(l.times(o).plus(u))))}return i.precision=t,i.rounding=n,k(s,t,n,!0)},I.hyperbolicTangent=I.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,F(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},I.inverseCosine=I.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),s=n.precision,i=n.rounding;return-1!==r?0===r?t.isNeg()?B(n,s,i):new n(0):new n(NaN):t.isZero()?B(n,s+4,i).times(.5):(n.precision=s+6,n.rounding=1,t=t.asin(),e=B(n,s+4,i).times(.5),n.precision=s,n.rounding=i,e.minus(t))},I.inverseHyperbolicCosine=I.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,d=!1,n=n.times(n).minus(1).sqrt().plus(n),d=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},I.inverseHyperbolicSine=I.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,d=!1,n=n.times(n).plus(1).sqrt().plus(n),d=!0,r.precision=e,r.rounding=t,n.ln())},I.inverseHyperbolicTangent=I.atanh=function(){var e,t,n,r,s=this,i=s.constructor;return s.isFinite()?s.e>=0?new i(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(e=i.precision,t=i.rounding,r=s.sd(),Math.max(r,e)<2*-s.e-1?k(new i(s),e,t,!0):(i.precision=n=r-s.e,s=F(s.plus(1),new i(1).minus(s),n+e,1),i.precision=e+4,i.rounding=1,s=s.ln(),i.precision=e,i.rounding=t,s.times(.5))):new i(NaN)},I.inverseSine=I.asin=function(){var e,t,n,r,s=this,i=s.constructor;return s.isZero()?new i(s):(t=s.abs().cmp(1),n=i.precision,r=i.rounding,-1!==t?0===t?((e=B(i,n+4,r).times(.5)).s=s.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,s=s.div(new i(1).minus(s.times(s)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,s.times(2)))},I.inverseTangent=I.atan=function(){var e,t,n,r,s,i,o,a,l,u=this,c=u.constructor,p=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&p+4<=O)return(o=B(c,p+4,h).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(p+4<=O)return(o=B(c,p+4,h).times(.5)).s=u.s,o}for(c.precision=a=p+10,c.rounding=1,e=n=Math.min(28,a/A+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(d=!1,t=Math.ceil(a/A),r=1,l=u.times(u),o=new c(u),s=u;-1!==e;)if(s=s.times(l),i=o.minus(s.div(r+=2)),s=s.times(l),void 0!==(o=i.plus(s.div(r+=2))).d[t])for(e=t;o.d[e]===i.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),d=!0,k(o,c.precision=p,c.rounding=h,!0)},I.isFinite=function(){return!!this.d},I.isInteger=I.isInt=function(){return!!this.d&&v(this.e/A)>this.d.length-2},I.isNaN=function(){return!this.s},I.isNegative=I.isNeg=function(){return this.s<0},I.isPositive=I.isPos=function(){return this.s>0},I.isZero=function(){return!!this.d&&0===this.d[0]},I.lessThan=I.lt=function(e){return this.cmp(e)<0},I.lessThanOrEqualTo=I.lte=function(e){return this.cmp(e)<1},I.logarithm=I.log=function(e){var t,n,r,s,i,o,a,l,u=this,c=u.constructor,p=c.precision,h=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=u.d,u.s<0||!n||!n[0]||u.eq(1))return new c(n&&!n[0]?-1/0:1!=u.s?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(s=n[0];s%10==0;)s/=10;i=1!==s}if(d=!1,o=G(u,a=p+5),r=t?U(c,a+10):G(e,a),L((l=F(o,r,a,1)).d,s=p,h))do{if(o=G(u,a+=10),r=t?U(c,a+10):G(e,a),l=F(o,r,a,1),!i){+S(l.d).slice(s+1,s+15)+1==1e14&&(l=k(l,p+1,0));break}}while(L(l.d,s+=10,h));return d=!0,k(l,p,h)},I.minus=I.sub=function(e){var t,n,r,s,i,o,a,l,u,c,p,h,m=this,f=m.constructor;if(e=new f(e),!m.d||!e.d)return m.s&&e.s?m.d?e.s=-e.s:e=new f(e.d||m.s!==e.s?m:NaN):e=new f(NaN),e;if(m.s!=e.s)return e.s=-e.s,m.plus(e);if(u=m.d,h=e.d,a=f.precision,l=f.rounding,!u[0]||!h[0]){if(h[0])e.s=-e.s;else{if(!u[0])return new f(3===l?-0:0);e=new f(m)}return d?k(e,a,l):e}if(n=v(e.e/A),c=v(m.e/A),u=u.slice(),i=c-n){for((p=i<0)?(t=u,i=-i,o=h.length):(t=h,n=c,o=u.length),i>(r=Math.max(Math.ceil(a/A),o)+2)&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for((p=(r=u.length)<(o=h.length))&&(o=r),r=0;r<o;r++)if(u[r]!=h[r]){p=u[r]<h[r];break}i=0}for(p&&(t=u,u=h,h=t,e.s=-e.s),o=u.length,r=h.length-o;r>0;--r)u[o++]=0;for(r=h.length;r>i;){if(u[--r]<h[r]){for(s=r;s&&0===u[--s];)u[s]=T-1;--u[s],u[r]+=T}u[r]-=h[r]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(e.d=u,e.e=R(u,n),d?k(e,a,l):e):new f(3===l?-0:0)},I.modulo=I.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?k(new r(n),r.precision,r.rounding):(d=!1,9==r.modulo?(t=F(n,e.abs(),0,3,1)).s*=e.s:t=F(n,e,0,r.modulo,1),t=t.times(e),d=!0,n.minus(t))},I.naturalExponential=I.exp=function(){return H(this)},I.naturalLogarithm=I.ln=function(){return G(this)},I.negated=I.neg=function(){var e=new this.constructor(this);return e.s=-e.s,k(e)},I.plus=I.add=function(e){var t,n,r,s,i,o,a,l,u,c,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new h(e.d||p.s===e.s?p:NaN)):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(u=p.d,c=e.d,a=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(e=new h(p)),d?k(e,a,l):e;if(i=v(p.e/A),r=v(e.e/A),u=u.slice(),s=i-r){for(s<0?(n=u,s=-s,o=c.length):(n=c,r=i,o=u.length),s>(o=(i=Math.ceil(a/A))>o?i+1:o+1)&&(s=o,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for((o=u.length)-(s=c.length)<0&&(s=o,n=c,c=u,u=n),t=0;s;)t=(u[--s]=u[s]+c[s]+t)/T|0,u[s]%=T;for(t&&(u.unshift(t),++r),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=R(u,r),d?k(e,a,l):e},I.precision=I.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(b+e);return n.d?(t=j(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},I.round=function(){var e=this,t=e.constructor;return k(new t(e),e.e+1,t.rounding)},I.sine=I.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+A,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:J(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=J(e,2,t=t.times(1/K(5,n)),t);for(var s,i=new e(5),o=new e(16),a=new e(20);n--;)s=t.times(t),t=t.times(i.plus(s.times(o.times(s).minus(a))));return t}(r,z(r,n)),r.precision=e,r.rounding=t,k(a>2?n.neg():n,e,t,!0)):new r(NaN)},I.squareRoot=I.sqrt=function(){var e,t,n,r,s,i,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(d=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=S(a)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=v((l+1)/2)-(l<0||l%2),r=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):r=new c(u.toString()),n=(l=c.precision)+3;;)if(r=(i=r).plus(F(o,i,n+2,1)).times(.5),S(i.d).slice(0,n)===(t=S(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(k(r,l+1,1),e=!r.times(r).eq(o));break}if(!s&&(k(i,l+1,0),i.times(i).eq(o))){r=i;break}n+=4,s=1}return d=!0,k(r,l,c.rounding,e)},I.tangent=I.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=F(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,k(2==a||4==a?n.neg():n,e,t,!0)):new r(NaN)},I.times=I.mul=function(e){var t,n,r,s,i,o,a,l,u,c=this,p=c.constructor,h=c.d,m=(e=new p(e)).d;if(e.s*=c.s,!(h&&h[0]&&m&&m[0]))return new p(!e.s||h&&!h[0]&&!m||m&&!m[0]&&!h?NaN:h&&m?0*e.s:e.s/0);for(n=v(c.e/A)+v(e.e/A),(l=h.length)<(u=m.length)&&(i=h,h=m,m=i,o=l,l=u,u=o),i=[],r=o=l+u;r--;)i.push(0);for(r=u;--r>=0;){for(t=0,s=l+r;s>r;)a=i[s]+m[r]*h[s-r-1]+t,i[s--]=a%T|0,t=a/T|0;i[s]=(i[s]+t)%T|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=R(i,n),d?k(e,p.precision,p.rounding):e},I.toBinary=function(e,t){return ee(this,2,e,t)},I.toDecimalPlaces=I.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(C(e,0,u),void 0===t?t=r.rounding:C(t,0,8),k(n,e+n.e+1,t))},I.toExponential=function(e,t){var n,r=this,s=r.constructor;return void 0===e?n=D(r,!0):(C(e,0,u),void 0===t?t=s.rounding:C(t,0,8),n=D(r=k(new s(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},I.toFixed=function(e,t){var n,r,s=this,i=s.constructor;return void 0===e?n=D(s):(C(e,0,u),void 0===t?t=i.rounding:C(t,0,8),n=D(r=k(new i(s),e+s.e+1,t),!1,e+r.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n},I.toFraction=function(e){var t,n,r,s,i,o,a,l,u,c,p,h,m=this,f=m.d,g=m.constructor;if(!f)return new g(m);if(u=n=new g(1),r=l=new g(0),o=(i=(t=new g(r)).e=j(f)-m.e-1)%A,t.d[0]=N(10,o<0?A+o:o),null==e)e=i>0?t:u;else{if(!(a=new g(e)).isInt()||a.lt(u))throw Error(b+a);e=a.gt(t)?i>0?t:u:a}for(d=!1,a=new g(S(f)),c=g.precision,g.precision=i=f.length*A*2;p=F(a,t,0,1,1),1!=(s=n.plus(p.times(r))).cmp(e);)n=r,r=s,s=u,u=l.plus(p.times(s)),l=s,s=t,t=a.minus(p.times(s)),a=s;return s=F(e.minus(n),r,0,1,1),l=l.plus(s.times(u)),n=n.plus(s.times(r)),l.s=u.s=m.s,h=F(u,r,i,1).minus(m).abs().cmp(F(l,n,i,1).minus(m).abs())<1?[u,r]:[l,n],g.precision=c,d=!0,h},I.toHexadecimal=I.toHex=function(e,t){return ee(this,16,e,t)},I.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:C(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(d=!1,n=F(n,e,0,t,1).times(e),d=!0,k(n)):(e.s=n.s,n=e),n},I.toNumber=function(){return+this},I.toOctal=function(e,t){return ee(this,8,e,t)},I.toPower=I.pow=function(e){var t,n,r,s,i,o,a=this,l=a.constructor,u=+(e=new l(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new l(N(+a,u));if((a=new l(a)).eq(1))return a;if(r=l.precision,i=l.rounding,e.eq(1))return k(a,r,i);if((t=v(e.e/A))>=e.d.length-1&&(n=u<0?-u:u)<=9007199254740991)return s=q(l,a,n,r),e.s<0?new l(1).div(s):k(s,r,i);if((o=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(n=N(+a,u))&&isFinite(n)?new l(n+"").e:v(u*(Math.log("0."+S(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(d=!1,l.rounding=a.s=1,n=Math.min(12,(t+"").length),(s=H(e.times(G(a,r+n)),r)).d&&L((s=k(s,r+5,1)).d,r,i)&&(t=r+10,+S((s=k(H(e.times(G(a,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(s=k(s,r+1,0))),s.s=o,d=!0,l.rounding=i,k(s,r,i))},I.toPrecision=function(e,t){var n,r=this,s=r.constructor;return void 0===e?n=D(r,r.e<=s.toExpNeg||r.e>=s.toExpPos):(C(e,1,u),void 0===t?t=s.rounding:C(t,0,8),n=D(r=k(new s(r),e,t),e<=r.e||r.e<=s.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},I.toSignificantDigits=I.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(C(e,1,u),void 0===t?t=n.rounding:C(t,0,8)),k(new n(this),e,t)},I.toString=function(){var e=this,t=e.constructor,n=D(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},I.truncated=I.trunc=function(){return k(new this.constructor(this),this.e+1,1)},I.valueOf=I.toJSON=function(){var e=this,t=e.constructor,n=D(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var F=function(){function e(e,t,n){var r,s=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+s,e[i]=r%n|0,s=r/n|0;return s&&e.unshift(s),e}function t(e,t,n,r){var s,i;if(n!=r)i=n>r?1:-1;else for(s=i=0;s<n;s++)if(e[s]!=t[s]){i=e[s]>t[s]?1:-1;break}return i}function n(e,t,n,r){for(var s=0;n--;)e[n]-=s,s=e[n]<t[n]?1:0,e[n]=s*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,s,i,a,l,u){var c,p,h,m,d,f,b,g,y,x,N,E,w,$,_,P,O,I,S,C,L=r.constructor,M=r.s==s.s?1:-1,F=r.d,D=s.d;if(!(F&&F[0]&&D&&D[0]))return new L(r.s&&s.s&&(F?!D||F[0]!=D[0]:D)?F&&0==F[0]||!D?0*M:M/0:NaN);for(u?(d=1,p=r.e-s.e):(u=T,d=A,p=v(r.e/d)-v(s.e/d)),S=D.length,O=F.length,x=(y=new L(M)).d=[],h=0;D[h]==(F[h]||0);h++);if(D[h]>(F[h]||0)&&p--,null==i?($=i=L.precision,a=L.rounding):$=l?i+(r.e-s.e)+1:i,$<0)x.push(1),f=!0;else{if($=$/d+2|0,h=0,1==S){for(m=0,D=D[0],$++;(h<O||m)&&$--;h++)_=m*u+(F[h]||0),x[h]=_/D|0,m=_%D|0;f=m||h<O}else{for((m=u/(D[0]+1)|0)>1&&(D=e(D,m,u),F=e(F,m,u),S=D.length,O=F.length),P=S,E=(N=F.slice(0,S)).length;E<S;)N[E++]=0;(C=D.slice()).unshift(0),I=D[0],D[1]>=u/2&&++I;do{m=0,(c=t(D,N,S,E))<0?(w=N[0],S!=E&&(w=w*u+(N[1]||0)),(m=w/I|0)>1?(m>=u&&(m=u-1),1==(c=t(b=e(D,m,u),N,g=b.length,E=N.length))&&(m--,n(b,S<g?C:D,g,u))):(0==m&&(c=m=1),b=D.slice()),(g=b.length)<E&&b.unshift(0),n(N,b,E,u),-1==c&&(c=t(D,N,S,E=N.length))<1&&(m++,n(N,S<E?C:D,E,u)),E=N.length):0===c&&(m++,N=[0]),x[h++]=m,c&&N[0]?N[E++]=F[P]||0:(N=[F[P]],E=1)}while((P++<O||void 0!==N[0])&&$--);f=void 0!==N[0]}x[0]||x.shift()}if(1==d)y.e=p,o=f;else{for(h=1,m=x[0];m>=10;m/=10)h++;y.e=h+p*d-1,k(y,l?i+y.e+1:i,a,f)}return y}}();function k(e,t,n,r){var s,i,o,a,l,u,c,p,h,m=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(s=1,a=p[0];a>=10;a/=10)s++;if((i=t-s)<0)i+=A,o=t,l=(c=p[h=0])/N(10,s-o-1)%10|0;else if((h=Math.ceil((i+1)/A))>=(a=p.length)){if(!r)break e;for(;a++<=h;)p.push(0);c=l=0,s=1,o=(i%=A)-A+1}else{for(c=a=p[h],s=1;a>=10;a/=10)s++;l=(o=(i%=A)-A+s)<0?0:c/N(10,s-o-1)%10|0}if(r=r||t<0||void 0!==p[h+1]||(o<0?c:c%N(10,s-o-1)),u=n<4?(l||r)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?o>0?c/N(10,s-o):0:p[h-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,u?(t-=e.e+1,p[0]=N(10,(A-t%A)%A),e.e=-t||0):p[0]=e.e=0,e;if(0==i?(p.length=h,a=1,h--):(p.length=h+1,a=N(10,A-i),p[h]=o>0?(c/N(10,s-o)%N(10,o)|0)*a:0),u)for(;;){if(0==h){for(i=1,o=p[0];o>=10;o/=10)i++;for(o=p[0]+=a,a=1;o>=10;o/=10)a++;i!=a&&(e.e++,p[0]==T&&(p[0]=1));break}if(p[h]+=a,p[h]!=T)break;p[h--]=0,a=1}for(i=p.length;0===p[--i];)p.pop()}return d&&(e.e>m.maxE?(e.d=null,e.e=NaN):e.e<m.minE&&(e.e=0,e.d=[0])),e}function D(e,t,n){if(!e.isFinite())return Z(e);var r,s=e.e,i=S(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+V(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):s<0?(i="0."+V(-s-1)+i,n&&(r=n-o)>0&&(i+=V(r))):s>=o?(i+=V(s+1-o),n&&(r=n-s-1)>0&&(i=i+"."+V(r))):((r=s+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(s+1===o&&(i+="."),i+=V(r))),i}function R(e,t){var n=e[0];for(t*=A;n>=10;n/=10)t++;return t}function U(e,t,n){if(t>P)throw d=!0,n&&(e.precision=n),Error(g);return k(new e(p),t,1,!0)}function B(e,t,n){if(t>O)throw Error(g);return k(new e(h),t,n,!0)}function j(e){var t=e.length-1,n=t*A+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function V(e){for(var t="";e--;)t+="0";return t}function q(e,t,n,r){var s,i=new e(1),o=Math.ceil(r/A+4);for(d=!1;;){if(n%2&&te((i=i.times(t)).d,o)&&(s=!0),0===(n=v(n/2))){n=i.d.length-1,s&&0===i.d[n]&&++i.d[n];break}te((t=t.times(t)).d,o)}return d=!0,i}function Y(e){return 1&e.d[e.d.length-1]}function X(e,t,n){for(var r,s=new e(t[0]),i=0;++i<t.length;){if(!(r=new e(t[i])).s){s=r;break}s[n](r)&&(s=r)}return s}function H(e,t){var n,r,s,i,o,a,l,u=0,c=0,p=0,h=e.constructor,m=h.rounding,f=h.precision;if(!e.d||!e.d[0]||e.e>17)return new h(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(d=!1,l=f):l=t,a=new h(.03125);e.e>-2;)e=e.times(a),p+=5;for(l+=r=Math.log(N(2,p))/Math.LN10*2+5|0,n=i=o=new h(1),h.precision=l;;){if(i=k(i.times(e),l,1),n=n.times(++c),S((a=o.plus(F(i,n,l,1))).d).slice(0,l)===S(o.d).slice(0,l)){for(s=p;s--;)o=k(o.times(o),l,1);if(null!=t)return h.precision=f,o;if(!(u<3&&L(o.d,l-r,m,u)))return k(o,h.precision=f,m,d=!0);h.precision=l+=10,n=i=a=new h(1),c=0,u++}o=a}}function G(e,t){var n,r,s,i,o,a,l,u,c,p,h,m=1,f=e,b=f.d,g=f.constructor,y=g.rounding,x=g.precision;if(f.s<0||!b||!b[0]||!f.e&&1==b[0]&&1==b.length)return new g(b&&!b[0]?-1/0:1!=f.s?NaN:b?0:f);if(null==t?(d=!1,c=x):c=t,g.precision=c+=10,r=(n=S(b)).charAt(0),!(Math.abs(i=f.e)<15e14))return u=U(g,c+2,x).times(i+""),f=G(new g(r+"."+n.slice(1)),c-10).plus(u),g.precision=x,null==t?k(f,x,y,d=!0):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=S((f=f.times(e)).d)).charAt(0),m++;for(i=f.e,r>1?(f=new g("0."+n),i++):f=new g(r+"."+n.slice(1)),p=f,l=o=f=F(f.minus(1),f.plus(1),c,1),h=k(f.times(f),c,1),s=3;;){if(o=k(o.times(h),c,1),S((u=l.plus(F(o,new g(s),c,1))).d).slice(0,c)===S(l.d).slice(0,c)){if(l=l.times(2),0!==i&&(l=l.plus(U(g,c+2,x).times(i+""))),l=F(l,new g(m),c,1),null!=t)return g.precision=x,l;if(!L(l.d,c-10,y,a))return k(l,g.precision=x,y,d=!0);g.precision=c+=10,u=o=f=F(p.minus(1),p.plus(1),c,1),h=k(f.times(f),c,1),s=a=1}l=u,s+=2}}function Z(e){return String(e.s*e.s/0)}function W(e,t){var n,r,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(s=t.length;48===t.charCodeAt(s-1);--s);if(t=t.slice(r,s)){if(s-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%A,n<0&&(r+=A),r<s){for(r&&e.d.push(+t.slice(0,r)),s-=A;r<s;)e.d.push(+t.slice(r,r+=A));t=t.slice(r),r=A-t.length}else r-=s;for(;r--;)t+="0";e.d.push(+t),d&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Q(e,t){var n,r,s,o,a,l,u,c,p;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),_.test(t))return W(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(w.test(t))n=16,t=t.toLowerCase();else if(E.test(t))n=2;else{if(!$.test(t))throw Error(b+t);n=8}for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),a=(o=t.indexOf("."))>=0,r=e.constructor,a&&(o=(l=(t=t.replace(".","")).length)-o,s=q(r,new r(n),o,2*o)),o=p=(c=M(t,n,T)).length-1;0===c[o];--o)c.pop();return o<0?new r(0*e.s):(e.e=R(c,p),e.d=c,d=!1,a&&(e=F(e,s,4*l)),u&&(e=e.times(Math.abs(u)<54?N(2,u):i.pow(2,u))),d=!0,e)}function J(e,t,n,r,s){var i,o,a,l,u=e.precision,c=Math.ceil(u/A);for(d=!1,l=n.times(n),a=new e(r);;){if(o=F(a.times(l),new e(t++*t++),u,1),a=s?r.plus(o):r.minus(o),r=F(o.times(l),new e(t++*t++),u,1),void 0!==(o=a.plus(r)).d[c]){for(i=c;o.d[i]===a.d[i]&&i--;);if(-1==i)break}i=a,a=r,r=o,o=i}return d=!0,o.d.length=c+1,o}function K(e,t){for(var n=e;--t;)n*=e;return n}function z(e,t){var n,r=t.s<0,s=B(e,e.precision,1),i=s.times(.5);if((t=t.abs()).lte(i))return a=r?4:1,t;if((n=t.divToInt(s)).isZero())a=r?3:2;else{if((t=t.minus(n.times(s))).lte(i))return a=Y(n)?r?2:3:r?4:1,t;a=Y(n)?r?1:4:r?3:2}return t.minus(s).abs()}function ee(e,t,n,r){var s,i,a,l,p,h,m,d,f,b=e.constructor,g=void 0!==n;if(g?(C(n,1,u),void 0===r?r=b.rounding:C(r,0,8)):(n=b.precision,r=b.rounding),e.isFinite()){for(g?(s=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):s=t,(a=(m=D(e)).indexOf("."))>=0&&(m=m.replace(".",""),(f=new b(1)).e=m.length-a,f.d=M(D(f),10,s),f.e=f.d.length),i=p=(d=M(m,10,s)).length;0==d[--p];)d.pop();if(d[0]){if(a<0?i--:((e=new b(e)).d=d,e.e=i,d=(e=F(e,f,n,r,0,s)).d,i=e.e,h=o),a=d[n],l=s/2,h=h||void 0!==d[n+1],h=r<4?(void 0!==a||h)&&(0===r||r===(e.s<0?3:2)):a>l||a===l&&(4===r||h||6===r&&1&d[n-1]||r===(e.s<0?8:7)),d.length=n,h)for(;++d[--n]>s-1;)d[n]=0,n||(++i,d.unshift(1));for(p=d.length;!d[p-1];--p);for(a=0,m="";a<p;a++)m+=c.charAt(d[a]);if(g){if(p>1)if(16==t||8==t){for(a=16==t?4:3,--p;p%a;p++)m+="0";for(p=(d=M(m,s,t)).length;!d[p-1];--p);for(a=1,m="1.";a<p;a++)m+=c.charAt(d[a])}else m=m.charAt(0)+"."+m.slice(1);m=m+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)m="0"+m;m="0."+m}else if(++i>p)for(i-=p;i--;)m+="0";else i<p&&(m=m.slice(0,i)+"."+m.slice(i))}else m=g?"0p+0":"0";m=(16==t?"0x":2==t?"0b":8==t?"0o":"")+m}else m=Z(e);return e.s<0?"-"+m:m}function te(e,t){if(e.length>t)return e.length=t,!0}function ne(e){return new this(e).abs()}function re(e){return new this(e).acos()}function se(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function oe(e){return new this(e).asin()}function ae(e){return new this(e).asinh()}function le(e){return new this(e).atan()}function ue(e){return new this(e).atanh()}function ce(e,t){e=new this(e),t=new this(t);var n,r=this.precision,s=this.rounding,i=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?B(this,r,s):new this(0)).s=e.s:!e.d||t.isZero()?(n=B(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,n=this.atan(F(e,t,i,1)),t=B(this,i,1),this.precision=r,this.rounding=s,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(F(e,t,i,1)):(n=B(this,i,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function pe(e){return new this(e).cbrt()}function he(e){return k(e=new this(e),e.e+1,2)}function me(e,t,n){return new this(e).clamp(t,n)}function de(e){if(!e||"object"!=typeof e)throw Error(f+"Object expected");var t,n,r,s=!0===e.defaults,i=["precision",1,u,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],s&&(this[n]=m[n]),void 0!==(r=e[n])){if(!(v(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(b+n+": "+r);this[n]=r}if(n="crypto",s&&(this[n]=m[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(b+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(y);this[n]=!0}else this[n]=!1}return this}function fe(e){return new this(e).cos()}function be(e){return new this(e).cosh()}function ge(e,t){return new this(e).div(t)}function ye(e){return new this(e).exp()}function xe(e){return k(e=new this(e),e.e+1,3)}function ve(){var e,t,n=new this(0);for(d=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return d=!0,new this(1/0);n=t}return d=!0,n.sqrt()}function Ne(e){return e instanceof i||e&&e.toStringTag===x||!1}function Ee(e){return new this(e).ln()}function we(e,t){return new this(e).log(t)}function $e(e){return new this(e).log(2)}function _e(e){return new this(e).log(10)}function Te(){return X(this,arguments,"lt")}function Ae(){return X(this,arguments,"gt")}function Pe(e,t){return new this(e).mod(t)}function Oe(e,t){return new this(e).mul(t)}function Ie(e,t){return new this(e).pow(t)}function Se(e){var t,n,r,s,i=0,o=new this(1),a=[];if(void 0===e?e=this.precision:C(e,1,u),r=Math.ceil(e/A),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));i<r;)(s=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:a[i++]=s%1e7;else{if(!crypto.randomBytes)throw Error(y);for(t=crypto.randomBytes(r*=4);i<r;)(s=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(a.push(s%1e7),i+=4);i=r/4}else for(;i<r;)a[i++]=1e7*Math.random()|0;for(r=a[--i],e%=A,r&&e&&(s=N(10,A-e),a[i]=(r/s|0)*s);0===a[i];i--)a.pop();if(i<0)n=0,a=[0];else{for(n=-1;0===a[0];n-=A)a.shift();for(r=1,s=a[0];s>=10;s/=10)r++;r<A&&(n-=A-r)}return o.e=n,o.d=a,o}function Ce(e){return k(e=new this(e),e.e+1,this.rounding)}function Le(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Me(e){return new this(e).sin()}function Fe(e){return new this(e).sinh()}function ke(e){return new this(e).sqrt()}function De(e,t){return new this(e).sub(t)}function Re(){var e=0,t=arguments,n=new this(t[e]);for(d=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return d=!0,k(n,this.precision,this.rounding)}function Ue(e){return new this(e).tan()}function Be(e){return new this(e).tanh()}function je(e){return k(e=new this(e),e.e+1,1)}(i=function e(t){var n,r,s;function i(e){var t,n,r,s=this;if(!(s instanceof i))return new i(e);if(s.constructor=i,Ne(e))return s.s=e.s,void(d?!e.d||e.e>i.maxE?(s.e=NaN,s.d=null):e.e<i.minE?(s.e=0,s.d=[0]):(s.e=e.e,s.d=e.d.slice()):(s.e=e.e,s.d=e.d?e.d.slice():e.d));if("number"==(r=typeof e)){if(0===e)return s.s=1/e<0?-1:1,s.e=0,void(s.d=[0]);if(e<0?(e=-e,s.s=-1):s.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(d?t>i.maxE?(s.e=NaN,s.d=null):t<i.minE?(s.e=0,s.d=[0]):(s.e=t,s.d=[e]):(s.e=t,s.d=[e]))}return 0*e!=0?(e||(s.s=NaN),s.e=NaN,void(s.d=null)):W(s,e.toString())}if("string"!==r)throw Error(b+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),s.s=-1):(43===n&&(e=e.slice(1)),s.s=1),_.test(e)?W(s,e):Q(s,e)}if(i.prototype=I,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=de,i.clone=e,i.isDecimal=Ne,i.abs=ne,i.acos=re,i.acosh=se,i.add=ie,i.asin=oe,i.asinh=ae,i.atan=le,i.atanh=ue,i.atan2=ce,i.cbrt=pe,i.ceil=he,i.clamp=me,i.cos=fe,i.cosh=be,i.div=ge,i.exp=ye,i.floor=xe,i.hypot=ve,i.ln=Ee,i.log=we,i.log10=_e,i.log2=$e,i.max=Te,i.min=Ae,i.mod=Pe,i.mul=Oe,i.pow=Ie,i.random=Se,i.round=Ce,i.sign=Le,i.sin=Me,i.sinh=Fe,i.sqrt=ke,i.sub=De,i.sum=Re,i.tan=Ue,i.tanh=Be,i.trunc=je,void 0===t&&(t={}),t&&!0!==t.defaults)for(s=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<s.length;)t.hasOwnProperty(r=s[n++])||(t[r]=this[r]);return i.config(t),i}(m)).prototype.constructor=i,i.default=i.Decimal=i,p=new i(p),h=new i(h),void 0===(r=function(){return i}.call(t,n,t,e))||(e.exports=r)}()},932:(e,t,n)=>{"use strict";const r=n(501),s=n(844),i=n(192);e.exports={XMLParser:s,XMLValidator:r,XMLBuilder:i}},849:(e,t)=>{"use strict";const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+n+"]["+n+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",s=new RegExp("^"+r+"$");t.isExist=function(e){return void 0!==e},t.isEmptyObject=function(e){return 0===Object.keys(e).length},t.merge=function(e,t,n){if(t){const r=Object.keys(t),s=r.length;for(let i=0;i<s;i++)e[r[i]]="strict"===n?[t[r[i]]]:t[r[i]]}},t.getValue=function(e){return t.isExist(e)?e:""},t.isName=function(e){return!(null==s.exec(e))},t.getAllMatches=function(e,t){const n=[];let r=t.exec(e);for(;r;){const s=[];s.startIndex=t.lastIndex-r[0].length;const i=r.length;for(let e=0;e<i;e++)s.push(r[e]);n.push(s),r=t.exec(e)}return n},t.nameRegexp=r},501:(e,t,n)=>{"use strict";const r=n(849),s={allowBooleanAttributes:!1,unpairedTags:[]};function i(e){return" "===e||"\t"===e||"\n"===e||"\r"===e}function o(e,t){const n=t;for(;t<e.length;t++)if("?"!=e[t]&&" "!=e[t]);else{const r=e.substr(n,t-n);if(t>5&&"xml"===r)return d("InvalidXml","XML declaration allowed only at the start of the document.",b(e,t));if("?"==e[t]&&">"==e[t+1]){t++;break}}return t}function a(e,t){if(e.length>t+5&&"-"===e[t+1]&&"-"===e[t+2]){for(t+=3;t<e.length;t++)if("-"===e[t]&&"-"===e[t+1]&&">"===e[t+2]){t+=2;break}}else if(e.length>t+8&&"D"===e[t+1]&&"O"===e[t+2]&&"C"===e[t+3]&&"T"===e[t+4]&&"Y"===e[t+5]&&"P"===e[t+6]&&"E"===e[t+7]){let n=1;for(t+=8;t<e.length;t++)if("<"===e[t])n++;else if(">"===e[t]&&(n--,0===n))break}else if(e.length>t+9&&"["===e[t+1]&&"C"===e[t+2]&&"D"===e[t+3]&&"A"===e[t+4]&&"T"===e[t+5]&&"A"===e[t+6]&&"["===e[t+7])for(t+=8;t<e.length;t++)if("]"===e[t]&&"]"===e[t+1]&&">"===e[t+2]){t+=2;break}return t}t.validate=function(e,t){t=Object.assign({},s,t);const n=[];let l=!1,u=!1;"\ufeff"===e[0]&&(e=e.substr(1));for(let s=0;s<e.length;s++)if("<"===e[s]&&"?"===e[s+1]){if(s+=2,s=o(e,s),s.err)return s}else{if("<"!==e[s]){if(i(e[s]))continue;return d("InvalidChar","char '"+e[s]+"' is not expected.",b(e,s))}{let f=s;if(s++,"!"===e[s]){s=a(e,s);continue}{let g=!1;"/"===e[s]&&(g=!0,s++);let y="";for(;s<e.length&&">"!==e[s]&&" "!==e[s]&&"\t"!==e[s]&&"\n"!==e[s]&&"\r"!==e[s];s++)y+=e[s];if(y=y.trim(),"/"===y[y.length-1]&&(y=y.substring(0,y.length-1),s--),p=y,!r.isName(p)){let t;return t=0===y.trim().length?"Invalid space after '<'.":"Tag '"+y+"' is an invalid name.",d("InvalidTag",t,b(e,s))}const x=c(e,s);if(!1===x)return d("InvalidAttr","Attributes for '"+y+"' have open quote.",b(e,s));let v=x.value;if(s=x.index,"/"===v[v.length-1]){const n=s-v.length;v=v.substring(0,v.length-1);const r=h(v,t);if(!0!==r)return d(r.err.code,r.err.msg,b(e,n+r.err.line));l=!0}else if(g){if(!x.tagClosed)return d("InvalidTag","Closing tag '"+y+"' doesn't have proper closing.",b(e,s));if(v.trim().length>0)return d("InvalidTag","Closing tag '"+y+"' can't have attributes or invalid starting.",b(e,f));{const t=n.pop();if(y!==t.tagName){let n=b(e,t.tagStartPos);return d("InvalidTag","Expected closing tag '"+t.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+y+"'.",b(e,f))}0==n.length&&(u=!0)}}else{const r=h(v,t);if(!0!==r)return d(r.err.code,r.err.msg,b(e,s-v.length+r.err.line));if(!0===u)return d("InvalidXml","Multiple possible root nodes found.",b(e,s));-1!==t.unpairedTags.indexOf(y)||n.push({tagName:y,tagStartPos:f}),l=!0}for(s++;s<e.length;s++)if("<"===e[s]){if("!"===e[s+1]){s++,s=a(e,s);continue}if("?"!==e[s+1])break;if(s=o(e,++s),s.err)return s}else if("&"===e[s]){const t=m(e,s);if(-1==t)return d("InvalidChar","char '&' is not expected.",b(e,s));s=t}else if(!0===u&&!i(e[s]))return d("InvalidXml","Extra text at the end",b(e,s));"<"===e[s]&&s--}}}var p;return l?1==n.length?d("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",b(e,n[0].tagStartPos)):!(n.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(n.map((e=>e.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):d("InvalidXml","Start tag expected.",1)};const l='"',u="'";function c(e,t){let n="",r="",s=!1;for(;t<e.length;t++){if(e[t]===l||e[t]===u)""===r?r=e[t]:r!==e[t]||(r="");else if(">"===e[t]&&""===r){s=!0;break}n+=e[t]}return""===r&&{value:n,index:t,tagClosed:s}}const p=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function h(e,t){const n=r.getAllMatches(e,p),s={};for(let e=0;e<n.length;e++){if(0===n[e][1].length)return d("InvalidAttr","Attribute '"+n[e][2]+"' has no space in starting.",g(n[e]));if(void 0!==n[e][3]&&void 0===n[e][4])return d("InvalidAttr","Attribute '"+n[e][2]+"' is without value.",g(n[e]));if(void 0===n[e][3]&&!t.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+n[e][2]+"' is not allowed.",g(n[e]));const r=n[e][2];if(!f(r))return d("InvalidAttr","Attribute '"+r+"' is an invalid name.",g(n[e]));if(s.hasOwnProperty(r))return d("InvalidAttr","Attribute '"+r+"' is repeated.",g(n[e]));s[r]=1}return!0}function m(e,t){if(";"===e[++t])return-1;if("#"===e[t])return function(e,t){let n=/\d/;for("x"===e[t]&&(t++,n=/[\da-fA-F]/);t<e.length;t++){if(";"===e[t])return t;if(!e[t].match(n))break}return-1}(e,++t);let n=0;for(;t<e.length;t++,n++)if(!(e[t].match(/\w/)&&n<20)){if(";"===e[t])break;return-1}return t}function d(e,t,n){return{err:{code:e,msg:t,line:n.line||n,col:n.col}}}function f(e){return r.isName(e)}function b(e,t){const n=e.substring(0,t).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function g(e){return e.startIndex+e[1].length}},192:(e,t,n)=>{"use strict";const r=n(592),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[]};function i(e){this.options=Object.assign({},s,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=d),this.processTextOrObjNode=a,this.options.format?(this.indentate=m,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=h,this.buildObjNode=u):(this.buildTextNode=c,this.buildObjNode=l),this.buildTextValNode=c,this.buildObjectNode=l,this.replaceEntitiesValue=p,this.buildAttrPairStr=o}function o(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&"true"===t?" "+e:" "+e+'="'+t+'"'}function a(e,t,n){const r=this.j2x(e,n+1);return void 0!==e[this.options.textNodeName]&&1===Object.keys(e).length?this.buildTextNode(e[this.options.textNodeName],t,r.attrStr,n):this.buildObjNode(r.val,t,r.attrStr,n)}function l(e,t,n,r){let s="</"+t+this.tagEndChar,i="";return"?"===t[0]&&(i="?",s=""),n&&-1===e.indexOf("<")?this.indentate(r)+"<"+t+n+i+">"+e+s:!1!==this.options.commentPropName&&t===this.options.commentPropName&&0===i.length?this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine:this.indentate(r)+"<"+t+n+i+this.tagEndChar+e+this.indentate(r)+s}function u(e,t,n,r){return""!==e?this.buildObjectNode(e,t,n,r):"?"===t[0]?this.indentate(r)+"<"+t+n+"?"+this.tagEndChar:this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function c(e,t,n,r){if(!1!==this.options.cdataPropName&&t===this.options.cdataPropName)return this.indentate(r)+`<![CDATA[${e}]]>`+this.newLine;if(!1!==this.options.commentPropName&&t===this.options.commentPropName)return this.indentate(r)+`\x3c!--${e}--\x3e`+this.newLine;{let s=this.options.tagValueProcessor(t,e);return s=this.replaceEntitiesValue(s),""===s&&-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode?this.indentate(r)+"<"+t+this.tagEndChar:this.indentate(r)+"<"+t+"/"+this.tagEndChar:this.indentate(r)+"<"+t+n+">"+s+"</"+t+this.tagEndChar}}function p(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const n=this.options.entities[t];e=e.replace(n.regex,n.val)}return e}function h(e,t,n,r){return""===e&&-1!==this.options.unpairedTags.indexOf(t)?this.options.suppressUnpairedNode?this.indentate(r)+"<"+t+this.tagEndChar:this.indentate(r)+"<"+t+"/"+this.tagEndChar:""!==e?this.buildTextValNode(e,t,n,r):"?"===t[0]?this.indentate(r)+"<"+t+n+"?"+this.tagEndChar:this.indentate(r)+"<"+t+n+"/"+this.tagEndChar}function m(e){return this.options.indentBy.repeat(e)}function d(e){return!!e.startsWith(this.options.attributeNamePrefix)&&e.substr(this.attrPrefixLen)}i.prototype.build=function(e){return this.options.preserveOrder?r(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)},i.prototype.j2x=function(e,t){let n="",r="";for(let s in e)if(void 0===e[s]);else if(null===e[s])"?"===s[0]?r+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)r+=this.buildTextNode(e[s],s,"",t);else if("object"!=typeof e[s]){const i=this.isAttribute(s);if(i)n+=this.buildAttrPairStr(i,""+e[s]);else if(s===this.options.textNodeName){let t=this.options.tagValueProcessor(s,""+e[s]);r+=this.replaceEntitiesValue(t)}else r+=this.buildTextNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const n=e[s].length;for(let i=0;i<n;i++){const n=e[s][i];void 0===n||(null===n?"?"===s[0]?r+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:r+=this.indentate(t)+"<"+s+"/"+this.tagEndChar:r+="object"==typeof n?this.processTextOrObjNode(n,s,t):this.buildTextNode(n,s,"",t))}}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const t=Object.keys(e[s]),r=t.length;for(let i=0;i<r;i++)n+=this.buildAttrPairStr(t[i],""+e[s][t[i]])}else r+=this.processTextOrObjNode(e[s],s,t);return{attrStr:n,val:r}},e.exports=i},592:e=>{function t(e,o,a,l){let u="",c="";o.format&&o.indentBy.length>0&&(c="\n"+o.indentBy.repeat(l));for(let p=0;p<e.length;p++){const h=e[p],m=n(h);let d="";if(d=0===a.length?m:`${a}.${m}`,m===o.textNodeName){let e=h[m];s(d,o)||(e=o.tagValueProcessor(m,e),e=i(e,o)),u+=c+e;continue}if(m===o.cdataPropName){u+=c+`<![CDATA[${h[m][0][o.textNodeName]}]]>`;continue}if(m===o.commentPropName){u+=c+`\x3c!--${h[m][0][o.textNodeName]}--\x3e`;continue}if("?"===m[0]){const e=r(h[":@"],o),t="?xml"===m?"":c;let n=h[m][0][o.textNodeName];n=0!==n.length?" "+n:"",u+=t+`<${m}${n}${e}?>`;continue}let f=c+`<${m}${r(h[":@"],o)}`,b=t(h[m],o,d,l+1);-1!==o.unpairedTags.indexOf(m)?o.suppressUnpairedNode?u+=f+">":u+=f+"/>":b&&0!==b.length||!o.suppressEmptyNode?u+=f+`>${b}${c}</${m}>`:u+=f+"/>"}return u}function n(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function r(e,t){let n="";if(e&&!t.ignoreAttributes)for(let r in e){let s=t.attributeValueProcessor(r,e[r]);s=i(s,t),!0===s&&t.suppressBooleanAttributes?n+=` ${r.substr(t.attributeNamePrefix.length)}`:n+=` ${r.substr(t.attributeNamePrefix.length)}="${s}"`}return n}function s(e,t){let n=(e=e.substr(0,e.length-t.textNodeName.length-1)).substr(e.lastIndexOf(".")+1);for(let r in t.stopNodes)if(t.stopNodes[r]===e||t.stopNodes[r]==="*."+n)return!0;return!1}function i(e,t){if(e&&e.length>0&&t.processEntities)for(let n=0;n<t.entities.length;n++){const r=t.entities[n];e=e.replace(r.regex,r.val)}return e}e.exports=function(e,n){return t(e,n,"",0)}},780:e=>{const t=RegExp("^\\s([a-zA-z0-0]+)[ \t](['\"])([^&]+)\\2");function n(e,n){const r=t.exec(e);r&&(n[r[1]]={regx:RegExp(`&${r[1]};`,"g"),val:r[3]})}e.exports=function(e,t){const r={};if("O"!==e[t+3]||"C"!==e[t+4]||"T"!==e[t+5]||"Y"!==e[t+6]||"P"!==e[t+7]||"E"!==e[t+8])throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let s=1,i=!1,o=!1,a=!1,l="";for(;t<e.length;t++)if("<"===e[t]){if(i&&"!"===e[t+1]&&"E"===e[t+2]&&"N"===e[t+3]&&"T"===e[t+4]&&"I"===e[t+5]&&"T"===e[t+6]&&"Y"===e[t+7])t+=7,o=!0;else if(i&&"!"===e[t+1]&&"E"===e[t+2]&&"L"===e[t+3]&&"E"===e[t+4]&&"M"===e[t+5]&&"E"===e[t+6]&&"N"===e[t+7]&&"T"===e[t+8])t+=8;else{if("!"!==e[t+1]||"-"!==e[t+2]||"-"!==e[t+3])throw new Error("Invalid DOCTYPE");a=!0}s++,l=""}else if(">"===e[t]){if(a){if("-"!==e[t-1]||"-"!==e[t-2])throw new Error("Invalid XML comment in DOCTYPE");a=!1}else o&&(n(l,r),o=!1);if(s--,0===s)break}else"["===e[t]?i=!0:l+=e[t];if(0!==s)throw new Error("Unclosed DOCTYPE")}return{entities:r,i:t}}},745:(e,t)=>{const n={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1};t.buildOptions=function(e){return Object.assign({},n,e)},t.defaultOptions=n},78:(e,t,n)=>{"use strict";const r=n(849),s=n(311),i=n(780),o=n(153);function a(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const r=t[n];this.lastEntities[r]={regex:new RegExp("&"+r+";","g"),val:e[r]}}}function l(e,t,n,r,s,i,o){if(void 0!==e&&(this.options.trimValues&&!r&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const r=this.options.tagValueProcessor(t,e,n,s,i);return null==r?e:typeof r!=typeof e||r!==e?r:this.options.trimValues||e.trim()===e?x(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function u(e){if(this.options.removeNSPrefix){const t=e.split(":"),n="/"===e.charAt(0)?"/":"";if("xmlns"===t[0])return"";2===t.length&&(e=n+t[1])}return e}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,r.nameRegexp);const c=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function p(e,t){if(!this.options.ignoreAttributes&&"string"==typeof e){const n=r.getAllMatches(e,c),s=n.length,i={};for(let e=0;e<s;e++){const r=this.resolveNameSpace(n[e][1]);let s=n[e][4];const o=this.options.attributeNamePrefix+r;if(r.length)if(void 0!==s){this.options.trimValues&&(s=s.trim()),s=this.replaceEntitiesValue(s);const e=this.options.attributeValueProcessor(r,s,t);i[o]=null==e?s:typeof e!=typeof s||e!==s?e:x(s,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[o]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const e={};return e[this.options.attributesGroupName]=i,e}return i}}const h=function(e){e=e.replace(/\r\n?/g,"\n");const t=new s("!xml");let n=t,r="",o="";for(let a=0;a<e.length;a++)if("<"===e[a])if("/"===e[a+1]){const t=b(e,">",a,"Closing Tag is not closed.");let s=e.substring(a+2,t).trim();if(this.options.removeNSPrefix){const e=s.indexOf(":");-1!==e&&(s=s.substr(e+1))}n&&(r=this.saveTextToParentTag(r,n,o)),o=o.substr(0,o.lastIndexOf(".")),n=this.tagsNodeStack.pop(),r="",a=t}else if("?"===e[a+1]){let t=g(e,a,!1,"?>");if(!t)throw new Error("Pi Tag is not closed.");if(r=this.saveTextToParentTag(r,n,o),this.options.ignoreDeclaration&&"?xml"===t.tagName||this.options.ignorePiTags);else{const e=new s(t.tagName);e.add(this.options.textNodeName,""),t.tagName!==t.tagExp&&t.attrExpPresent&&(e[":@"]=this.buildAttributesMap(t.tagExp,o)),n.addChild(e)}a=t.closeIndex+1}else if("!--"===e.substr(a+1,3)){const t=b(e,"--\x3e",a+4,"Comment is not closed.");if(this.options.commentPropName){const s=e.substring(a+4,t-2);r=this.saveTextToParentTag(r,n,o),n.add(this.options.commentPropName,[{[this.options.textNodeName]:s}])}a=t}else if("!D"===e.substr(a+1,2)){const t=i(e,a);this.docTypeEntities=t.entities,a=t.i}else if("!["===e.substr(a+1,2)){const t=b(e,"]]>",a,"CDATA is not closed.")-2,s=e.substring(a+9,t);if(r=this.saveTextToParentTag(r,n,o),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:s}]);else{let e=this.parseTextData(s,n.tagname,o,!0,!1,!0);e||(e=""),n.add(this.options.textNodeName,e)}a=t+2}else{let i=g(e,a,this.options.removeNSPrefix),l=i.tagName,u=i.tagExp,c=i.attrExpPresent,p=i.closeIndex;n&&r&&"!xml"!==n.tagname&&(r=this.saveTextToParentTag(r,n,o,!1)),l!==t.tagname&&(o+=o?"."+l:l);const h=n;if(h&&-1!==this.options.unpairedTags.indexOf(h.tagname)&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,o,l)){let t="";if(u.length>0&&u.lastIndexOf("/")===u.length-1)a=i.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))a=i.closeIndex;else{const n=this.readStopNodeData(e,l,p+1);if(!n)throw new Error(`Unexpected end of ${l}`);a=n.i,t=n.tagContent}const r=new s(l);l!==u&&c&&(r[":@"]=this.buildAttributesMap(u,o)),t&&(t=this.parseTextData(t,l,o,!0,c,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),r.add(this.options.textNodeName,t),n.addChild(r)}else{if(u.length>0&&u.lastIndexOf("/")===u.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),u=l):u=u.substr(0,u.length-1);const e=new s(l);l!==u&&c&&(e[":@"]=this.buildAttributesMap(u,o)),o=o.substr(0,o.lastIndexOf(".")),n.addChild(e)}else{const e=new s(l);this.tagsNodeStack.push(n),l!==u&&c&&(e[":@"]=this.buildAttributesMap(u,o)),n.addChild(e),n=e}r="",a=p}}else r+=e[a];return t.child},m=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const n=this.docTypeEntities[t];e=e.replace(n.regx,n.val)}for(let t in this.lastEntities){const n=this.lastEntities[t];e=e.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const n=this.htmlEntities[t];e=e.replace(n.regex,n.val)}}return e};function d(e,t,n,r){return e&&(void 0===r&&(r=0===Object.keys(t.child).length),void 0!==(e=this.parseTextData(e,t.tagname,n,!1,!!t[":@"]&&0!==Object.keys(t[":@"]).length,r))&&""!==e&&t.add(this.options.textNodeName,e),e=""),e}function f(e,t,n){const r="*."+n;for(const n in e){const s=e[n];if(r===s||t===s)return!0}return!1}function b(e,t,n,r){const s=e.indexOf(t,n);if(-1===s)throw new Error(r);return s+t.length-1}function g(e,t,n,r=">"){const s=function(e,t,n=">"){let r,s="";for(let i=t;i<e.length;i++){let t=e[i];if(r)t===r&&(r="");else if('"'===t||"'"===t)r=t;else if(t===n[0]){if(!n[1])return{data:s,index:i};if(e[i+1]===n[1])return{data:s,index:i}}else"\t"===t&&(t=" ");s+=t}}(e,t+1,r);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let l=i,u=!0;if(-1!==a&&(l=i.substr(0,a).replace(/\s\s*$/,""),i=i.substr(a+1)),n){const e=l.indexOf(":");-1!==e&&(l=l.substr(e+1),u=l!==s.data.substr(e+1))}return{tagName:l,tagExp:i,closeIndex:o,attrExpPresent:u}}function y(e,t,n){const r=n;for(;n<e.length;n++)if("<"===e[n]&&"/"===e[n+1]){const s=b(e,">",n,`${t} is not closed`);if(e.substring(n+2,s).trim()===t)return{tagContent:e.substring(r,n),i:s};n=s}}function x(e,t,n){if(t&&"string"==typeof e){const t=e.trim();return"true"===t||"false"!==t&&o(e,n)}return r.isExist(e)?e:""}e.exports=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=a,this.parseXml=h,this.parseTextData=l,this.resolveNameSpace=u,this.buildAttributesMap=p,this.isItStopNode=f,this.replaceEntitiesValue=m,this.readStopNodeData=y,this.saveTextToParentTag=d}}},844:(e,t,n)=>{const{buildOptions:r}=n(745),s=n(78),{prettify:i}=n(997),o=n(501);e.exports=class{constructor(e){this.externalEntities={},this.options=r(e)}parse(e,t){if("string"==typeof e);else{if(!e.toString)throw new Error("XML data is accepted in String or Bytes[] form.");e=e.toString()}if(t){!0===t&&(t={});const n=o.validate(e,t);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new s(this.options);n.addExternalEntities(this.externalEntities);const r=n.parseXml(e);return this.options.preserveOrder||void 0===r?r:i(r,this.options)}addEntity(e,t){if(-1!==t.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==e.indexOf("&")||-1!==e.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[e]=t}}},997:(e,t)=>{"use strict";function n(e,t,o){let a;const l={};for(let u=0;u<e.length;u++){const c=e[u],p=r(c);let h="";if(h=void 0===o?p:o+"."+p,p===t.textNodeName)void 0===a?a=c[p]:a+=""+c[p];else{if(void 0===p)continue;if(c[p]){let e=n(c[p],t,h);const r=i(e,t);c[":@"]?s(e,c[":@"],h,t):1!==Object.keys(e).length||void 0===e[t.textNodeName]||t.alwaysCreateTextNode?0===Object.keys(e).length&&(t.alwaysCreateTextNode?e[t.textNodeName]="":e=""):e=e[t.textNodeName],void 0!==l[p]?(Array.isArray(l[p])||(l[p]=[l[p]]),l[p].push(e)):t.isArray(p,h,r)?l[p]=[e]:l[p]=e}}}return"string"==typeof a?a.length>0&&(l[t.textNodeName]=a):void 0!==a&&(l[t.textNodeName]=a),l}function r(e){const t=Object.keys(e);for(let e=0;e<t.length;e++){const n=t[e];if(":@"!==n)return n}}function s(e,t,n,r){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const i=s[o];r.isArray(i,n+"."+i,!0,!0)?e[i]=[t[i]]:e[i]=t[i]}}}function i(e,t){const n=Object.keys(e).length;return!!(0===n||1===n&&e[t.textNodeName])}t.prettify=function(e,t){return n(e,t)}},311:e=>{"use strict";e.exports=class{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){this.child.push({[e]:t})}addChild(e){e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child})}}},271:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n="boolean"==typeof(new RegExp).sticky;function r(e){return e&&"[object RegExp]"===t.call(e)}function s(e){return e&&"object"==typeof e&&!r(e)&&!Array.isArray(e)}function i(e){return"("+e+")"}function o(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function a(e){if("string"==typeof e)return"(?:"+(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")");if(r(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function l(t,n){if(s(n)||(n={match:n}),n.include)throw new Error("Matching rules cannot also include states");var i={defaultType:t,lineBreaks:!!n.error||!!n.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var o in n)e.call(n,o)&&(i[o]=n[o]);if("string"==typeof i.type&&t!==i.type)throw new Error("Type transform cannot be a string (type '"+i.type+"' for token '"+t+"')");var a=i.match;return i.match=Array.isArray(a)?a:a?[a]:[],i.match.sort((function(e,t){return r(e)&&r(t)?0:r(t)?-1:r(e)?1:t.length-e.length})),i}function u(e){return Array.isArray(e)?function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];if(r.include)for(var s=[].concat(r.include),i=0;i<s.length;i++)t.push({include:s[i]});else{if(!r.type)throw new Error("Rule has no type: "+JSON.stringify(r));t.push(l(r.type,r))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),n=[],r=0;r<t.length;r++){var i=t[r],o=e[i],a=[].concat(o);if("include"!==i){var u=[];a.forEach((function(e){s(e)?(u.length&&n.push(l(i,u)),n.push(l(i,e)),u=[]):u.push(e)})),u.length&&n.push(l(i,u))}else for(var c=0;c<a.length;c++)n.push({include:a[c]})}return n}(e)}var c=l("error",{lineBreaks:!0,shouldThrow:!0});function p(e,t){for(var s=null,l=Object.create(null),u=!0,p=null,h=[],m=[],d=0;d<e.length;d++)e[d].fallback&&(u=!1);for(d=0;d<e.length;d++){var f=e[d];if(f.include)throw new Error("Inheritance is not allowed in stateless lexers");if(f.error||f.fallback){if(s)throw!f.fallback==!s.fallback?new Error("Multiple "+(f.fallback?"fallback":"error")+" rules not allowed (for token '"+f.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+f.defaultType+"')");s=f}var b=f.match.slice();if(u)for(;b.length&&"string"==typeof b[0]&&1===b[0].length;)l[b.shift().charCodeAt(0)]=f;if(f.pop||f.push||f.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+f.defaultType+"')");if(f.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+f.defaultType+"')")}if(0!==b.length){u=!1,h.push(f);for(var g=0;g<b.length;g++){var y=b[g];if(r(y))if(null===p)p=y.unicode;else if(p!==y.unicode&&!1===f.fallback)throw new Error("If one rule is /u then all must be")}var x=o(b.map(a)),v=new RegExp(x);if(v.test(""))throw new Error("RegExp matches empty string: "+v);if(new RegExp("|"+x).exec("").length-1>0)throw new Error("RegExp has capture groups: "+v+"\nUse (?:  ) instead");if(!f.lineBreaks&&v.test("\n"))throw new Error("Rule should declare lineBreaks: "+v);m.push(i(x))}}var N=s&&s.fallback,E=n&&!N?"ym":"gm",w=n||N?"":"|";return!0===p&&(E+="u"),{regexp:new RegExp(o(m)+w,E),groups:h,fast:l,error:s||c}}function h(e,t,n){var r=e&&(e.push||e.next);if(r&&!n[r])throw new Error("Missing state '"+r+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var m=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};m.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},m.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},m.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},m.prototype.popState=function(){this.setState(this.stack.pop())},m.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var d=n?function(e,t){return e.exec(t)}:function(e,t){var n=e.exec(t);return 0===n[0].length?null:n};function f(){return this.value}if(m.prototype._getGroup=function(e){for(var t=this.groups.length,n=0;n<t;n++)if(void 0!==e[n+1])return this.groups[n];throw new Error("Cannot find token type for matched text")},m.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var n=this.buffer;if(e!==n.length){if(o=this.fast[n.charCodeAt(e)])return this._token(o,n.charAt(e),e);var r=this.re;r.lastIndex=e;var s=d(r,n),i=this.error;if(null==s)return this._token(i,n.slice(e,n.length),e);var o=this._getGroup(s),a=s[0];return i.fallback&&s.index!==e?(this.queuedGroup=o,this.queuedText=a,this._token(i,n.slice(e,s.index),e)):this._token(o,a,e)}},m.prototype._token=function(e,t,n){var r=0;if(e.lineBreaks){var s=/\n/g,i=1;if("\n"===t)r=1;else for(;s.exec(t);)r++,i=s.lastIndex}var o={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:f,offset:n,lineBreaks:r,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=r,0!==r?this.col=a-i+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(o,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),o},"undefined"!=typeof Symbol&&Symbol.iterator){var b=function(e){this.lexer=e};b.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},b.prototype[Symbol.iterator]=function(){return this},m.prototype[Symbol.iterator]=function(){return new b(this)}}return m.prototype.formatError=function(e,t){if(null==e){var n=this.buffer.slice(this.index);e={text:n,offset:this.index,lineBreaks:-1===n.indexOf("\n")?0:1,line:this.line,col:this.col}}var r=Math.max(0,e.offset-e.col+1),s=e.lineBreaks?e.text.indexOf("\n"):e.text.length,i=this.buffer.substring(r,e.offset+s);return t+=" at line "+e.line+" col "+e.col+":\n\n",(t+="  "+i+"\n")+"  "+Array(e.col).join(" ")+"^"},m.prototype.clone=function(){return new m(this.states,this.state)},m.prototype.has=function(e){return!0},{compile:function(e){var t=p(u(e));return new m({start:t},"start")},states:function(e,t){var n=e.$all?u(e.$all):[];delete e.$all;var r=Object.getOwnPropertyNames(e);t||(t=r[0]);for(var s=Object.create(null),i=0;i<r.length;i++)s[x=r[i]]=u(e[x]).concat(n);for(i=0;i<r.length;i++)for(var o=s[x=r[i]],a=Object.create(null),l=0;l<o.length;l++){var c=o[l];if(c.include){var d=[l,1];if(c.include!==x&&!a[c.include]){a[c.include]=!0;var f=s[c.include];if(!f)throw new Error("Cannot include nonexistent state '"+c.include+"' (in state '"+x+"')");for(var b=0;b<f.length;b++){var g=f[b];-1===o.indexOf(g)&&d.push(g)}}o.splice.apply(o,d),l--}}var y=Object.create(null);for(i=0;i<r.length;i++){var x;y[x=r[i]]=p(s[x],!0)}for(i=0;i<r.length;i++){var v=r[i],N=y[v],E=N.groups;for(l=0;l<E.length;l++)h(E[l],v,y);var w=Object.getOwnPropertyNames(N.fast);for(l=0;l<w.length;l++)h(N.fast[w[l]],v,y)}return new m(y,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t=Object.create(null),n=Object.create(null),r=Object.getOwnPropertyNames(e),s=0;s<r.length;s++){var i=r[s],o=e[i];(Array.isArray(o)?o:[o]).forEach((function(e){if((n[e.length]=n[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+i+"')");t[e]=i}))}function a(e){return JSON.stringify(e)}var l="";for(var u in l+="switch (value.length) {\n",n){var c=n[u];l+="case "+u+":\n",l+="switch (value) {\n",c.forEach((function(e){var n=t[e];l+="case "+a(e)+": return "+a(n)+"\n"})),l+="}\n"}return l+="}\n",Function("value",l)}}})?n.apply(t,[]):n)||(e.exports=r)},654:function(e){var t;t=function(){function e(t,n,r){return this.id=++e.highestId,this.name=t,this.symbols=n,this.postprocess=r,this}function t(e,t,n,r){this.rule=e,this.dot=t,this.reference=n,this.data=[],this.wantedBy=r,this.isComplete=this.dot===e.symbols.length}function n(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function r(e,t){this.rules=e,this.start=t||this.rules[0].name;var n=this.byName={};this.rules.forEach((function(e){n.hasOwnProperty(e.name)||(n[e.name]=[]),n[e.name].push(e)}))}function s(){this.reset("")}function i(e,t,i){if(e instanceof r){var o=e;i=t}else o=r.fromCompiled(e,t);for(var a in this.grammar=o,this.options={keepHistory:!1,lexer:o.lexer||new s},i||{})this.options[a]=i[a];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new n(o,0);this.table=[l],l.wants[o.start]=[],l.predict(o.start),l.process(),this.current=0}function o(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=void 0===e?this.symbols.map(o).join(" "):this.symbols.slice(0,e).map(o).join(" ")+"  "+this.symbols.slice(e).map(o).join(" ");return this.name+"  "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var n=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return n.left=this,n.right=e,n.isComplete&&(n.data=n.build(),n.right=void 0),n},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,i.fail))},n.prototype.process=function(e){for(var t=this.states,n=this.wants,r=this.completed,s=0;s<t.length;s++){var o=t[s];if(o.isComplete){if(o.finish(),o.data!==i.fail){for(var a=o.wantedBy,l=a.length;l--;){var u=a[l];this.complete(u,o)}if(o.reference===this.index){var c=o.rule.name;(this.completed[c]=this.completed[c]||[]).push(o)}}}else{if("string"!=typeof(c=o.rule.symbols[o.dot])){this.scannable.push(o);continue}if(n[c]){if(n[c].push(o),r.hasOwnProperty(c)){var p=r[c];for(l=0;l<p.length;l++){var h=p[l];this.complete(o,h)}}}else n[c]=[o],this.predict(c)}}},n.prototype.predict=function(e){for(var n=this.grammar.byName[e]||[],r=0;r<n.length;r++){var s=n[r],i=this.wants[e],o=new t(s,0,this.index,i);this.states.push(o)}},n.prototype.complete=function(e,t){var n=e.nextState(t);this.states.push(n)},r.fromCompiled=function(t,n){var s=t.Lexer;t.ParserStart&&(n=t.ParserStart,t=t.ParserRules);var i=new r(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),n);return i.lexer=s,i},s.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},s.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},s.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},s.prototype.formatError=function(e,t){var n=this.buffer;if("string"==typeof n){var r=n.split("\n").slice(Math.max(0,this.line-5),this.line),s=n.indexOf("\n",this.index);-1===s&&(s=n.length);var i=this.index-this.lastLineBreak,o=String(this.line).length;return t+=" at line "+this.line+" col "+i+":\n\n",(t+=r.map((function(e,t){return a(this.line-r.length+t+1,o)+" "+e}),this).join("\n"))+"\n"+a("",o+i)+"^\n"}return t+" at index "+(this.index-1);function a(e,t){var n=String(e);return Array(t-n.length+1).join(" ")+n}},i.fail={},i.prototype.feed=function(e){var t,r=this.lexer;for(r.reset(e,this.lexerState);;){try{if(!(t=r.next()))break}catch(e){var i=new n(this.grammar,this.current+1);throw this.table.push(i),(l=new Error(this.reportLexerError(e))).offset=this.current,l.token=e.token,l}var o=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var a=this.current+1;i=new n(this.grammar,a),this.table.push(i);for(var l,u=void 0!==t.text?t.text:t.value,c=r.constructor===s?t.value:t,p=o.scannable,h=p.length;h--;){var m=p[h],d=m.rule.symbols[m.dot];if(d.test?d.test(c):d.type?d.type===t.type:d.literal===u){var f=m.nextState({data:c,token:t,isToken:!0,reference:a-1});i.states.push(f)}}if(i.process(),0===i.states.length)throw(l=new Error(this.reportError(t))).offset=this.current,l.token=t,l;this.options.keepHistory&&(o.lexerState=r.save()),this.current++}return o&&(this.lexerState=r.save()),this.results=this.finish(),this},i.prototype.reportLexerError=function(e){var t,n,r=e.token;return r?(t="input "+JSON.stringify(r.text[0])+" (lexer error)",n=this.lexer.formatError(r,"Syntax error")):(t="input (lexer error)",n=e.message),this.reportErrorCommon(n,t)},i.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),n=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(n,t)},i.prototype.reportErrorCommon=function(e,t){var n=[];n.push(e);var r=this.table.length-2,s=this.table[r],i=s.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t}));return 0===i.length?(n.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(s.states,n)):(n.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),i.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],r=t.rule.symbols[t.dot],s=this.getSymbolDisplay(r);n.push("A "+s+" based on:"),this.displayStateStack(e,n)}),this)),n.push(""),n.join("\n")},i.prototype.displayStateStack=function(e,t){for(var n,r=0,s=0;s<e.length;s++){var i=e[s],o=i.rule.toString(i.dot);o===n?r++:(r>0&&t.push("    ^ "+r+" more lines identical to this"),r=0,t.push("    "+o)),n=o}},i.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},i.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var n=e.wantedBy[0],r=[e].concat(t),s=this.buildFirstStateStack(n,r);return null===s?null:[e].concat(s)},i.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},i.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},i.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},i.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(n){n.rule.name===t&&n.dot===n.rule.symbols.length&&0===n.reference&&n.data!==i.fail&&e.push(n)})),e.map((function(e){return e.data}))},{Parser:i,Grammar:r,Rule:e}},e.exports?e.exports=t():this.nearley=t()},153:e=>{const t=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(e,s={}){if(s=Object.assign({},r,s),!e||"string"!=typeof e)return e;let i=e.trim();if(void 0!==s.skipLike&&s.skipLike.test(i))return e;if(s.hex&&t.test(i))return Number.parseInt(i,16);{const t=n.exec(i);if(t){const n=t[1],r=t[2];let a=(o=t[3])&&-1!==o.indexOf(".")?("."===(o=o.replace(/0+$/,""))?o="0":"."===o[0]?o="0"+o:"."===o[o.length-1]&&(o=o.substr(0,o.length-1)),o):o;const l=t[4]||t[6];if(!s.leadingZeros&&r.length>0&&n&&"."!==i[2])return e;if(!s.leadingZeros&&r.length>0&&!n&&"."!==i[1])return e;{const t=Number(i),o=""+t;return-1!==o.search(/[eE]/)||l?s.eNotation?t:e:-1!==i.indexOf(".")?"0"===o&&""===a||o===a||n&&o==="-"+a?t:e:r?a===o||n+a===o?t:e:i===o||i===n+o?t:e}}return e}var o}}},t={},n=function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}(156);IMICROS_DMN_Converter=n})();