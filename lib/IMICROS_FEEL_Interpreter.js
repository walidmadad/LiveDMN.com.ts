/*! For license information please see IMICROS_FEEL_Interpreter.js.LICENSE.txt */
var IMICROS_FEEL_Interpreter;(()=>{var e={603:e=>{"use strict";e.exports=class{static get NUMBER(){return"NUMBER"}static get NAME(){return"NAME"}static get STRING(){return"STRING"}static get NULL(){return"NULL"}static get BOOLEAN(){return"BOOLEAN"}static get DASH(){return"DASH"}static get EVAL(){return"EVAL"}static get NEGATION(){return"NEGATION"}static get SUM(){return"SUM"}static get PRODUCT(){return"PRODUCT"}static get EXPONENTATION(){return"EXPONENTATION"}static get LOGICAL(){return"LOGICAL"}static get COMPARISON(){return"COMPARISON"}static get NOT(){return"NOT"}static get IN(){return"IN"}static get IN_INTERVAL(){return"IN_INTERVAL"}static get IN_LIST(){return"IN_LIST"}static get BETWEEN(){return"BETWEEN"}static get INSTANCE_OF(){return"INSTANCE_OF"}static get LIST(){return"LIST"}static get INTERVAL(){return"INTERVAL"}static get PATH(){return"PATH"}static get FILTER(){return"FILTER"}static get UNARY(){return"UNARY"}static get UNARYTESTS(){return"UNARYTESTS"}static get LIST_OF(){return"LIST_OF"}static get CONTEXT(){return"CONTEXT"}static get CONTEXT_ENTRY(){return"CONTEXT_ENTRY"}static get NAMED_PARAMETER(){return"NAMED_PARAMETER"}static get CONTEXT_TYPE(){return"CONTEXT_TYPE"}static get CONTEXT_ELEMENT(){return"CONTEXT_ELEMENT"}static get FORMAL_PARAMETER(){return"FORMAL_PARAMETER"}static get BOXED(){return"BOXED"}static get FOR(){return"FOR"}static get IF(){return"IF"}static get QUANTIFIED(){return"QUANTIFIED"}static get FUNCTION_CALL(){return"FUNCTION_CALL"}static get FUNCTION_DEFINITION(){return"FUNCTION_DEFINITION"}static get DATE_AND_TIME(){return"DATE_AND_TIME"}static get AT_LITERAL(){return"AT_LITERAL"}constructor(e){Object.assign(this,e)}}},231:e=>{"use strict";class t{constructor(e){Object.assign(this,e)}static parse(e){let t=e.match(/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/);return t&&t.length>=6?new r({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3]),hour:parseInt(t[4]),minute:parseInt(t[5]),second:parseInt(t[6])}):(t=e.match(/(\d{4})-(\d{2})-(\d{2})/),t&&t.length>=4?new s({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])}):(t=e.match(/(P(?:\d+[D|M|Y])*(?:T(?:\d+[H|M|S])*)?)/),t?new i({years:parseInt(e.match(/P(?:(?:\d+[D|M])*)(\d+)Y/)?.[1]??0),months:parseInt(e.match(/P(?:(?:\d+[D|Y])*)(\d+)M/)?.[1]??0),days:parseInt(e.match(/P(?:(?:\d+[M|Y])*)(\d+)D/)?.[1]??0),hours:parseInt(e.match(/P(?:\d+[D|M|Y])*T(?:\d+[M|S])*(\d+)H/i)?.[1]??0),minutes:parseInt(e.match(/P(?:\d+[D|M|Y])*T(?:\d+[H|S])*(\d+)M/i)?.[1]??0),seconds:parseInt(e.match(/P(?:\d+[D|M|Y])*T(?:\d+[H|M])*(\d+)S/i)?.[1]??0)}):(t=e.match(/(\d{2}):(\d{2}):(\d{2})/),t&&t.length>=3?new n({hour:parseInt(t[1]),minute:parseInt(t[2]),second:parseInt(t[3])}):void 0)))}static today(){const e=new Date;return new s({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()})}static now(){const e=new Date;return new r({year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes(),second:e.getSeconds()})}static dayOfWeek({date:e=null}){return e instanceof r||e instanceof s?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDate().getDay()]:null}static dayOfYear({date:e=null}){if(e instanceof r||e instanceof s){let t=e.getDate(),r=new Date(t.getFullYear(),0,0),s=t-r+60*(r.getTimezoneOffset()-t.getTimezoneOffset())*1e3;const n=864e5;return Math.floor(s/n)}return null}static monthOfYear({date:e=null}){return e instanceof r||e instanceof s?["January","February","March","April","May","June","July","August","September","October","November","December"][e.getDate().getMonth()]:null}static weekOfYear({date:e=null}){if(e instanceof r||e instanceof s){let r=e.getDate();r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7);var t=new Date(r.getFullYear(),0,4);return 1+Math.round(((r.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)}return null}static monthBetween({from:e=null,to:t=null}){return e instanceof s&&e instanceof s?i.build(12*(t.year-e.year)+(t.month-e.month),0):null}add(e){}dateDiff(e,t){var r={days:0,months:0,years:0};if(e==t)return r;if(e>t){var s=t;t=e,e=s}var n=e.getFullYear(),i=t.getFullYear(),o=e.getMonth(),a=t.getMonth(),l=e.getDate(),u=t.getDate();if(r.years=i-n,r.months=a-o,r.days=u-l,r.days<0){var c=new Date(e.getFullYear(),e.getMonth()+1,1,0,0,-1).getDate();r.months-=1,r.days+=c}return r.months<0&&(r.months+=12,r.years-=1),r}}class r extends t{get exp(){let e=String(this.year).padStart(4,"0")+"-"+String(this.month).padStart(2,"0")+"-"+String(this.day).padStart(2,"0");return e+="T"+String(this.hour).padStart(2,"0")+":"+String(this.minute).padStart(2,"0")+":"+ +String(this.second).padStart(2,"0"),e}get value(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second).valueOf()}getDate(){return new Date(this.year,this.month-1,this.day,this.hour,this.minute,this.second)}add(e){if(e instanceof i){const t={year:this.year+e.years,month:this.month+e.months,day:this.day+e.days,hour:this.hour+e.hours,minute:this.minute+e.minutes,second:this.second+e.seconds};return new r(t)}}subtract(e){if(e instanceof i){const t={year:this.year-e.years,month:this.month-e.months,day:this.day-e.days,hour:this.hour-e.hours,minute:this.minute-e.minutes,second:this.second-e.seconds};return new r(t)}}}class s extends t{get exp(){return String(this.year).padStart(4,"0")+"-"+String(this.month).padStart(2,"0")+"-"+String(this.day).padStart(2,"0")}get value(){return new Date(this.year,this.month-1,this.day,0,0,0).valueOf()}static build(e){if(Array.isArray(e)&&3===e.length)return new s({year:e[0],month:e[1],day:e[2]})}getDate(){return new Date(this.year,this.month-1,this.day)}add(e){if(e instanceof i){const t={year:this.year+e.years,month:this.month+e.months,day:this.day+e.days};return new s(t)}}subtract(e){if(e instanceof s){const t=e.value>this.value?-1:1,r=e.getDate(),s=this.getDate(),n=this.dateDiff(r,s),o=n.months+12*n.years,a=24*n.days*60*60;return i.build(o*t,a*t)}}}class n extends t{get exp(){return String(this.hour).padStart(2,"0")+":"+String(this.minute).padStart(2,"0")+":"+ +String(this.second).padStart(2,"0")}get dtd(){return this.second+60*this.minute+60*this.hour*60}static build(e){if(Array.isArray(e)&&e.length>=3){let t=new n({hour:e[0],minute:e[1],second:e[2]});return e[3]?t.add(e[3]):t}if("number"==typeof e){const t=Math.abs(e)%86400,r={hour:t>0?Math.floor(t%86400/3600):0,minute:t>0?Math.floor(t%3600/60):0,second:t>0?t%60:0};return new n(r)}}add(e){if(e instanceof i)return n.build(this.dtd+e.dtd)}hoursminutes;subtract(e){if(e instanceof i)return n.build(this.dtd-e.dtd>0?this.dtd-e.dtd:0)}}class i extends t{get exp(){let e="P";return this.value<0&&(e="-"+e),this.days&&(e+=Math.abs(this.days)+"D"),this.months&&(e+=Math.abs(this.months)+"M"),this.years&&(e+=Math.abs(this.years)+"Y"),(this.hours||this.minutes|this.seconds)&&(e+="T"),this.hours&&(e+=Math.abs(this.hours)+"H"),this.minutes&&(e+=Math.abs(this.minutes)+"M"),this.seconds&&(e+=Math.abs(this.seconds)+"S"),e}get dtd(){return this.seconds+60*this.minutes+60*this.hours*60+24*this.days*60*60}get ymd(){return this.months+12*this.years}get value(){return 2592e3*this.ymd+this.dtd}static build(e,t){const r={years:e>0?Math.floor(e/12):-Math.floor(Math.abs(e)/12),months:e>0?e%12:-Math.abs(e)%12,days:t>0?Math.floor(t/86400):-Math.floor(Math.abs(t)/86400),hours:t>0?Math.floor(t%86400/3600):-Math.floor(Math.abs(t)%86400/3600),minutes:t>0?Math.floor(t%3600/60):-Math.floor(Math.abs(t)%3600/60),seconds:t>0?t%60:-Math.abs(t)%60};return new i(r)}add(e){return e instanceof i?i.build(this.ymd+e.ymd,this.dtd+e.dtd):e instanceof r?e.add(this):void 0}subtract(e){if(e instanceof i){const t=this.ymd-e.ymd,r=Math.sign(t)===Math.sign(this.dtd-e.dtd)?this.dtd-e.dtd:0;return i.build(t,r)}}abs(){return i.build(Math.abs(this.ymd),Math.abs(this.dtd))}}e.exports={Temporal:t,DateAndTime:r,DateOnly:s,Time:n,Duration:i}},649:(e,t,r)=>{!function(){function t(e){return e[0]}const s=r(271),n=r(603),i=s.compile({singlelinecomment:{match:/\/\/.*/},multilinecomment:{match:/\/\*[.\s\S]+?\*+\//,lineBreaks:!0},string:{match:/"(?:\\"|[^"])*?"/,value:e=>e.slice(1,-1)},dayandtime:/date[ ]+and[ ]+time/,fn:/put[ ]+all|string[ ]+length|string[ ]+join|week[ ]+of[ ]+year|month[ ]+of[ ]+year|day[ ]+of[ ]+year|month[ ]+of[ ]+year|day[ ]+of[ ]+week|years[ ]+and[ ]+months[ ]+duration/,types:/day-time-duration|year-month-duration/,instance:/instance[ ]+of/,whitespace:{match:/[ \t\n\r\u00A0\uFEFF\u000D\u000A]+/,lineBreaks:!0},word:{match:/[\?_'A-Za-z]+/,type:s.keywords({keywords:["for","return","if","true","false","in","and","or","between","some","every","then","else"],not:["not"],types:["string","number","boolean"],null:["null"],dayandtime:["date","time","duration"],fn:["even","abs","length","all","any"]})},number:/[0-9]+/,comparator:/!=|==|<=|>=|<{1}|>{1}|={1}/,operator:/-|\+|\.\.|\/|\*{1,2}/,punctuator:/@|[.,:;[\](){}]/});var o=[];function a(e){return Array.isArray(e)?e.reduce(((e,t)=>e.concat(a(t))),[]).join(""):e}function l(e){return Array.isArray(e)&&1===e.length?l(e[0]):e}function u(e,t){return Array.isArray(e)?e.reduce(((e,r)=>e.concat(a(r[t]))),[]):[]}function c(e,t){return Array.isArray(e)?e.reduce(((e,r)=>e.concat(l(r[t]))),[]):[]}var p={Lexer:i,ParserRules:[{name:"main",symbols:["UnaryTests"],postprocess:e=>l([e[0]])},{name:"main",symbols:["_","Expression","_"],postprocess:e=>l([e[1]])},{name:"Expression",symbols:["BoxedExpression"]},{name:"Expression",symbols:["TextualExpression"],postprocess:e=>l([e])},{name:"TextualExpression",symbols:["ForExpression"]},{name:"TextualExpression",symbols:["IfExpression"]},{name:"TextualExpression",symbols:["QuantifiedExpression"]},{name:"TextualExpression",symbols:["LogicalExpression"],postprocess:(e,t,r)=>e},{name:"NonArithmeticExpression",symbols:["InstanceOf"]},{name:"NonArithmeticExpression",symbols:["PathExpression"]},{name:"NonArithmeticExpression",symbols:["FilterExpression"]},{name:"NonArithmeticExpression",symbols:["SimplePositiveUnaryTest"]},{name:"NonArithmeticExpression",symbols:[{literal:"("},"_","Expression","_",{literal:")"}],postprocess:e=>new n({node:n.EVAL,expression:e[2]})},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:"<"}]},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:"<="}]},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:">"}]},{name:"SimplePositiveUnaryTest$subexpression$1",symbols:[{literal:">="}]},{name:"SimplePositiveUnaryTest",symbols:["SimplePositiveUnaryTest$subexpression$1","_","Endpoint"],postprocess:e=>new n({node:n.UNARY,operator:l(e[0]).value,value:l(e[2])})},{name:"SimplePositiveUnaryTest",symbols:["Interval"]},{name:"Interval$subexpression$1",symbols:[{literal:"("}]},{name:"Interval$subexpression$1",symbols:[{literal:"]"}]},{name:"Interval$subexpression$1",symbols:[{literal:"["}]},{name:"Interval$subexpression$2",symbols:[{literal:")"}]},{name:"Interval$subexpression$2",symbols:[{literal:"["}]},{name:"Interval$subexpression$2",symbols:[{literal:"]"}]},{name:"Interval",symbols:["Interval$subexpression$1","_","Endpoint","_",{literal:".."},"_","Endpoint","_","Interval$subexpression$2"],postprocess:e=>new n({node:n.INTERVAL,open:l(e[0]).value,from:l(e[2]),to:l(e[6]),close:l(e[8]).value})},{name:"Interval",symbols:["FunctionInvocation"]},{name:"Interval",symbols:["Literal"]},{name:"PositiveUnarytest",symbols:["Expression"]},{name:"PositiveUnarytests$ebnf$1$subexpression$1",symbols:[{literal:","},"_","PositiveUnarytest"]},{name:"PositiveUnarytests$ebnf$1",symbols:["PositiveUnarytests$ebnf$1$subexpression$1"]},{name:"PositiveUnarytests$ebnf$1$subexpression$2",symbols:[{literal:","},"_","PositiveUnarytest"]},{name:"PositiveUnarytests$ebnf$1",symbols:["PositiveUnarytests$ebnf$1","PositiveUnarytests$ebnf$1$subexpression$2"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"PositiveUnarytests",symbols:["PositiveUnarytest","_","PositiveUnarytests$ebnf$1"],postprocess:e=>new n({node:n.LIST,entries:[].concat(e[0]).concat(c(e[2],2))})},{name:"UnaryTests",symbols:["PositiveUnarytests"],postprocess:e=>new n({node:n.UNARYTESTS,list:l([e])})},{name:"UnaryTests",symbols:["Expression","_",{literal:"in"},"_","List"],postprocess:e=>new n({node:n.IN_LIST,input:l(e[0]),list:l(e[4])})},{name:"UnaryTests",symbols:["UnaryNot"]},{name:"UnaryTests",symbols:["UnaryDash"]},{name:"UnaryNot",symbols:[i.has("not")?{type:"not"}:not,"_",{literal:"("},"_","PositiveUnarytests","_",{literal:")"}],postprocess:e=>new n({node:n.UNARY_NOT,test:l(e[4])})},{name:"UnaryDash",symbols:["_",{literal:"-"},"_"],postprocess:e=>new n({node:n.DASH})},{name:"Endpoint",symbols:["SimpleValue"]},{name:"SimpleValue",symbols:["QualifiedName"]},{name:"SimpleValue",symbols:["SimpleLiteral"]},{name:"ArithmeticNegation",symbols:[{literal:"-"},"_","NonArithmeticExpression"],postprocess:e=>new n({node:n.NEGATION,expression:l(e[2])})},{name:"ArithmeticNegation",symbols:["NonArithmeticExpression"]},{name:"Sum$subexpression$1",symbols:[{literal:"+"}]},{name:"Sum$subexpression$1",symbols:[{literal:"-"}]},{name:"Sum",symbols:["Sum","_","Sum$subexpression$1","_","Product"],postprocess:e=>new n({node:n.SUM,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"Sum",symbols:["Product"]},{name:"Product$subexpression$1",symbols:[{literal:"*"}]},{name:"Product$subexpression$1",symbols:[{literal:"/"}]},{name:"Product",symbols:["Product","_","Product$subexpression$1","_","Exponentation"],postprocess:e=>new n({node:n.PRODUCT,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"Product",symbols:["Exponentation"]},{name:"Exponentation$subexpression$1",symbols:[{literal:"**"}]},{name:"Exponentation",symbols:["Exponentation","_","Exponentation$subexpression$1","_","ArithmeticNegation"],postprocess:(e,t,r)=>new n({node:n.EXPONENTATION,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"Exponentation",symbols:["ArithmeticNegation"]},{name:"QualifiedName",symbols:["Name","_",{literal:"."},"_","Name"],postprocess:e=>new n({node:n.PATH,object:e[0],property:e[4]})},{name:"QualifiedName",symbols:["Name"]},{name:"Name",symbols:["PotentialName"],postprocess:(e,t,r)=>new n({node:n.NAME,value:a([e])})},{name:"PotentialName$ebnf$1",symbols:[]},{name:"PotentialName$ebnf$1$subexpression$1",symbols:["__","NamePart"]},{name:"PotentialName$ebnf$1",symbols:["PotentialName$ebnf$1","PotentialName$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"PotentialName",symbols:["NameStart","PotentialName$ebnf$1"],postprocess:e=>a([e])},{name:"NameStart$ebnf$1",symbols:[i.has("number")?{type:"number"}:number],postprocess:t},{name:"NameStart$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"NameStart",symbols:[i.has("word")?{type:"word"}:word,"NameStart$ebnf$1"],postprocess:e=>a(e)},{name:"NamePart$ebnf$1",symbols:[i.has("number")?{type:"number"}:number],postprocess:t},{name:"NamePart$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"NamePart",symbols:[i.has("word")?{type:"word"}:word,"NamePart$ebnf$1"],postprocess:e=>a(e)},{name:"NamePart",symbols:[i.has("types")?{type:"types"}:types],postprocess:e=>a(e)},{name:"Literal",symbols:["SimpleLiteral"]},{name:"Literal",symbols:[i.has("null")?{type:"null"}:null],postprocess:e=>new n({node:n.NULL})},{name:"SimpleLiteral",symbols:["NumericLiteral"]},{name:"SimpleLiteral",symbols:["BooleanLiteral"]},{name:"SimpleLiteral",symbols:["StringLiteral"]},{name:"SimpleLiteral",symbols:["DateTimeLiteral"]},{name:"StringLiteral",symbols:[i.has("string")?{type:"string"}:string],postprocess:e=>new n({node:n.STRING,value:String.raw`${e}`})},{name:"BooleanLiteral$subexpression$1",symbols:[{literal:"true"}]},{name:"BooleanLiteral$subexpression$1",symbols:[{literal:"false"}]},{name:"BooleanLiteral",symbols:["BooleanLiteral$subexpression$1"],postprocess:e=>new n({node:n.BOOLEAN,value:"true"===a([e])})},{name:"NumericLiteral$ebnf$1$subexpression$1",symbols:[{literal:"."},"Digits"]},{name:"NumericLiteral$ebnf$1",symbols:["NumericLiteral$ebnf$1$subexpression$1"],postprocess:t},{name:"NumericLiteral$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"NumericLiteral",symbols:["Digits","NumericLiteral$ebnf$1"],postprocess:e=>new n({node:n.NUMBER,integer:parseInt(e[0]),decimals:parseInt(e[1]?e[1][1]:null),float:parseFloat(a([e]))})},{name:"NumericLiteral",symbols:[{literal:"."},"Digits"],postprocess:e=>new n({node:n.NUMBER,decimals:parseInt(a(e[1])),float:parseFloat("."+a([e[1]]))})},{name:"Digits",symbols:[i.has("number")?{type:"number"}:number],postprocess:e=>a([e])},{name:"FunctionInvocation",symbols:["FunctionName","_","Parameters"],postprocess:(e,t,r)=>new n({node:n.FUNCTION_CALL,name:l(e[0]),parameters:l(e[2])})},{name:"FunctionInvocation",symbols:[i.has("not")?{type:"not"}:not,"_",{literal:"("},"_","Expression","_",{literal:")"}],postprocess:(e,t,r)=>new n({node:n.NOT,parameters:l(e[4])})},{name:"FunctionName",symbols:[i.has("fn")?{type:"fn"}:fn],postprocess:e=>new n({node:n.NAME,value:a([e])})},{name:"FunctionName",symbols:["PotentialName"],postprocess:e=>new n({node:n.NAME,value:a([e])})},{name:"FunctionName",symbols:[{literal:"number"}],postprocess:e=>new n({node:n.NAME,value:a([e])})},{name:"FunctionName",symbols:[{literal:"string"}],postprocess:e=>new n({node:n.NAME,value:a([e])})},{name:"FunctionName",symbols:[{literal:"context"}],postprocess:e=>new n({node:n.NAME,value:a([e])})},{name:"Parameters$ebnf$1$subexpression$1",symbols:["NamedParameterList"]},{name:"Parameters$ebnf$1$subexpression$1",symbols:["PositionalParameterList"]},{name:"Parameters$ebnf$1",symbols:["Parameters$ebnf$1$subexpression$1"],postprocess:t},{name:"Parameters$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Parameters",symbols:[{literal:"("},"_","Parameters$ebnf$1","_",{literal:")"}],postprocess:e=>l(e[2])},{name:"NamedParameterList$ebnf$1",symbols:[]},{name:"NamedParameterList$ebnf$1$subexpression$1",symbols:[{literal:","},"_","NamedParameter"]},{name:"NamedParameterList$ebnf$1",symbols:["NamedParameterList$ebnf$1","NamedParameterList$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"NamedParameterList",symbols:["NamedParameter","_","NamedParameterList$ebnf$1"],postprocess:e=>new n({node:n.LIST,entries:[].concat(e[0]).concat(c(e[2],2))})},{name:"NamedParameter",symbols:["Name","_",{literal:":"},"_","Expression"],postprocess:e=>new n({node:n.NAMED_PARAMETER,name:a(e[0]),expression:l(e[4])})},{name:"PositionalParameterList$ebnf$1",symbols:[]},{name:"PositionalParameterList$ebnf$1$subexpression$1",symbols:[{literal:","},"_","Expression"]},{name:"PositionalParameterList$ebnf$1",symbols:["PositionalParameterList$ebnf$1","PositionalParameterList$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"PositionalParameterList",symbols:["Expression","_","PositionalParameterList$ebnf$1"],postprocess:e=>new n({node:n.LIST,entries:[].concat(l(e[0])).concat(l(c(e[2],2)))})},{name:"PathExpression",symbols:["NonArithmeticExpression",{literal:"."},"Name"],postprocess:e=>new n({node:n.PATH,object:l(e[0]),property:e[2]})},{name:"PathExpression",symbols:["BoxedExpression",{literal:"."},"Name"],postprocess:e=>new n({node:n.PATH,object:l(e[0]),property:e[2]})},{name:"PathExpression",symbols:["Name"]},{name:"ForExpression",symbols:[{literal:"for"},"__","Name","__",{literal:"in"},"__","Expression","__",{literal:"return"},"__","Expression"],postprocess:e=>new n({node:n.FOR,var:e[2],context:l(e[6]),return:l(e[10])})},{name:"IfExpression",symbols:[{literal:"if"},"__","Expression","__",{literal:"then"},"__","Expression","__",{literal:"else"},"__","Expression","_"],postprocess:e=>new n({node:n.IF,condition:e[2],then:e[6],else:e[10]})},{name:"QuantifiedExpression$subexpression$1",symbols:[{literal:"some"}]},{name:"QuantifiedExpression$subexpression$1",symbols:[{literal:"every"}]},{name:"QuantifiedExpression",symbols:["QuantifiedExpression$subexpression$1","__","Name","__",{literal:"in"},"__","Expression","__",{literal:"satisfies"},"__","Expression"],postprocess:e=>new n({node:n.QUANTIFIED,operator:l(e[0]).value,variable:e[2],context:e[6],satisfy:e[10]})},{name:"LogicalExpression$subexpression$1",symbols:[{literal:"and"}]},{name:"LogicalExpression$subexpression$1",symbols:[{literal:"or"}]},{name:"LogicalExpression",symbols:["LogicalExpression","__","LogicalExpression$subexpression$1","__","Comparison"],postprocess:e=>new n({node:n.LOGICAL,left:l(e[0]),operator:l(e[2]).value,right:l(e[4])})},{name:"LogicalExpression",symbols:["Comparison"]},{name:"Comparison$subexpression$1",symbols:[{literal:"="}]},{name:"Comparison$subexpression$1",symbols:[{literal:"!="}]},{name:"Comparison$subexpression$1",symbols:[{literal:"<"}]},{name:"Comparison$subexpression$1",symbols:[{literal:"<="}]},{name:"Comparison$subexpression$1",symbols:[{literal:">"}]},{name:"Comparison$subexpression$1",symbols:[{literal:">="}]},{name:"Comparison",symbols:["Comparison","_","Comparison$subexpression$1","_","Sum"],postprocess:e=>new n({node:n.COMPARISON,operator:l(e[2]).value,left:l(e[0]),right:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"between"},"__","Expression","__",{literal:"and"},"__","Expression"],postprocess:e=>new n({node:n.BETWEEN,expression:l(e[0]),left:l(e[4]),right:l(e[8])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"__","PositiveUnarytest"],postprocess:e=>new n({node:n.IN,input:l(e[0]),test:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"__","UnaryNot"],postprocess:e=>new n({node:n.IN,input:l(e[0]),test:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"__","UnaryDash"],postprocess:e=>new n({node:n.IN,input:l(e[0]),test:l(e[4])})},{name:"Comparison",symbols:["Expression","__",{literal:"in"},"_",{literal:"("},"_","PositiveUnarytests","_",{literal:")"}],postprocess:e=>new n({node:n.IN_LIST,input:l(e[0]),list:l(e[6])})},{name:"Comparison",symbols:["Sum"]},{name:"FilterExpression",symbols:["Expression","_",{literal:"["},"_","Expression","_",{literal:"]"}],postprocess:e=>new n({node:n.FILTER,list:l(e[0]),filter:l(e[4])})},{name:"InstanceOf",symbols:["Expression","_",i.has("instance")?{type:"instance"}:instance,"_","Type"],postprocess:e=>new n({node:n.INSTANCE_OF,instance:l(e[0]),of:l(e[4])})},{name:"Type",symbols:["QualifiedName"]},{name:"Type",symbols:[{literal:"list"},"_",{literal:"<"},"_","Type","_",{literal:">"}],postprocess:e=>new n({node:n.LIST_OF,single:l(e[4])})},{name:"Type",symbols:[{literal:"context"},"_",{literal:"<"},"_","ContextElements","_",{literal:">"}],postprocess:e=>new n({node:n.CONTEXT_TYPE,elements:l(e[4])})},{name:"Type$ebnf$1$subexpression$1$ebnf$1",symbols:[]},{name:"Type$ebnf$1$subexpression$1$ebnf$1$subexpression$1",symbols:[{literal:","},"_","Type"]},{name:"Type$ebnf$1$subexpression$1$ebnf$1",symbols:["Type$ebnf$1$subexpression$1$ebnf$1","Type$ebnf$1$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"Type$ebnf$1$subexpression$1",symbols:["Type","_","Type$ebnf$1$subexpression$1$ebnf$1"]},{name:"Type$ebnf$1",symbols:["Type$ebnf$1$subexpression$1"],postprocess:t},{name:"Type$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Type",symbols:[{literal:"function"},"_",{literal:"<"},"_","Type$ebnf$1","_",{literal:">"},"_",{literal:"->"},"_","Type"]},{name:"Type",symbols:["BasicType"],postprocess:e=>l(e)},{name:"ContextElements$ebnf$1",symbols:[]},{name:"ContextElements$ebnf$1$subexpression$1",symbols:[{literal:","},"_","ContextElement"]},{name:"ContextElements$ebnf$1",symbols:["ContextElements$ebnf$1","ContextElements$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"ContextElements",symbols:["ContextElement","_","ContextElements$ebnf$1"],postprocess:e=>new n({node:n.LIST,entries:[].concat(e[0]).concat(u(e[2],2))})},{name:"ContextElement",symbols:["Name","_",{literal:":"},"_","Type"],postprocess:e=>new n({node:n.CONTEXT_ELEMENT,name:a(e[0]),type:l(e[4])})},{name:"BasicType$subexpression$1",symbols:[{literal:"boolean"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"number"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"string"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"date"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"time"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"date and time"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"day-time-duration"}]},{name:"BasicType$subexpression$1",symbols:[{literal:"year-month-duration"}]},{name:"BasicType",symbols:["BasicType$subexpression$1"],postprocess:e=>l(e).value},{name:"BasicType",symbols:[{literal:"date"},"__",{literal:"time"}],postprocess:e=>a(e)},{name:"BoxedExpression",symbols:["List"]},{name:"BoxedExpression",symbols:["FunctionDefintion"],postprocess:e=>l(e)},{name:"BoxedExpression",symbols:["Context","__","Expression"],postprocess:e=>new n({node:n.BOXED,context:l(e[0]),result:l(e[2])})},{name:"BoxedExpression",symbols:["Context"],postprocess:e=>l(e)},{name:"List",symbols:[{literal:"["},"_","ListEntries","_",{literal:"]"}],postprocess:e=>new n({node:n.LIST,entries:e[2]})},{name:"List",symbols:[{literal:"["},"_",{literal:"]"}],postprocess:e=>new n({node:n.LIST,entries:[]})},{name:"ListEntries$ebnf$1",symbols:[]},{name:"ListEntries$ebnf$1$subexpression$1",symbols:[{literal:","},"_","ListEntry"]},{name:"ListEntries$ebnf$1",symbols:["ListEntries$ebnf$1","ListEntries$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"ListEntries",symbols:["ListEntry","_","ListEntries$ebnf$1"],postprocess:e=>[].concat(e[0]).concat(c(e[2],2))},{name:"ListEntry",symbols:["Expression"],postprocess:e=>l(e)},{name:"ListEntry",symbols:["UnaryDash"]},{name:"ListEntry",symbols:["UnaryNot"]},{name:"FunctionDefintion$ebnf$1",symbols:["FormalParameterList"],postprocess:t},{name:"FunctionDefintion$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"FunctionDefintion",symbols:[{literal:"function"},"_",{literal:"("},"_","FunctionDefintion$ebnf$1","_",{literal:")"},"_","Expression"],postprocess:e=>new n({node:n.FUNCTION_DEFINITION,parameters:l(e[4]),expression:l(e[8])})},{name:"FormalParameterList$ebnf$1",symbols:[]},{name:"FormalParameterList$ebnf$1$subexpression$1",symbols:[{literal:","},"_","FormalParameter"]},{name:"FormalParameterList$ebnf$1",symbols:["FormalParameterList$ebnf$1","FormalParameterList$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"FormalParameterList",symbols:["FormalParameter","_","FormalParameterList$ebnf$1"],postprocess:e=>new n({node:n.LIST,entries:[].concat(l(e[0])).concat(l(c(e[2],2)))})},{name:"FormalParameter$ebnf$1",symbols:["FormalParameterType"],postprocess:t},{name:"FormalParameter$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"FormalParameter",symbols:["Name","_","FormalParameter$ebnf$1"],postprocess:e=>new n({node:n.FORMAL_PARAMETER,name:a(e[0]),type:l(e[2])})},{name:"FormalParameterType",symbols:[{literal:":"},"_","Type"],postprocess:e=>l(e[2])},{name:"Context$ebnf$1$subexpression$1",symbols:["ContextEntries"]},{name:"Context$ebnf$1",symbols:["Context$ebnf$1$subexpression$1"],postprocess:t},{name:"Context$ebnf$1",symbols:[],postprocess:function(e){return null}},{name:"Context",symbols:[{literal:"{"},"_","Context$ebnf$1","_",{literal:"}"}],postprocess:e=>new n({node:n.CONTEXT,data:l(e[2])})},{name:"ContextEntries$ebnf$1",symbols:[]},{name:"ContextEntries$ebnf$1$subexpression$1",symbols:[{literal:","},"_","ContextEntry"]},{name:"ContextEntries$ebnf$1",symbols:["ContextEntries$ebnf$1","ContextEntries$ebnf$1$subexpression$1"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"ContextEntries",symbols:["ContextEntry","_","ContextEntries$ebnf$1"],postprocess:e=>new n({node:n.LIST,entries:[].concat(e[0]).concat(c(e[2],2))})},{name:"ContextEntry",symbols:["Key","_",{literal:":"},"_","Expression"],postprocess:e=>{var t;return t=l(e[0]),t?.value&&o.indexOf(t.value)<0&&o.push(t.value),new n({node:n.CONTEXT_ENTRY,key:l(e[0]),expression:l(e[4])})}},{name:"Key",symbols:["Name"]},{name:"Key",symbols:["StringLiteral"]},{name:"DateTimeLiteral",symbols:["AtLiteral"]},{name:"DateTimeLiteral",symbols:["DateTimeFunction"]},{name:"DateTimeFunction",symbols:[i.has("dayandtime")?{type:"dayandtime"}:dayandtime,"_","Parameters"],postprocess:e=>new n({node:n.DATE_AND_TIME,name:e[0].value,parameters:l(e[2])})},{name:"WhiteSpace",symbols:[i.has("whitespace")?{type:"whitespace"}:whitespace]},{name:"WhiteSpace",symbols:[i.has("singlelinecomment")?{type:"singlelinecomment"}:singlelinecomment]},{name:"WhiteSpace",symbols:[i.has("multilinecomment")?{type:"multilinecomment"}:multilinecomment]},{name:"_$ebnf$1",symbols:[]},{name:"_$ebnf$1",symbols:["_$ebnf$1","WhiteSpace"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"_",symbols:["_$ebnf$1"],postprocess:()=>" "},{name:"__$ebnf$1",symbols:["WhiteSpace"]},{name:"__$ebnf$1",symbols:["__$ebnf$1","WhiteSpace"],postprocess:function(e){return e[0].concat([e[1]])}},{name:"__",symbols:["__$ebnf$1"],postprocess:()=>" "},{name:"AtLiteral",symbols:[{literal:"@"},"StringLiteral"],postprocess:e=>new n({node:n.AT_LITERAL,expression:l(e[1])})}],ParserStart:"main"};void 0!==e.exports?e.exports=p:window.grammar=p}()},289:(e,t,r)=>{"use strict";const s=r(654),n=r(649),i=r(603),{Temporal:o,DateAndTime:a,DateOnly:l,Time:u,Duration:c}=r(231),{Strings:p}=r(177),m=r(776),h=r(184);e.exports=class{parse(e){const t=new s.Parser(s.Grammar.fromCompiled(n));try{return this.error=null,t.feed(e),this.ast=t.results,this.exp=e,!0}catch(t){return this.ast={},this.error={exp:e,number:t.token?.offset?100:900,text:t.token?.text||null,position:e.substring(t.token?.offset>10?t.token?.offset-10:0,t.token?.offset||0),offset:t.token?.offset||null,line:t.token?.line||null,col:t.token?.col||null},!1}}evaluate({expression:e,context:t}={}){if(this.error=null,e||t?(e&&this.parse(e),this.data=t||{}):arguments.length>1?(this.parse(arguments[0]),this.data=arguments[1]):"string"==typeof arguments[0]?(this.parse(arguments[0]),this.data={}):this.data=arguments[0],this.ast&&this.ast.length&&!this.ast.length>0)return this.error={exp:this.exp,number:300},null;if(!this.error){this.decisionContext={},this.functionDefinitions={};try{const e=this._build(this.ast[0]);return e&&e instanceof o?e.exp:e}catch(e){throw this.error={exp:this.exp,number:200,message:e.message},e}}return null}_build(e,t){if(!e)return"#undefined";if(this["__"+e.node]&&"[object Function]"==={}.toString.call(this["__"+e.node]))return this["__"+e.node](e,t);throw new Error("Interpreter - missing function "+e.node)}__NUMBER(e){return e.float}__NAME(e,t){return t&&e.value in t?t[e.value]:this.decisionContext&&e.value in this.decisionContext?this.decisionContext[e.value]:this.data[e.value]}__BOOLEAN(e){return e.value}__STRING(e){return e.value.replace(/^"(.+)"$/,"$1")}__NULL(e){return null}__DASH(e){return!0}__SUM(e,t){let r=this._build(e.left,t);const s=this._build(e.right,t);if(r instanceof o)switch(e.operator){case"-":return r.subtract(s);case"+":return r.add(s)}switch(e.operator){case"-":return"number"==typeof r&&"number"==typeof s?new m(r).minus(s).toNumber():r-s;case"+":return"number"==typeof r&&"number"==typeof s?new m(r).plus(s).toNumber():r+s}}__PRODUCT(e,t){switch(e.operator){case"/":return new m(this._build(e.left,t)).div(new m(this._build(e.right,t))).toNumber();case"*":return new m(this._build(e.left,t)).mul(new m(this._build(e.right,t))).toNumber()}}__EXPONENTATION(e,t){return m.pow(new m(this._build(e.left,t)),new m(this._build(e.right,t))).toNumber()}__NEGATION(e,t){return-this._build(e.expression,t)}__COMPARISON(e,t){let r=this._build(e.left,t),s=this._build(e.right,t);switch(r instanceof o&&(r=r.value),s instanceof o&&(s=s.value),e.operator){case"=":return r==s;case"<":return r<s;case">":return r>s;case">=":return r>=s;case"<=":return r<=s;case"!=":return r!==s}}__LOGICAL(e){switch(e.operator){case"and":return this._build(e.left)&&this._build(e.right);case"or":return this._build(e.left)||this._build(e.right)}}__NOT(e,t){return!this._build(e.parameters,t)}__EVAL(e,t){return this._build(e.expression,t)}__LIST(e,t){let r=[];return Array.isArray(e.entries)&&e.entries.forEach((e=>{r.push(this._build(e,t))})),r}__PATH(e,t){let r=this._build(e.object,t);if(Array.isArray(r)){let t=[];return r.forEach((r=>{t.push(r&&e.property&&e.property.value?r[e.property.value]:null)})),t}return r&&e.property&&e.property.value?r[e.property.value]:null}__IF(e){return this._build(e.condition)?this._build(e.then):this._build(e.else)}__CONTEXT(e,t){let r={};return e.data&&Array.isArray(e.data.entries)&&e.data.entries.forEach((e=>{let s=this._build(e,t);s&&(s.key=s.key.replace(/\s\s+/g," "),r[s.key]=s.value,this.decisionContext[s.key]=s.value)})),r}__CONTEXT_ENTRY(e,t){if(e.expression.node===i.FUNCTION_DEFINITION){const r=e.key.node===i.NAME?e.key.value:this._build(e.key,t);return this.functionDefinitions[r]=e.expression,null}return{key:e.key.node===i.NAME?e.key.value:this._build(e.key,t),value:this._build(e.expression,t)}}__DATE_AND_TIME(e,t){let r=this._build(e.parameters,t);return Array.isArray(r)&&3===r.length&&"date"===e.name?l.build(r):Array.isArray(r)&&r.length>=3&&"time"===e.name?u.build(r):o.parse(r?r[0]:null)}__AT_LITERAL(e){let t=this._build(e.expression);return o.parse(t||null)}__FILTER(e){let t=this._build(e.list);if(!Array.isArray(t))return null;switch(e.filter.node){case i.NUMBER:let r=this._build(e.filter);return r>0&&r<=t.length?t[r-1]:null;case i.NEGATION:let s=this._build(e.filter);return t.length+s>0?t[t.length+s-1]:null;case i.NAME:let n=this._build(e.filter);return n>=0?n<=t.length?t[n-1]:null:t.length+n>0?t[t.length+n-1]:null;default:let o=[];return t.forEach((t=>{1==this._build(e.filter,{item:t})&&o.push(t)})),o}}__FOR(e,t){let r=this._build(e.context);const s=e.var?.value||null;if(!Array.isArray(r))return null;let n=[];return r.forEach((r=>{const i={};i[s]=r,n.push(this._build(e.return,Object.assign(t||{},i)))})),n}__IN(e,t){switch(e.test.node){case i.DASH:return!0;case i.EVAL:if(e.test.expression.node===i.UNARY)return e.test.expression.input=e.input,this._build(e.test.expression,t);break;case i.NAME:case i.STRING:case i.BOOLEAN:case i.NUMBER:case i.FUNCTION_CALL:return this._build(e.input,t)===this._build(e.test,t);case i.INTERVAL:let r=!1,s=!1,n=this._build(e.input,t);n instanceof o&&(n=n.value);let a=this._build(e.test.from,t),l=this._build(e.test.to,t);switch(a instanceof o&&(a=a.value),l instanceof o&&(l=l.value),e.test.open){case"[":r=n>=a;break;case"(":case"]":r=n>a}switch(e.test.close){case"]":s=n<=l;break;case")":case"[":s=n<l}return r&&s;case i.UNARY:return e.test.input=e.input,this._build(e.test,t);default:return!1}}__BETWEEN(e,t){let r=this._build(e.expression,t);r instanceof o&&(r=r.value);let s=this._build(e.left,t);s instanceof o&&(s=s.value);let n=this._build(e.right,t);return n instanceof o&&(n=n.value),r>s&&r<n}__IN_LIST(e,t){if(!e.list||!Array.isArray(e.list.entries))return!1;let r=!1;return e.list.entries.forEach((s=>{s.node===i.UNARY?(s.input=e.input,r=r||this._build(s,t)):r=r||this._build(e.input,t)===this._build(s,t)})),r}__UNARY(e){if(!e.input)return!1;switch(e.operator){case"<":return this._build(e.input)<this._build(e.value);case">":return this._build(e.input)>this._build(e.value);case">=":return this._build(e.input)>=this._build(e.value);case"<=":return this._build(e.input)<=this._build(e.value)}}__INSTANCE_OF(e,t){let r=this._build(e.instance,t);if(e.of.node&&e.of.node==i.NAME)return typeof r==typeof this._build(e.of,t);if("string"==typeof e.of)switch(e.of){case"number":return"number"==typeof r;case"string":return"string"==typeof r;case"boolean":return"boolean"==typeof r;case"date":return r instanceof l;case"date and time":return r instanceof a;default:return!1}}__BOXED(e,t){return this._build(e.result,Object.assign(t||{},this._build(e.context)||{}))}buildParameters(e,t,r){let s={};return e&&e.node===i.LIST&&e.entries.forEach(((e,n)=>{if(e.node==i.NAMED_PARAMETER){let n=e.name?.value??null;t.indexOf(n)>=0&&(s[n]=this._build(e.expression,r))}else s[t[n]]=this._build(e,r)})),s}getRawParameters(e,t){let r={};return e&&e.node===i.LIST&&e.entries.forEach(((e,s)=>{if(e.node==i.NAMED_PARAMETER){let s=e.name?.value??null;t.indexOf(s)>=0&&(r[s]=e.expression)}else r[t[s]]=e})),r}getRangeParameters(e,t){return Object.entries(e).map((([e,r])=>{let s={raw:r,type:r?.node===i.INTERVAL?"interval":"point"};return"point"===s.type?(s.value=this._build(s.raw,t),s.value instanceof o&&(s.value=s.value.value)):(s.from=this._build(r.from,t),s.from instanceof o&&(s.from=s.from.value),s.to=this._build(r.to,t),s.to instanceof o&&(s.to=s.to.value),s.includeFrom="["===r.open,s.includeTo="]"===r.close),s}))}callFunctionDefinition(e,t,r){const s=e.parameters?.entries?.map((e=>e.name?.value??null)),n=this.buildParameters(t,s,r);return this._build(e.expression,Object.assign(r||{},n))}__FUNCTION_CALL(e,t){if(this.functionDefinitions[e.name.value])return this.callFunctionDefinition(this.functionDefinitions[e.name.value],e.parameters,t);switch(e.name.value){case"today":return o.today();case"now":return o.now();case"day of week":{const s=this.buildParameters(e.parameters,["date"],t);return o.dayOfWeek(s)}case"day of year":{const n=this.buildParameters(e.parameters,["date"],t);return o.dayOfYear(n)}case"week of year":{const i=this.buildParameters(e.parameters,["date"],t);return o.weekOfYear(i)}case"month of year":{const a=this.buildParameters(e.parameters,["date"],t);return o.monthOfYear(a)}case"years and months duration":{const l=this.buildParameters(e.parameters,["from","to"],t);return o.monthBetween(l)}case"number":{const u=this.buildParameters(e.parameters,["from"],t);return"string"==typeof u.from?parseFloat(u.from):void 0}case"string":{const m=this.buildParameters(e.parameters,["from"],t);return m.from instanceof o?m.from.exp:String(m.from)}case"context":{const h=this.buildParameters(e.parameters,["entries"],t);return Array.isArray(h.entries)?h.entries.reduce(((e,t)=>(t.key&&(e[t.key]=t.value),e)),{}):void 0}case"is defined":return void 0!==this.buildParameters(e.parameters,["value"],t).value;case"substring":{const f=this.buildParameters(e.parameters,["string","start","length"],t);return"string"==typeof f.string?f.string.substring(f.start-1,f.length?f.start+f.length-1:f.string.length):void 0}case"string length":{const d=this.buildParameters(e.parameters,["string"],t);return"string"==typeof d.string?d.string.length:void 0}case"upper case":{const b=this.buildParameters(e.parameters,["string"],t);return"string"==typeof b.string?b.string.toUpperCase():void 0}case"lower case":{const y=this.buildParameters(e.parameters,["string"],t);return"string"==typeof y.string?y.string.toLowerCase():void 0}case"substring before":{const g=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof g.string?g.string.substring(0,g.string.indexOf(g.match)):void 0}case"substring after":{const v=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof v.string?v.string.substring(v.string.indexOf(v.match)+v.match.length,v.string.length):void 0}case"contains":{const x=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof x.string?x.string.indexOf(x.match)>=0:void 0}case"starts with":{const w=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof w.string?w.string.startsWith(w.match):void 0}case"ends with":{const E=this.buildParameters(e.parameters,["string","match"],t);return"string"==typeof E.string?E.string.endsWith(E.match):void 0}case"matches":{const _=this.buildParameters(e.parameters,["input","pattern"],t);return p.matches(_)}case"replace":{const $=this.buildParameters(e.parameters,["input","pattern","replacement","flags"],t);return p.replace($)}case"split":{const N=this.buildParameters(e.parameters,["string","delimiter"],t);return p.split(N)}case"extract":{const T=this.buildParameters(e.parameters,["string","pattern"],t);return p.extract(T)}case"list contains":{const A=this.buildParameters(e.parameters,["list","element"],t);return!!Array.isArray(A.list)&&A.list.indexOf(A.element)>=0}case"count":{const P=this.buildParameters(e.parameters,["list"],t);return Array.isArray(P.list)?P.list.length:void 0}case"min":{if(e.parameters?.entries?.length>1)return Math.min(...this._build(e.parameters));const S=this.buildParameters(e.parameters,["list"],t);return Array.isArray(S.list)?Math.min(...S.list):void 0}case"max":{if(e.parameters?.entries?.length>1)return Math.max(...this._build(e.parameters));const O=this.buildParameters(e.parameters,["list"],t);return Array.isArray(O.list)?Math.max(...O.list):void 0}case"sum":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e+t));const L=this.buildParameters(e.parameters,["list"],t);return Array.isArray(L.list)?L.list.reduce(((e,t)=>e+t)):void 0}case"product":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e*t));const I=this.buildParameters(e.parameters,["list"],t);return Array.isArray(I.list)?I.list.reduce(((e,t)=>e*t)):void 0}case"mean":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e+t))/e.parameters.entries.length||0;const M=this.buildParameters(e.parameters,["list"],t);return Array.isArray(M.list)?M.list.reduce(((e,t)=>e+t))/M.list.length||0:void 0}case"median":{const F=e.parameters?.entries?.length>1?[...this._build(e.parameters)]:this.buildParameters(e.parameters,["list"],t).list;function k(e){e.sort((function(e,t){return e-t}));var t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2}return Array.isArray(F)&&F.length>0?k(F):null}case"stddev":{const R=e.parameters?.entries?.length>1?[...this._build(e.parameters)]:this.buildParameters(e.parameters,["list"],t).list;if(!Array.isArray(R))return;const C=R.length,D=R.reduce(((e,t)=>e+t))/C;return Math.sqrt(R.map((e=>Math.pow(e-D,2))).reduce(((e,t)=>e+t))/C)}case"mode":{const U=e.parameters?.entries?.length>1?[...this._build(e.parameters)]:this.buildParameters(e.parameters,["list"],t).list;function B(e){let t=[],r=[],s=0,n=[];e.forEach(((e,n)=>{let i=t.indexOf(e);i<0&&(t.push(e),i=t.length-1),r[i]?r[i]++:r[i]=1,r[i]>s&&(s=r[i])}));for(let e in r)r[e]==s&&n.push(t[e]);return n.sort()}return Array.isArray(U)?B(U):null}case"all":case"and":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e&&t));const j=this.buildParameters(e.parameters,["list"],t);return Array.isArray(j.list)?!(j.list.length>0)||j.list.reduce(((e,t)=>e&&t)):void 0}case"any":case"or":{if(e.parameters?.entries?.length>1)return this._build(e.parameters).reduce(((e,t)=>e||t));const q=this.buildParameters(e.parameters,["list"],t);return Array.isArray(q.list)?q.list.length>0&&q.list.reduce(((e,t)=>e||t)):void 0}case"sublist":{const Y=this.buildParameters(e.parameters,["list","start position","length"],t);if(!Array.isArray(Y.list))return;const H=Y["start position"]&&Y["start position"]>0?Y["start position"]-1:0,G=Y.length&&Y.length>0?H+Y.length:Y.list.length;return Y.list.slice(H,G)}case"append":{const X=this.buildParameters(e.parameters,["list"],t),Z=e.parameters?.entries?.length>1?this._build(e.parameters).slice(1):[];return Array.isArray(X.list)?X.list.concat(Z):void 0}case"union":case"concatenate":return(e.parameters?.entries?.length>1?this._build(e.parameters):[]).reduce(((e,t)=>Array.isArray(t)?Array.isArray(e)?e.concat(t):[].concat(t):e));case"insert before":{const V=this.buildParameters(e.parameters,["list","position"],t),W=e.parameters?.entries?.length>2?this._build(e.parameters).slice(2):[];return Array.isArray(V.list)&&V.position>0?V.list.splice(V.position-1,0,...W):V.list=void 0,V.list}case"remove":{const Q=this.buildParameters(e.parameters,["list","position"],t);return Array.isArray(Q.list)&&Q.position>0?Q.list.splice(Q.position-1,1):Q.list=void 0,Q.list}case"reverse":{const J=this.buildParameters(e.parameters,["list"],t);return Array.isArray(J.list)?J.list.reverse():void 0}case"index of":{function z(e,t){var r,s=[];for(r=0;r<e.length;r++)e[r]===t&&s.push(r+1);return s}const K=this.buildParameters(e.parameters,["list","match"],t);return Array.isArray(K.list)?z(K.list,K.match):void 0}case"distinct values":{const ee=this.buildParameters(e.parameters,["list"],t);return Array.isArray(ee.list)?[...new Set(ee.list)]:void 0}case"flatten":{const te=this.buildParameters(e.parameters,["list"],t);function re(e){return e.reduce(((e,t)=>Array.isArray(t)?e.concat(re(t)):e.concat(t)),[])}return Array.isArray(te.list)?re(te.list):void 0}case"sort":{const se=this.getRawParameters(e.parameters,["list","precedes"]);var r=this._build(se.list,t);const ne=se.precedes?.parameters?.entries?.map((e=>e.name?.value??null));return Array.isArray(r)&&r.sort(((e,t)=>{const r={};return r[ne[0]]=e,r[ne[1]]=t,this._build(se.precedes.expression,r)?-1:1})),r}case"string join":{const ie=this.buildParameters(e.parameters,["list","delimiter","prefix","suffix"],t),oe=ie.prefix?ie.prefix:"",ae=ie.suffix?ie.suffix:"",le=ie.delimiter?ie.delimiter:"";return oe+(Array.isArray(ie.list)?ie.list.join(le):"")+ae}case"get value":{const ue=this.buildParameters(e.parameters,["context","key"],t);return ue.context&&ue.key?ue.context[ue.key]:null}case"get entries":{const ce=this.buildParameters(e.parameters,["context"],t);return"object"==typeof ce.context?Object.entries(ce.context).map((([e,t])=>({key:e,value:t}))):[]}case"put":{const pe=this.buildParameters(e.parameters,["context","key","value"],t);return pe.context&&pe.key&&(pe.context[pe.key]=pe.value),pe.context}case"put all":{const me=this._build(e.parameters,t);return Array.isArray(me)?Object.assign(...me):void 0}case"decimal":{const he=this.buildParameters(e.parameters,["n","scale"],t);return"number"==typeof he.n&&"number"==typeof he.scale?parseFloat(he.n.toFixed(he.scale)):void 0}case"floor":{const fe=this.buildParameters(e.parameters,["n"],t);return"number"==typeof fe.n?Math.floor(fe.n):void 0}case"ceiling":{const de=this.buildParameters(e.parameters,["n"],t);return"number"==typeof de.n?Math.ceil(de.n):void 0}case"round up":{const be=this.buildParameters(e.parameters,["n","scale"],t),ye="number"==typeof be.scale?10**be.scale:1;return"number"==typeof be.n?be.n>=0?Math.ceil(be.n*ye)/ye:Math.floor(be.n*ye)/ye:void 0}case"round down":{const ge=this.buildParameters(e.parameters,["n","scale"],t),ve="number"==typeof ge.scale?10**ge.scale:1;return"number"==typeof ge.n?Math.trunc(ge.n*ve)/ve:void 0}case"round half up":{const xe=this.buildParameters(e.parameters,["n","scale"],t),we=xe.n<0?-1:1,Ee="number"==typeof xe.scale?10**xe.scale:1;return"number"==typeof xe.n?Math.round(Math.abs(xe.n)*Ee)/Ee*we:void 0}case"round half down":{const _e=this.buildParameters(e.parameters,["n","scale"],t),$e=_e.n<0?1:-1,Ne="number"==typeof _e.scale?10**_e.scale:1;return"number"==typeof _e.n?Math.round(-Math.abs(_e.n)*Ne)/Ne*$e:void 0}case"abs":{const Te=this.buildParameters(e.parameters,["number"],t);return Te.number instanceof c?Te.number.abs():"number"==typeof Te.number?Math.abs(Te.number):void 0}case"modulo":{const Ae=this.buildParameters(e.parameters,["dividend","divisor"],t);return"number"==typeof Ae.dividend&&"number"==typeof Ae.divisor?Ae.dividend%Ae.divisor:void 0}case"sqrt":{const Pe=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Pe.number?Math.sqrt(Pe.number):void 0}case"log":{const Se=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Se.number?Math.log(Se.number):void 0}case"exp":{const Oe=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Oe.number?Math.exp(Oe.number):void 0}case"odd":{const Le=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Le.number&&Le.number%2!=0}case"even":{const Ie=this.buildParameters(e.parameters,["number"],t);return"number"==typeof Ie.number&&Ie.number%2==0}case"before":{const Me=this.getRangeParameters(e.parameters.entries,t);switch(`${Me[0].type}-${Me[1].type}`){case"point-point":return Me[0].value<Me[1].value;case"point-interval":return Me[1].includeFrom?Me[0].value<Me[1].from:Me[0].value<=Me[1].from;case"interval-point":return Me[0].includeTo?Me[0].to<Me[1].value:Me[0].to<=Me[1].value;case"interval-interval":return Me[0].includeTo&&Me[1].includeFrom?Me[0].to<Me[1].from:Me[0].to<=Me[1].from}return}case"after":{const Fe=this.getRangeParameters(e.parameters.entries,t);switch(`${Fe[0].type}-${Fe[1].type}`){case"point-point":return Fe[0].value>Fe[1].value;case"point-interval":return Fe[1].includeTo?Fe[0].value>Fe[1].to:Fe[0].value>=Fe[1].to;case"interval-point":return Fe[0].includeFrom?Fe[0].from>Fe[1].value:Fe[0].from>=Fe[1].value;case"interval-interval":return Fe[0].includeFrom&&Fe[1].includeTo?Fe[0].from>Fe[1].to:Fe[0].from>=Fe[1].to}return}case"meets":{const ke=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${ke[0].type}-${ke[1].type}`?!(!ke[0].includeTo||!ke[1].includeFrom)&&ke[0].to===ke[1].from:void 0}case"met by":{const Re=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${Re[0].type}-${Re[1].type}`?!(!Re[0].includeFrom||!Re[1].includeTo)&&Re[0].from===Re[1].to:void 0}case"overlaps":{const Ce=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${Ce[0].type}-${Ce[1].type}`?(Ce[0].includeTo&&Ce[1].includeFrom?Ce[0].to>=Ce[1].from:Ce[0].to>Ce[1].from)&&(Ce[0].includeFrom&&Ce[1].includeTo?Ce[0].from<=Ce[1].to:Ce[0].from<Ce[1].to):void 0}case"overlaps before":{const De=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${De[0].type}-${De[1].type}`?(De[0].includeTo&&De[1].includeFrom?De[0].to>=De[1].from:De[0].to>De[1].from)&&(De[0].includeFrom&&De[1].includeTo?De[0].from<=De[1].from:De[0].from<De[1].from):void 0}case"overlaps after":{const Ue=this.getRangeParameters(e.parameters.entries,t);return"interval-interval"==`${Ue[0].type}-${Ue[1].type}`?(Ue[0].includeTo&&Ue[1].includeFrom?Ue[0].to>=Ue[1].to:Ue[0].to>Ue[1].to)&&(Ue[0].includeFrom&&Ue[1].includeTo?Ue[0].from<=Ue[1].to:Ue[0].from<Ue[1].to):void 0}case"finishes":{const Be=this.getRangeParameters(e.parameters.entries,t);switch(`${Be[0].type}-${Be[1].type}`){case"point-interval":return!!Be[1].includeTo&&Be[0].value==Be[1].to;case"interval-interval":return Be[0].includeTo===Be[1].includeTo&&Be[0].to===Be[1].to}return}case"finished by":{const je=this.getRangeParameters(e.parameters.entries,t);switch(`${je[0].type}-${je[1].type}`){case"interval-point":return!!je[0].includeTo&&je[0].to==je[1].value;case"interval-interval":return je[0].includeTo===je[1].includeTo&&je[0].to===je[1].to}return}case"includes":{const qe=this.getRangeParameters(e.parameters.entries,t);switch(`${qe[0].type}-${qe[1].type}`){case"interval-point":return qe[0].includeTo,qe[0].to>=qe[1].value&&(qe[0].includeFrom?qe[0].from<=qe[1].value:qe[0].from<qe[1].value);case"interval-interval":return(qe[0].includeTo===qe[1].includeTo?qe[0].to>=qe[1].to:qe[0].to>qe[1].to)&&(qe[0].includeFrom===qe[1].includeFrom?qe[0].from<=qe[1].from:qe[0].from<qe[1].from)}return}case"during":{const Ye=this.getRangeParameters(e.parameters.entries,t);switch(`${Ye[0].type}-${Ye[1].type}`){case"point-interval":return Ye[1].includeTo,Ye[1].to>=Ye[0].value&&(Ye[1].includeFrom?Ye[1].from<=Ye[0].value:Ye[1].from<Ye[0].value);case"interval-interval":return(Ye[0].includeTo===Ye[1].includeTo?Ye[1].to>=Ye[0].to:Ye[1].to>Ye[0].to)&&(Ye[0].includeFrom===Ye[1].includeFrom?Ye[1].from<=Ye[0].from:Ye[1].from<Ye[0].from)}return}case"starts":{const He=this.getRangeParameters(e.parameters.entries,t);switch(`${He[0].type}-${He[1].type}`){case"point-interval":return!!He[1].includeFrom&&He[0].value==He[1].from;case"interval-interval":return He[0].includeFrom===He[1].includeFrom&&He[0].from===He[1].from}return}case"started by":{const Ge=this.getRangeParameters(e.parameters.entries,t);switch(`${Ge[0].type}-${Ge[1].type}`){case"interval-point":return!!Ge[0].includeFrom&&Ge[0].from==Ge[1].value;case"interval-interval":return Ge[0].includeFrom===Ge[1].includeFrom&&Ge[0].from===Ge[1].from}return}case"coinsides":{const Xe=this.getRangeParameters(e.parameters.entries,t);switch(`${Xe[0].type}-${Xe[1].type}`){case"point-point":return Xe[0].value===Xe[1].value;case"interval-interval":return Xe[0].includeFrom===Xe[1].includeFrom&&Xe[0].from===Xe[1].from&&Xe[0].includeTo===Xe[1].includeTo&&Xe[0].to===Xe[1].to}return}case"decision table":return this.decisionTable(e,t);case"boxed expression":return this.boxedExpression(e,t)}}decisionTable(e,t){let r={};(e?.parameters?.entries??[]).forEach(((e,t)=>{if(e.node==i.NAMED_PARAMETER){let t=e.name?.value??null;["inputs","outputs","rule list"].indexOf(t)>=0&&(r[t]=e.expression?.entries??[]),"hit policy"==t&&(r[t]=this._build(e.expression)??"Unique")}else t<3?r[["inputs","outputs","rule list"][t]]=e.expression?.entries??[]:3==t&&(r["hit policy"]=this._build(e.expression)??"Unique")}));let s=null,n=[];switch(r["rule list"].forEach(((e,s)=>{let o={rule:s,result:!0,output:{}};r.inputs.forEach(((r,s)=>{const n=r.node===i.STRING?new i({node:i.NAME,value:this._build(r)}):r;e.entries[s]?.node===i.LIST?o.result=o.result&&this._build(new i({node:i.IN_LIST,input:n,list:e.entries[s]}),t):o.result=o.result&&this._build(new i({node:i.IN,input:n,test:e.entries[s]}),t)})),r.outputs.forEach(((s,n)=>{let i=this._build(s,t);h.set(o.output,i,this._build(e.entries[r.inputs.length+n],t))})),n.push(o)})),r["hit policy"]){case"U":case"Unique":return n.forEach((e=>{e.result&&(s=null===s?e.output:void 0)})),s;case"A":case"Any":return n.forEach((e=>{e.result&&(s=null===s||s===e.output?e.output:void 0)})),s;case"F":case"First":return n.forEach((e=>{e.result&&(s=e.output)})),s;case"R":case"Rule order":return s=[],n.forEach((e=>{e.result&&s.push(e.output)})),s;case"C":case"Collect":{if(s={},1!==r.outputs.length)return;const e=this._build(r.outputs[0],t);return n.forEach((t=>{t.result&&(s[e]?s[e].push(t.output[e]):s[e]=[t.output[e]])})),s}case"C+":{if(s={},1!==r.outputs.length)return;const e=this._build(r.outputs[0],t);return n.forEach((t=>{t.result&&(s[e]?s[e]+=t.output[e]:s[e]=t.output[e])})),s}case"C<":{if(s={},1!==r.outputs.length)return;const e=this._build(r.outputs[0],t);return n.forEach((t=>{t.result&&(!s[e]||t.output[e]<s[e])&&(s[e]=t.output[e])})),s}case"C>":{if(s={},1!==r.outputs.length)return;const e=this._build(r.outputs[0],t);return n.forEach((t=>{t.result&&(!s[e]||t.output[e]>s[e])&&(s[e]=t.output[e])})),s}case"C#":{if(s={},1!==r.outputs.length)return;const e=this._build(r.outputs[0],t);return s[e]=0,n.forEach((t=>{t.result&&s[e]++})),s}}}boxedExpression(e,t){let r={};return(e?.parameters?.entries??[]).forEach(((e,t)=>{if(e.node==i.NAMED_PARAMETER){let t=e.name?.value??null;["context","expression"].indexOf(t)>=0&&(r[t]=e.expression??[])}else r[["context","expression"][t]]=e??[]})),this._build(r.expression,Object.assign(t||{},this._build(r.context)||{}))}}},184:e=>{"use strict";e.exports={set:function(e,t,r){return Object(e)!==e||(Array.isArray(t)||(t=t.toString().match(/[^.[\]]+/g)||[]),void 0!==r?t.slice(0,-1).reduce(((e,r,s)=>Object(e[r])===e[r]?e[r]:e[r]=Math.abs(t[s+1])>>0==+t[s+1]?[]:{}),e)[t[t.length-1]]=r:delete t.slice(0,-1).reduce(((e,t)=>Object(e[t])===e[t]?e[t]:{}),e)[t[t.length-1]]),e},tsort:function(e){let t={},r=[],s={},n=function(e){this.id=e,this.afters=[]};return e.forEach((e=>{let r=e[0],s=e[1];t[r]||(t[r]=new n(r)),t[s]||(t[s]=new n(s)),t[r].afters.push(s)})),Object.keys(t).forEach((function e(n,i){let o=t[n],a=o.id;s[n]||(Array.isArray(i)||(i=[]),i.push(a),s[n]=!0,o.afters.forEach((function(t){if(i.indexOf(t)>=0)throw new Error("closed chain : "+t+" is in "+a);e(t.toString(),i.map((function(e){return e})))})),r.unshift(a))})),r}}},177:e=>{"use strict";e.exports={Strings:class{static matches({input:e,pattern:t}){if("string"==typeof e&&"string"==typeof t)try{const r=new RegExp(t);return!!e.match(r)}catch(e){return}}static replace({input:e,pattern:t,replacement:r,flags:s}){if("string"==typeof e&&"string"==typeof t&&"string"==typeof r)try{const n=s?new RegExp(t,s):new RegExp(t);return e.replace(n,r)}catch(e){return}}static split({string:e,delimiter:t}){if("string"==typeof e&&"string"==typeof t)try{const r=new RegExp(t);return e.split(r)}catch(e){return}}static extract({string:e,pattern:t}){if("string"==typeof e&&"string"==typeof t)try{const r=new RegExp(t,"g");return[...e.matchAll(r)].flat()}catch(e){return}}}}},776:function(e,t,r){var s;!function(n){"use strict";var i,o,a,l=9e15,u=1e9,c="0123456789abcdef",p="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",m="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",h={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-l,maxE:l,crypto:!1},f=!0,d="[DecimalError] ",b=d+"Invalid argument: ",y=d+"Precision limit exceeded",g=d+"crypto unavailable",v="[object Decimal]",x=Math.floor,w=Math.pow,E=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,_=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,$=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,N=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,T=1e7,A=7,P=p.length-1,S=m.length-1,O={toStringTag:v};function L(e){var t,r,s,n=e.length-1,i="",o=e[0];if(n>0){for(i+=o,t=1;t<n;t++)s=e[t]+"",(r=A-s.length)&&(i+=q(r)),i+=s;o=e[t],(r=A-(s=o+"").length)&&(i+=q(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return i+o}function I(e,t,r){if(e!==~~e||e<t||e>r)throw Error(b+e)}function M(e,t,r,s){var n,i,o,a;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=A,n=0):(n=Math.ceil((t+1)/A),t%=A),i=w(10,A-t),a=e[n]%i|0,null==s?t<3?(0==t?a=a/100|0:1==t&&(a=a/10|0),o=r<4&&99999==a||r>3&&49999==a||5e4==a||0==a):o=(r<4&&a+1==i||r>3&&a+1==i/2)&&(e[n+1]/i/100|0)==w(10,t-2)-1||(a==i/2||0==a)&&0==(e[n+1]/i/100|0):t<4?(0==t?a=a/1e3|0:1==t?a=a/100|0:2==t&&(a=a/10|0),o=(s||r<4)&&9999==a||!s&&r>3&&4999==a):o=((s||r<4)&&a+1==i||!s&&r>3&&a+1==i/2)&&(e[n+1]/i/1e3|0)==w(10,t-3)-1,o}function F(e,t,r){for(var s,n,i=[0],o=0,a=e.length;o<a;){for(n=i.length;n--;)i[n]*=t;for(i[0]+=c.indexOf(e.charAt(o++)),s=0;s<i.length;s++)i[s]>r-1&&(void 0===i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/r|0,i[s]%=r)}return i.reverse()}O.absoluteValue=O.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),R(e)},O.ceil=function(){return R(new this.constructor(this),this.e+1,2)},O.clampedTo=O.clamp=function(e,t){var r=this,s=r.constructor;if(e=new s(e),t=new s(t),!e.s||!t.s)return new s(NaN);if(e.gt(t))throw Error(b+t);return r.cmp(e)<0?e:r.cmp(t)>0?t:new s(r)},O.comparedTo=O.cmp=function(e){var t,r,s,n,i=this,o=i.d,a=(e=new i.constructor(e)).d,l=i.s,u=e.s;if(!o||!a)return l&&u?l!==u?l:o===a?0:!o^l<0?1:-1:NaN;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(i.e!==e.e)return i.e>e.e^l<0?1:-1;for(t=0,r=(s=o.length)<(n=a.length)?s:n;t<r;++t)if(o[t]!==a[t])return o[t]>a[t]^l<0?1:-1;return s===n?0:s>n^l<0?1:-1},O.cosine=O.cos=function(){var e,t,r=this,s=r.constructor;return r.d?r.d[0]?(e=s.precision,t=s.rounding,s.precision=e+Math.max(r.e,r.sd())+A,s.rounding=1,r=function(e,t){var r,s,n;if(t.isZero())return t;(s=t.d.length)<32?n=(1/z(4,r=Math.ceil(s/3))).toString():(r=16,n="2.3283064365386962890625e-10"),e.precision+=r,t=J(e,1,t.times(n),new e(1));for(var i=r;i--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=r,t}(s,K(s,r)),s.precision=e,s.rounding=t,R(2==a||3==a?r.neg():r,e,t,!0)):new s(1):new s(NaN)},O.cubeRoot=O.cbrt=function(){var e,t,r,s,n,i,o,a,l,u,c=this,p=c.constructor;if(!c.isFinite()||c.isZero())return new p(c);for(f=!1,(i=c.s*w(c.s*c,1/3))&&Math.abs(i)!=1/0?s=new p(i.toString()):(r=L(c.d),(i=((e=c.e)-r.length+1)%3)&&(r+=1==i||-2==i?"0":"00"),i=w(r,1/3),e=x((e+1)/3)-(e%3==(e<0?-1:2)),(s=new p(r=i==1/0?"5e"+e:(r=i.toExponential()).slice(0,r.indexOf("e")+1)+e)).s=c.s),o=(e=p.precision)+3;;)if(u=(l=(a=s).times(a).times(a)).plus(c),s=k(u.plus(c).times(a),u.plus(l),o+2,1),L(a.d).slice(0,o)===(r=L(s.d)).slice(0,o)){if("9999"!=(r=r.slice(o-3,o+1))&&(n||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(R(s,e+1,1),t=!s.times(s).times(s).eq(c));break}if(!n&&(R(a,e+1,0),a.times(a).times(a).eq(c))){s=a;break}o+=4,n=1}return f=!0,R(s,e,p.rounding,t)},O.decimalPlaces=O.dp=function(){var e,t=this.d,r=NaN;if(t){if(r=((e=t.length-1)-x(this.e/A))*A,e=t[e])for(;e%10==0;e/=10)r--;r<0&&(r=0)}return r},O.dividedBy=O.div=function(e){return k(this,new this.constructor(e))},O.dividedToIntegerBy=O.divToInt=function(e){var t=this.constructor;return R(k(this,new t(e),0,1,1),t.precision,t.rounding)},O.equals=O.eq=function(e){return 0===this.cmp(e)},O.floor=function(){return R(new this.constructor(this),this.e+1,3)},O.greaterThan=O.gt=function(e){return this.cmp(e)>0},O.greaterThanOrEqualTo=O.gte=function(e){var t=this.cmp(e);return 1==t||0===t},O.hyperbolicCosine=O.cosh=function(){var e,t,r,s,n,i=this,o=i.constructor,a=new o(1);if(!i.isFinite())return new o(i.s?1/0:NaN);if(i.isZero())return a;r=o.precision,s=o.rounding,o.precision=r+Math.max(i.e,i.sd())+4,o.rounding=1,(n=i.d.length)<32?t=(1/z(4,e=Math.ceil(n/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=J(o,1,i.times(t),new o(1),!0);for(var l,u=e,c=new o(8);u--;)l=i.times(i),i=a.minus(l.times(c.minus(l.times(c))));return R(i,o.precision=r,o.rounding=s,!0)},O.hyperbolicSine=O.sinh=function(){var e,t,r,s,n=this,i=n.constructor;if(!n.isFinite()||n.isZero())return new i(n);if(t=i.precision,r=i.rounding,i.precision=t+Math.max(n.e,n.sd())+4,i.rounding=1,(s=n.d.length)<3)n=J(i,2,n,n,!0);else{e=(e=1.4*Math.sqrt(s))>16?16:0|e,n=J(i,2,n=n.times(1/z(5,e)),n,!0);for(var o,a=new i(5),l=new i(16),u=new i(20);e--;)o=n.times(n),n=n.times(a.plus(o.times(l.times(o).plus(u))))}return i.precision=t,i.rounding=r,R(n,t,r,!0)},O.hyperbolicTangent=O.tanh=function(){var e,t,r=this,s=r.constructor;return r.isFinite()?r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+7,s.rounding=1,k(r.sinh(),r.cosh(),s.precision=e,s.rounding=t)):new s(r.s)},O.inverseCosine=O.acos=function(){var e,t=this,r=t.constructor,s=t.abs().cmp(1),n=r.precision,i=r.rounding;return-1!==s?0===s?t.isNeg()?B(r,n,i):new r(0):new r(NaN):t.isZero()?B(r,n+4,i).times(.5):(r.precision=n+6,r.rounding=1,t=t.asin(),e=B(r,n+4,i).times(.5),r.precision=n,r.rounding=i,e.minus(t))},O.inverseHyperbolicCosine=O.acosh=function(){var e,t,r=this,s=r.constructor;return r.lte(1)?new s(r.eq(1)?0:NaN):r.isFinite()?(e=s.precision,t=s.rounding,s.precision=e+Math.max(Math.abs(r.e),r.sd())+4,s.rounding=1,f=!1,r=r.times(r).minus(1).sqrt().plus(r),f=!0,s.precision=e,s.rounding=t,r.ln()):new s(r)},O.inverseHyperbolicSine=O.asinh=function(){var e,t,r=this,s=r.constructor;return!r.isFinite()||r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+2*Math.max(Math.abs(r.e),r.sd())+6,s.rounding=1,f=!1,r=r.times(r).plus(1).sqrt().plus(r),f=!0,s.precision=e,s.rounding=t,r.ln())},O.inverseHyperbolicTangent=O.atanh=function(){var e,t,r,s,n=this,i=n.constructor;return n.isFinite()?n.e>=0?new i(n.abs().eq(1)?n.s/0:n.isZero()?n:NaN):(e=i.precision,t=i.rounding,s=n.sd(),Math.max(s,e)<2*-n.e-1?R(new i(n),e,t,!0):(i.precision=r=s-n.e,n=k(n.plus(1),new i(1).minus(n),r+e,1),i.precision=e+4,i.rounding=1,n=n.ln(),i.precision=e,i.rounding=t,n.times(.5))):new i(NaN)},O.inverseSine=O.asin=function(){var e,t,r,s,n=this,i=n.constructor;return n.isZero()?new i(n):(t=n.abs().cmp(1),r=i.precision,s=i.rounding,-1!==t?0===t?((e=B(i,r+4,s).times(.5)).s=n.s,e):new i(NaN):(i.precision=r+6,i.rounding=1,n=n.div(new i(1).minus(n.times(n)).sqrt().plus(1)).atan(),i.precision=r,i.rounding=s,n.times(2)))},O.inverseTangent=O.atan=function(){var e,t,r,s,n,i,o,a,l,u=this,c=u.constructor,p=c.precision,m=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&p+4<=S)return(o=B(c,p+4,m).times(.25)).s=u.s,o}else{if(!u.s)return new c(NaN);if(p+4<=S)return(o=B(c,p+4,m).times(.5)).s=u.s,o}for(c.precision=a=p+10,c.rounding=1,e=r=Math.min(28,a/A+2|0);e;--e)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(f=!1,t=Math.ceil(a/A),s=1,l=u.times(u),o=new c(u),n=u;-1!==e;)if(n=n.times(l),i=o.minus(n.div(s+=2)),n=n.times(l),void 0!==(o=i.plus(n.div(s+=2))).d[t])for(e=t;o.d[e]===i.d[e]&&e--;);return r&&(o=o.times(2<<r-1)),f=!0,R(o,c.precision=p,c.rounding=m,!0)},O.isFinite=function(){return!!this.d},O.isInteger=O.isInt=function(){return!!this.d&&x(this.e/A)>this.d.length-2},O.isNaN=function(){return!this.s},O.isNegative=O.isNeg=function(){return this.s<0},O.isPositive=O.isPos=function(){return this.s>0},O.isZero=function(){return!!this.d&&0===this.d[0]},O.lessThan=O.lt=function(e){return this.cmp(e)<0},O.lessThanOrEqualTo=O.lte=function(e){return this.cmp(e)<1},O.logarithm=O.log=function(e){var t,r,s,n,i,o,a,l,u=this,c=u.constructor,p=c.precision,m=c.rounding;if(null==e)e=new c(10),t=!0;else{if(r=(e=new c(e)).d,e.s<0||!r||!r[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(r=u.d,u.s<0||!r||!r[0]||u.eq(1))return new c(r&&!r[0]?-1/0:1!=u.s?NaN:r?0:1/0);if(t)if(r.length>1)i=!0;else{for(n=r[0];n%10==0;)n/=10;i=1!==n}if(f=!1,o=Z(u,a=p+5),s=t?U(c,a+10):Z(e,a),M((l=k(o,s,a,1)).d,n=p,m))do{if(o=Z(u,a+=10),s=t?U(c,a+10):Z(e,a),l=k(o,s,a,1),!i){+L(l.d).slice(n+1,n+15)+1==1e14&&(l=R(l,p+1,0));break}}while(M(l.d,n+=10,m));return f=!0,R(l,p,m)},O.minus=O.sub=function(e){var t,r,s,n,i,o,a,l,u,c,p,m,h=this,d=h.constructor;if(e=new d(e),!h.d||!e.d)return h.s&&e.s?h.d?e.s=-e.s:e=new d(e.d||h.s!==e.s?h:NaN):e=new d(NaN),e;if(h.s!=e.s)return e.s=-e.s,h.plus(e);if(u=h.d,m=e.d,a=d.precision,l=d.rounding,!u[0]||!m[0]){if(m[0])e.s=-e.s;else{if(!u[0])return new d(3===l?-0:0);e=new d(h)}return f?R(e,a,l):e}if(r=x(e.e/A),c=x(h.e/A),u=u.slice(),i=c-r){for((p=i<0)?(t=u,i=-i,o=m.length):(t=m,r=c,o=u.length),i>(s=Math.max(Math.ceil(a/A),o)+2)&&(i=s,t.length=1),t.reverse(),s=i;s--;)t.push(0);t.reverse()}else{for((p=(s=u.length)<(o=m.length))&&(o=s),s=0;s<o;s++)if(u[s]!=m[s]){p=u[s]<m[s];break}i=0}for(p&&(t=u,u=m,m=t,e.s=-e.s),o=u.length,s=m.length-o;s>0;--s)u[o++]=0;for(s=m.length;s>i;){if(u[--s]<m[s]){for(n=s;n&&0===u[--n];)u[n]=T-1;--u[n],u[s]+=T}u[s]-=m[s]}for(;0===u[--o];)u.pop();for(;0===u[0];u.shift())--r;return u[0]?(e.d=u,e.e=D(u,r),f?R(e,a,l):e):new d(3===l?-0:0)},O.modulo=O.mod=function(e){var t,r=this,s=r.constructor;return e=new s(e),!r.d||!e.s||e.d&&!e.d[0]?new s(NaN):!e.d||r.d&&!r.d[0]?R(new s(r),s.precision,s.rounding):(f=!1,9==s.modulo?(t=k(r,e.abs(),0,3,1)).s*=e.s:t=k(r,e,0,s.modulo,1),t=t.times(e),f=!0,r.minus(t))},O.naturalExponential=O.exp=function(){return X(this)},O.naturalLogarithm=O.ln=function(){return Z(this)},O.negated=O.neg=function(){var e=new this.constructor(this);return e.s=-e.s,R(e)},O.plus=O.add=function(e){var t,r,s,n,i,o,a,l,u,c,p=this,m=p.constructor;if(e=new m(e),!p.d||!e.d)return p.s&&e.s?p.d||(e=new m(e.d||p.s===e.s?p:NaN)):e=new m(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.minus(e);if(u=p.d,c=e.d,a=m.precision,l=m.rounding,!u[0]||!c[0])return c[0]||(e=new m(p)),f?R(e,a,l):e;if(i=x(p.e/A),s=x(e.e/A),u=u.slice(),n=i-s){for(n<0?(r=u,n=-n,o=c.length):(r=c,s=i,o=u.length),n>(o=(i=Math.ceil(a/A))>o?i+1:o+1)&&(n=o,r.length=1),r.reverse();n--;)r.push(0);r.reverse()}for((o=u.length)-(n=c.length)<0&&(n=o,r=c,c=u,u=r),t=0;n;)t=(u[--n]=u[n]+c[n]+t)/T|0,u[n]%=T;for(t&&(u.unshift(t),++s),o=u.length;0==u[--o];)u.pop();return e.d=u,e.e=D(u,s),f?R(e,a,l):e},O.precision=O.sd=function(e){var t,r=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(b+e);return r.d?(t=j(r.d),e&&r.e+1>t&&(t=r.e+1)):t=NaN,t},O.round=function(){var e=this,t=e.constructor;return R(new t(e),e.e+1,t.rounding)},O.sine=O.sin=function(){var e,t,r=this,s=r.constructor;return r.isFinite()?r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+Math.max(r.e,r.sd())+A,s.rounding=1,r=function(e,t){var r,s=t.d.length;if(s<3)return t.isZero()?t:J(e,2,t,t);r=(r=1.4*Math.sqrt(s))>16?16:0|r,t=J(e,2,t=t.times(1/z(5,r)),t);for(var n,i=new e(5),o=new e(16),a=new e(20);r--;)n=t.times(t),t=t.times(i.plus(n.times(o.times(n).minus(a))));return t}(s,K(s,r)),s.precision=e,s.rounding=t,R(a>2?r.neg():r,e,t,!0)):new s(NaN)},O.squareRoot=O.sqrt=function(){var e,t,r,s,n,i,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(1!==u||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(f=!1,0==(u=Math.sqrt(+o))||u==1/0?(((t=L(a)).length+l)%2==0&&(t+="0"),u=Math.sqrt(t),l=x((l+1)/2)-(l<0||l%2),s=new c(t=u==1/0?"5e"+l:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+l)):s=new c(u.toString()),r=(l=c.precision)+3;;)if(s=(i=s).plus(k(o,i,r+2,1)).times(.5),L(i.d).slice(0,r)===(t=L(s.d)).slice(0,r)){if("9999"!=(t=t.slice(r-3,r+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(R(s,l+1,1),e=!s.times(s).eq(o));break}if(!n&&(R(i,l+1,0),i.times(i).eq(o))){s=i;break}r+=4,n=1}return f=!0,R(s,l,c.rounding,e)},O.tangent=O.tan=function(){var e,t,r=this,s=r.constructor;return r.isFinite()?r.isZero()?new s(r):(e=s.precision,t=s.rounding,s.precision=e+10,s.rounding=1,(r=r.sin()).s=1,r=k(r,new s(1).minus(r.times(r)).sqrt(),e+10,0),s.precision=e,s.rounding=t,R(2==a||4==a?r.neg():r,e,t,!0)):new s(NaN)},O.times=O.mul=function(e){var t,r,s,n,i,o,a,l,u,c=this,p=c.constructor,m=c.d,h=(e=new p(e)).d;if(e.s*=c.s,!(m&&m[0]&&h&&h[0]))return new p(!e.s||m&&!m[0]&&!h||h&&!h[0]&&!m?NaN:m&&h?0*e.s:e.s/0);for(r=x(c.e/A)+x(e.e/A),(l=m.length)<(u=h.length)&&(i=m,m=h,h=i,o=l,l=u,u=o),i=[],s=o=l+u;s--;)i.push(0);for(s=u;--s>=0;){for(t=0,n=l+s;n>s;)a=i[n]+h[s]*m[n-s-1]+t,i[n--]=a%T|0,t=a/T|0;i[n]=(i[n]+t)%T|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=D(i,r),f?R(e,p.precision,p.rounding):e},O.toBinary=function(e,t){return ee(this,2,e,t)},O.toDecimalPlaces=O.toDP=function(e,t){var r=this,s=r.constructor;return r=new s(r),void 0===e?r:(I(e,0,u),void 0===t?t=s.rounding:I(t,0,8),R(r,e+r.e+1,t))},O.toExponential=function(e,t){var r,s=this,n=s.constructor;return void 0===e?r=C(s,!0):(I(e,0,u),void 0===t?t=n.rounding:I(t,0,8),r=C(s=R(new n(s),e+1,t),!0,e+1)),s.isNeg()&&!s.isZero()?"-"+r:r},O.toFixed=function(e,t){var r,s,n=this,i=n.constructor;return void 0===e?r=C(n):(I(e,0,u),void 0===t?t=i.rounding:I(t,0,8),r=C(s=R(new i(n),e+n.e+1,t),!1,e+s.e+1)),n.isNeg()&&!n.isZero()?"-"+r:r},O.toFraction=function(e){var t,r,s,n,i,o,a,l,u,c,p,m,h=this,d=h.d,y=h.constructor;if(!d)return new y(h);if(u=r=new y(1),s=l=new y(0),o=(i=(t=new y(s)).e=j(d)-h.e-1)%A,t.d[0]=w(10,o<0?A+o:o),null==e)e=i>0?t:u;else{if(!(a=new y(e)).isInt()||a.lt(u))throw Error(b+a);e=a.gt(t)?i>0?t:u:a}for(f=!1,a=new y(L(d)),c=y.precision,y.precision=i=d.length*A*2;p=k(a,t,0,1,1),1!=(n=r.plus(p.times(s))).cmp(e);)r=s,s=n,n=u,u=l.plus(p.times(n)),l=n,n=t,t=a.minus(p.times(n)),a=n;return n=k(e.minus(r),s,0,1,1),l=l.plus(n.times(u)),r=r.plus(n.times(s)),l.s=u.s=h.s,m=k(u,s,i,1).minus(h).abs().cmp(k(l,r,i,1).minus(h).abs())<1?[u,s]:[l,r],y.precision=c,f=!0,m},O.toHexadecimal=O.toHex=function(e,t){return ee(this,16,e,t)},O.toNearest=function(e,t){var r=this,s=r.constructor;if(r=new s(r),null==e){if(!r.d)return r;e=new s(1),t=s.rounding}else{if(e=new s(e),void 0===t?t=s.rounding:I(t,0,8),!r.d)return e.s?r:e;if(!e.d)return e.s&&(e.s=r.s),e}return e.d[0]?(f=!1,r=k(r,e,0,t,1).times(e),f=!0,R(r)):(e.s=r.s,r=e),r},O.toNumber=function(){return+this},O.toOctal=function(e,t){return ee(this,8,e,t)},O.toPower=O.pow=function(e){var t,r,s,n,i,o,a=this,l=a.constructor,u=+(e=new l(e));if(!(a.d&&e.d&&a.d[0]&&e.d[0]))return new l(w(+a,u));if((a=new l(a)).eq(1))return a;if(s=l.precision,i=l.rounding,e.eq(1))return R(a,s,i);if((t=x(e.e/A))>=e.d.length-1&&(r=u<0?-u:u)<=9007199254740991)return n=Y(l,a,r,s),e.s<0?new l(1).div(n):R(n,s,i);if((o=a.s)<0){if(t<e.d.length-1)return new l(NaN);if(0==(1&e.d[t])&&(o=1),0==a.e&&1==a.d[0]&&1==a.d.length)return a.s=o,a}return(t=0!=(r=w(+a,u))&&isFinite(r)?new l(r+"").e:x(u*(Math.log("0."+L(a.d))/Math.LN10+a.e+1)))>l.maxE+1||t<l.minE-1?new l(t>0?o/0:0):(f=!1,l.rounding=a.s=1,r=Math.min(12,(t+"").length),(n=X(e.times(Z(a,s+r)),s)).d&&M((n=R(n,s+5,1)).d,s,i)&&(t=s+10,+L((n=R(X(e.times(Z(a,t+r)),t),t+5,1)).d).slice(s+1,s+15)+1==1e14&&(n=R(n,s+1,0))),n.s=o,f=!0,l.rounding=i,R(n,s,i))},O.toPrecision=function(e,t){var r,s=this,n=s.constructor;return void 0===e?r=C(s,s.e<=n.toExpNeg||s.e>=n.toExpPos):(I(e,1,u),void 0===t?t=n.rounding:I(t,0,8),r=C(s=R(new n(s),e,t),e<=s.e||s.e<=n.toExpNeg,e)),s.isNeg()&&!s.isZero()?"-"+r:r},O.toSignificantDigits=O.toSD=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(I(e,1,u),void 0===t?t=r.rounding:I(t,0,8)),R(new r(this),e,t)},O.toString=function(){var e=this,t=e.constructor,r=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+r:r},O.truncated=O.trunc=function(){return R(new this.constructor(this),this.e+1,1)},O.valueOf=O.toJSON=function(){var e=this,t=e.constructor,r=C(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+r:r};var k=function(){function e(e,t,r){var s,n=0,i=e.length;for(e=e.slice();i--;)s=e[i]*t+n,e[i]=s%r|0,n=s/r|0;return n&&e.unshift(n),e}function t(e,t,r,s){var n,i;if(r!=s)i=r>s?1:-1;else for(n=i=0;n<r;n++)if(e[n]!=t[n]){i=e[n]>t[n]?1:-1;break}return i}function r(e,t,r,s){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*s+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(s,n,i,a,l,u){var c,p,m,h,f,d,b,y,g,v,w,E,_,$,N,P,S,O,L,I,M=s.constructor,F=s.s==n.s?1:-1,k=s.d,C=n.d;if(!(k&&k[0]&&C&&C[0]))return new M(s.s&&n.s&&(k?!C||k[0]!=C[0]:C)?k&&0==k[0]||!C?0*F:F/0:NaN);for(u?(f=1,p=s.e-n.e):(u=T,f=A,p=x(s.e/f)-x(n.e/f)),L=C.length,S=k.length,v=(g=new M(F)).d=[],m=0;C[m]==(k[m]||0);m++);if(C[m]>(k[m]||0)&&p--,null==i?($=i=M.precision,a=M.rounding):$=l?i+(s.e-n.e)+1:i,$<0)v.push(1),d=!0;else{if($=$/f+2|0,m=0,1==L){for(h=0,C=C[0],$++;(m<S||h)&&$--;m++)N=h*u+(k[m]||0),v[m]=N/C|0,h=N%C|0;d=h||m<S}else{for((h=u/(C[0]+1)|0)>1&&(C=e(C,h,u),k=e(k,h,u),L=C.length,S=k.length),P=L,E=(w=k.slice(0,L)).length;E<L;)w[E++]=0;(I=C.slice()).unshift(0),O=C[0],C[1]>=u/2&&++O;do{h=0,(c=t(C,w,L,E))<0?(_=w[0],L!=E&&(_=_*u+(w[1]||0)),(h=_/O|0)>1?(h>=u&&(h=u-1),1==(c=t(b=e(C,h,u),w,y=b.length,E=w.length))&&(h--,r(b,L<y?I:C,y,u))):(0==h&&(c=h=1),b=C.slice()),(y=b.length)<E&&b.unshift(0),r(w,b,E,u),-1==c&&(c=t(C,w,L,E=w.length))<1&&(h++,r(w,L<E?I:C,E,u)),E=w.length):0===c&&(h++,w=[0]),v[m++]=h,c&&w[0]?w[E++]=k[P]||0:(w=[k[P]],E=1)}while((P++<S||void 0!==w[0])&&$--);d=void 0!==w[0]}v[0]||v.shift()}if(1==f)g.e=p,o=d;else{for(m=1,h=v[0];h>=10;h/=10)m++;g.e=m+p*f-1,R(g,l?i+g.e+1:i,a,d)}return g}}();function R(e,t,r,s){var n,i,o,a,l,u,c,p,m,h=e.constructor;e:if(null!=t){if(!(p=e.d))return e;for(n=1,a=p[0];a>=10;a/=10)n++;if((i=t-n)<0)i+=A,o=t,l=(c=p[m=0])/w(10,n-o-1)%10|0;else if((m=Math.ceil((i+1)/A))>=(a=p.length)){if(!s)break e;for(;a++<=m;)p.push(0);c=l=0,n=1,o=(i%=A)-A+1}else{for(c=a=p[m],n=1;a>=10;a/=10)n++;l=(o=(i%=A)-A+n)<0?0:c/w(10,n-o-1)%10|0}if(s=s||t<0||void 0!==p[m+1]||(o<0?c:c%w(10,n-o-1)),u=r<4?(l||s)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||s||6==r&&(i>0?o>0?c/w(10,n-o):0:p[m-1])%10&1||r==(e.s<0?8:7)),t<1||!p[0])return p.length=0,u?(t-=e.e+1,p[0]=w(10,(A-t%A)%A),e.e=-t||0):p[0]=e.e=0,e;if(0==i?(p.length=m,a=1,m--):(p.length=m+1,a=w(10,A-i),p[m]=o>0?(c/w(10,n-o)%w(10,o)|0)*a:0),u)for(;;){if(0==m){for(i=1,o=p[0];o>=10;o/=10)i++;for(o=p[0]+=a,a=1;o>=10;o/=10)a++;i!=a&&(e.e++,p[0]==T&&(p[0]=1));break}if(p[m]+=a,p[m]!=T)break;p[m--]=0,a=1}for(i=p.length;0===p[--i];)p.pop()}return f&&(e.e>h.maxE?(e.d=null,e.e=NaN):e.e<h.minE&&(e.e=0,e.d=[0])),e}function C(e,t,r){if(!e.isFinite())return V(e);var s,n=e.e,i=L(e.d),o=i.length;return t?(r&&(s=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+q(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):n<0?(i="0."+q(-n-1)+i,r&&(s=r-o)>0&&(i+=q(s))):n>=o?(i+=q(n+1-o),r&&(s=r-n-1)>0&&(i=i+"."+q(s))):((s=n+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),r&&(s=r-o)>0&&(n+1===o&&(i+="."),i+=q(s))),i}function D(e,t){var r=e[0];for(t*=A;r>=10;r/=10)t++;return t}function U(e,t,r){if(t>P)throw f=!0,r&&(e.precision=r),Error(y);return R(new e(p),t,1,!0)}function B(e,t,r){if(t>S)throw Error(y);return R(new e(m),t,r,!0)}function j(e){var t=e.length-1,r=t*A+1;if(t=e[t]){for(;t%10==0;t/=10)r--;for(t=e[0];t>=10;t/=10)r++}return r}function q(e){for(var t="";e--;)t+="0";return t}function Y(e,t,r,s){var n,i=new e(1),o=Math.ceil(s/A+4);for(f=!1;;){if(r%2&&te((i=i.times(t)).d,o)&&(n=!0),0===(r=x(r/2))){r=i.d.length-1,n&&0===i.d[r]&&++i.d[r];break}te((t=t.times(t)).d,o)}return f=!0,i}function H(e){return 1&e.d[e.d.length-1]}function G(e,t,r){for(var s,n=new e(t[0]),i=0;++i<t.length;){if(!(s=new e(t[i])).s){n=s;break}n[r](s)&&(n=s)}return n}function X(e,t){var r,s,n,i,o,a,l,u=0,c=0,p=0,m=e.constructor,h=m.rounding,d=m.precision;if(!e.d||!e.d[0]||e.e>17)return new m(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(f=!1,l=d):l=t,a=new m(.03125);e.e>-2;)e=e.times(a),p+=5;for(l+=s=Math.log(w(2,p))/Math.LN10*2+5|0,r=i=o=new m(1),m.precision=l;;){if(i=R(i.times(e),l,1),r=r.times(++c),L((a=o.plus(k(i,r,l,1))).d).slice(0,l)===L(o.d).slice(0,l)){for(n=p;n--;)o=R(o.times(o),l,1);if(null!=t)return m.precision=d,o;if(!(u<3&&M(o.d,l-s,h,u)))return R(o,m.precision=d,h,f=!0);m.precision=l+=10,r=i=a=new m(1),c=0,u++}o=a}}function Z(e,t){var r,s,n,i,o,a,l,u,c,p,m,h=1,d=e,b=d.d,y=d.constructor,g=y.rounding,v=y.precision;if(d.s<0||!b||!b[0]||!d.e&&1==b[0]&&1==b.length)return new y(b&&!b[0]?-1/0:1!=d.s?NaN:b?0:d);if(null==t?(f=!1,c=v):c=t,y.precision=c+=10,s=(r=L(b)).charAt(0),!(Math.abs(i=d.e)<15e14))return u=U(y,c+2,v).times(i+""),d=Z(new y(s+"."+r.slice(1)),c-10).plus(u),y.precision=v,null==t?R(d,v,g,f=!0):d;for(;s<7&&1!=s||1==s&&r.charAt(1)>3;)s=(r=L((d=d.times(e)).d)).charAt(0),h++;for(i=d.e,s>1?(d=new y("0."+r),i++):d=new y(s+"."+r.slice(1)),p=d,l=o=d=k(d.minus(1),d.plus(1),c,1),m=R(d.times(d),c,1),n=3;;){if(o=R(o.times(m),c,1),L((u=l.plus(k(o,new y(n),c,1))).d).slice(0,c)===L(l.d).slice(0,c)){if(l=l.times(2),0!==i&&(l=l.plus(U(y,c+2,v).times(i+""))),l=k(l,new y(h),c,1),null!=t)return y.precision=v,l;if(!M(l.d,c-10,g,a))return R(l,y.precision=v,g,f=!0);y.precision=c+=10,u=o=d=k(p.minus(1),p.plus(1),c,1),m=R(d.times(d),c,1),n=a=1}l=u,n+=2}}function V(e){return String(e.s*e.s/0)}function W(e,t){var r,s,n;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(r<0&&(r=s),r+=+t.slice(s+1),t=t.substring(0,s)):r<0&&(r=t.length),s=0;48===t.charCodeAt(s);s++);for(n=t.length;48===t.charCodeAt(n-1);--n);if(t=t.slice(s,n)){if(n-=s,e.e=r=r-s-1,e.d=[],s=(r+1)%A,r<0&&(s+=A),s<n){for(s&&e.d.push(+t.slice(0,s)),n-=A;s<n;)e.d.push(+t.slice(s,s+=A));t=t.slice(s),s=A-t.length}else s-=n;for(;s--;)t+="0";e.d.push(+t),f&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Q(e,t){var r,s,n,o,a,l,u,c,p;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),N.test(t))return W(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(_.test(t))r=16,t=t.toLowerCase();else if(E.test(t))r=2;else{if(!$.test(t))throw Error(b+t);r=8}for((o=t.search(/p/i))>0?(u=+t.slice(o+1),t=t.substring(2,o)):t=t.slice(2),a=(o=t.indexOf("."))>=0,s=e.constructor,a&&(o=(l=(t=t.replace(".","")).length)-o,n=Y(s,new s(r),o,2*o)),o=p=(c=F(t,r,T)).length-1;0===c[o];--o)c.pop();return o<0?new s(0*e.s):(e.e=D(c,p),e.d=c,f=!1,a&&(e=k(e,n,4*l)),u&&(e=e.times(Math.abs(u)<54?w(2,u):i.pow(2,u))),f=!0,e)}function J(e,t,r,s,n){var i,o,a,l,u=e.precision,c=Math.ceil(u/A);for(f=!1,l=r.times(r),a=new e(s);;){if(o=k(a.times(l),new e(t++*t++),u,1),a=n?s.plus(o):s.minus(o),s=k(o.times(l),new e(t++*t++),u,1),void 0!==(o=a.plus(s)).d[c]){for(i=c;o.d[i]===a.d[i]&&i--;);if(-1==i)break}i=a,a=s,s=o,o=i}return f=!0,o.d.length=c+1,o}function z(e,t){for(var r=e;--t;)r*=e;return r}function K(e,t){var r,s=t.s<0,n=B(e,e.precision,1),i=n.times(.5);if((t=t.abs()).lte(i))return a=s?4:1,t;if((r=t.divToInt(n)).isZero())a=s?3:2;else{if((t=t.minus(r.times(n))).lte(i))return a=H(r)?s?2:3:s?4:1,t;a=H(r)?s?1:4:s?3:2}return t.minus(n).abs()}function ee(e,t,r,s){var n,i,a,l,p,m,h,f,d,b=e.constructor,y=void 0!==r;if(y?(I(r,1,u),void 0===s?s=b.rounding:I(s,0,8)):(r=b.precision,s=b.rounding),e.isFinite()){for(y?(n=2,16==t?r=4*r-3:8==t&&(r=3*r-2)):n=t,(a=(h=C(e)).indexOf("."))>=0&&(h=h.replace(".",""),(d=new b(1)).e=h.length-a,d.d=F(C(d),10,n),d.e=d.d.length),i=p=(f=F(h,10,n)).length;0==f[--p];)f.pop();if(f[0]){if(a<0?i--:((e=new b(e)).d=f,e.e=i,f=(e=k(e,d,r,s,0,n)).d,i=e.e,m=o),a=f[r],l=n/2,m=m||void 0!==f[r+1],m=s<4?(void 0!==a||m)&&(0===s||s===(e.s<0?3:2)):a>l||a===l&&(4===s||m||6===s&&1&f[r-1]||s===(e.s<0?8:7)),f.length=r,m)for(;++f[--r]>n-1;)f[r]=0,r||(++i,f.unshift(1));for(p=f.length;!f[p-1];--p);for(a=0,h="";a<p;a++)h+=c.charAt(f[a]);if(y){if(p>1)if(16==t||8==t){for(a=16==t?4:3,--p;p%a;p++)h+="0";for(p=(f=F(h,n,t)).length;!f[p-1];--p);for(a=1,h="1.";a<p;a++)h+=c.charAt(f[a])}else h=h.charAt(0)+"."+h.slice(1);h=h+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)h="0"+h;h="0."+h}else if(++i>p)for(i-=p;i--;)h+="0";else i<p&&(h=h.slice(0,i)+"."+h.slice(i))}else h=y?"0p+0":"0";h=(16==t?"0x":2==t?"0b":8==t?"0o":"")+h}else h=V(e);return e.s<0?"-"+h:h}function te(e,t){if(e.length>t)return e.length=t,!0}function re(e){return new this(e).abs()}function se(e){return new this(e).acos()}function ne(e){return new this(e).acosh()}function ie(e,t){return new this(e).plus(t)}function oe(e){return new this(e).asin()}function ae(e){return new this(e).asinh()}function le(e){return new this(e).atan()}function ue(e){return new this(e).atanh()}function ce(e,t){e=new this(e),t=new this(t);var r,s=this.precision,n=this.rounding,i=s+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(r=t.s<0?B(this,s,n):new this(0)).s=e.s:!e.d||t.isZero()?(r=B(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,r=this.atan(k(e,t,i,1)),t=B(this,i,1),this.precision=s,this.rounding=n,r=e.s<0?r.minus(t):r.plus(t)):r=this.atan(k(e,t,i,1)):(r=B(this,i,1).times(t.s>0?.25:.75)).s=e.s:r=new this(NaN),r}function pe(e){return new this(e).cbrt()}function me(e){return R(e=new this(e),e.e+1,2)}function he(e,t,r){return new this(e).clamp(t,r)}function fe(e){if(!e||"object"!=typeof e)throw Error(d+"Object expected");var t,r,s,n=!0===e.defaults,i=["precision",1,u,"rounding",0,8,"toExpNeg",-l,0,"toExpPos",0,l,"maxE",0,l,"minE",-l,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(r=i[t],n&&(this[r]=h[r]),void 0!==(s=e[r])){if(!(x(s)===s&&s>=i[t+1]&&s<=i[t+2]))throw Error(b+r+": "+s);this[r]=s}if(r="crypto",n&&(this[r]=h[r]),void 0!==(s=e[r])){if(!0!==s&&!1!==s&&0!==s&&1!==s)throw Error(b+r+": "+s);if(s){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(g);this[r]=!0}else this[r]=!1}return this}function de(e){return new this(e).cos()}function be(e){return new this(e).cosh()}function ye(e,t){return new this(e).div(t)}function ge(e){return new this(e).exp()}function ve(e){return R(e=new this(e),e.e+1,3)}function xe(){var e,t,r=new this(0);for(f=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)r.d&&(r=r.plus(t.times(t)));else{if(t.s)return f=!0,new this(1/0);r=t}return f=!0,r.sqrt()}function we(e){return e instanceof i||e&&e.toStringTag===v||!1}function Ee(e){return new this(e).ln()}function _e(e,t){return new this(e).log(t)}function $e(e){return new this(e).log(2)}function Ne(e){return new this(e).log(10)}function Te(){return G(this,arguments,"lt")}function Ae(){return G(this,arguments,"gt")}function Pe(e,t){return new this(e).mod(t)}function Se(e,t){return new this(e).mul(t)}function Oe(e,t){return new this(e).pow(t)}function Le(e){var t,r,s,n,i=0,o=new this(1),a=[];if(void 0===e?e=this.precision:I(e,1,u),s=Math.ceil(e/A),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(s));i<s;)(n=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:a[i++]=n%1e7;else{if(!crypto.randomBytes)throw Error(g);for(t=crypto.randomBytes(s*=4);i<s;)(n=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(a.push(n%1e7),i+=4);i=s/4}else for(;i<s;)a[i++]=1e7*Math.random()|0;for(s=a[--i],e%=A,s&&e&&(n=w(10,A-e),a[i]=(s/n|0)*n);0===a[i];i--)a.pop();if(i<0)r=0,a=[0];else{for(r=-1;0===a[0];r-=A)a.shift();for(s=1,n=a[0];n>=10;n/=10)s++;s<A&&(r-=A-s)}return o.e=r,o.d=a,o}function Ie(e){return R(e=new this(e),e.e+1,this.rounding)}function Me(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Fe(e){return new this(e).sin()}function ke(e){return new this(e).sinh()}function Re(e){return new this(e).sqrt()}function Ce(e,t){return new this(e).sub(t)}function De(){var e=0,t=arguments,r=new this(t[e]);for(f=!1;r.s&&++e<t.length;)r=r.plus(t[e]);return f=!0,R(r,this.precision,this.rounding)}function Ue(e){return new this(e).tan()}function Be(e){return new this(e).tanh()}function je(e){return R(e=new this(e),e.e+1,1)}(i=function e(t){var r,s,n;function i(e){var t,r,s,n=this;if(!(n instanceof i))return new i(e);if(n.constructor=i,we(e))return n.s=e.s,void(f?!e.d||e.e>i.maxE?(n.e=NaN,n.d=null):e.e<i.minE?(n.e=0,n.d=[0]):(n.e=e.e,n.d=e.d.slice()):(n.e=e.e,n.d=e.d?e.d.slice():e.d));if("number"==(s=typeof e)){if(0===e)return n.s=1/e<0?-1:1,n.e=0,void(n.d=[0]);if(e<0?(e=-e,n.s=-1):n.s=1,e===~~e&&e<1e7){for(t=0,r=e;r>=10;r/=10)t++;return void(f?t>i.maxE?(n.e=NaN,n.d=null):t<i.minE?(n.e=0,n.d=[0]):(n.e=t,n.d=[e]):(n.e=t,n.d=[e]))}return 0*e!=0?(e||(n.s=NaN),n.e=NaN,void(n.d=null)):W(n,e.toString())}if("string"!==s)throw Error(b+e);return 45===(r=e.charCodeAt(0))?(e=e.slice(1),n.s=-1):(43===r&&(e=e.slice(1)),n.s=1),N.test(e)?W(n,e):Q(n,e)}if(i.prototype=O,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=fe,i.clone=e,i.isDecimal=we,i.abs=re,i.acos=se,i.acosh=ne,i.add=ie,i.asin=oe,i.asinh=ae,i.atan=le,i.atanh=ue,i.atan2=ce,i.cbrt=pe,i.ceil=me,i.clamp=he,i.cos=de,i.cosh=be,i.div=ye,i.exp=ge,i.floor=ve,i.hypot=xe,i.ln=Ee,i.log=_e,i.log10=Ne,i.log2=$e,i.max=Te,i.min=Ae,i.mod=Pe,i.mul=Se,i.pow=Oe,i.random=Le,i.round=Ie,i.sign=Me,i.sin=Fe,i.sinh=ke,i.sqrt=Re,i.sub=Ce,i.sum=De,i.tan=Ue,i.tanh=Be,i.trunc=je,void 0===t&&(t={}),t&&!0!==t.defaults)for(n=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],r=0;r<n.length;)t.hasOwnProperty(s=n[r++])||(t[s]=this[s]);return i.config(t),i}(h)).prototype.constructor=i,i.default=i.Decimal=i,p=new i(p),m=new i(m),void 0===(s=function(){return i}.call(t,r,t,e))||(e.exports=s)}()},271:function(e,t){var r,s;void 0===(s="function"==typeof(r=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,r="boolean"==typeof(new RegExp).sticky;function s(e){return e&&"[object RegExp]"===t.call(e)}function n(e){return e&&"object"==typeof e&&!s(e)&&!Array.isArray(e)}function i(e){return"("+e+")"}function o(e){return e.length?"(?:"+e.map((function(e){return"(?:"+e+")"})).join("|")+")":"(?!)"}function a(e){if("string"==typeof e)return"(?:"+(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")+")");if(s(e)){if(e.ignoreCase)throw new Error("RegExp /i flag not allowed");if(e.global)throw new Error("RegExp /g flag is implied");if(e.sticky)throw new Error("RegExp /y flag is implied");if(e.multiline)throw new Error("RegExp /m flag is implied");return e.source}throw new Error("Not a pattern: "+e)}function l(t,r){if(n(r)||(r={match:r}),r.include)throw new Error("Matching rules cannot also include states");var i={defaultType:t,lineBreaks:!!r.error||!!r.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var o in r)e.call(r,o)&&(i[o]=r[o]);if("string"==typeof i.type&&t!==i.type)throw new Error("Type transform cannot be a string (type '"+i.type+"' for token '"+t+"')");var a=i.match;return i.match=Array.isArray(a)?a:a?[a]:[],i.match.sort((function(e,t){return s(e)&&s(t)?0:s(t)?-1:s(e)?1:t.length-e.length})),i}function u(e){return Array.isArray(e)?function(e){for(var t=[],r=0;r<e.length;r++){var s=e[r];if(s.include)for(var n=[].concat(s.include),i=0;i<n.length;i++)t.push({include:n[i]});else{if(!s.type)throw new Error("Rule has no type: "+JSON.stringify(s));t.push(l(s.type,s))}}return t}(e):function(e){for(var t=Object.getOwnPropertyNames(e),r=[],s=0;s<t.length;s++){var i=t[s],o=e[i],a=[].concat(o);if("include"!==i){var u=[];a.forEach((function(e){n(e)?(u.length&&r.push(l(i,u)),r.push(l(i,e)),u=[]):u.push(e)})),u.length&&r.push(l(i,u))}else for(var c=0;c<a.length;c++)r.push({include:a[c]})}return r}(e)}var c=l("error",{lineBreaks:!0,shouldThrow:!0});function p(e,t){for(var n=null,l=Object.create(null),u=!0,p=null,m=[],h=[],f=0;f<e.length;f++)e[f].fallback&&(u=!1);for(f=0;f<e.length;f++){var d=e[f];if(d.include)throw new Error("Inheritance is not allowed in stateless lexers");if(d.error||d.fallback){if(n)throw!d.fallback==!n.fallback?new Error("Multiple "+(d.fallback?"fallback":"error")+" rules not allowed (for token '"+d.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+d.defaultType+"')");n=d}var b=d.match.slice();if(u)for(;b.length&&"string"==typeof b[0]&&1===b[0].length;)l[b.shift().charCodeAt(0)]=d;if(d.pop||d.push||d.next){if(!t)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+d.defaultType+"')");if(d.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+d.defaultType+"')")}if(0!==b.length){u=!1,m.push(d);for(var y=0;y<b.length;y++){var g=b[y];if(s(g))if(null===p)p=g.unicode;else if(p!==g.unicode&&!1===d.fallback)throw new Error("If one rule is /u then all must be")}var v=o(b.map(a)),x=new RegExp(v);if(x.test(""))throw new Error("RegExp matches empty string: "+x);if(new RegExp("|"+v).exec("").length-1>0)throw new Error("RegExp has capture groups: "+x+"\nUse (?: … ) instead");if(!d.lineBreaks&&x.test("\n"))throw new Error("Rule should declare lineBreaks: "+x);h.push(i(v))}}var w=n&&n.fallback,E=r&&!w?"ym":"gm",_=r||w?"":"|";return!0===p&&(E+="u"),{regexp:new RegExp(o(h)+_,E),groups:m,fast:l,error:n||c}}function m(e,t,r){var s=e&&(e.push||e.next);if(s&&!r[s])throw new Error("Missing state '"+s+"' (in token '"+e.defaultType+"' of state '"+t+"')");if(e&&e.pop&&1!=+e.pop)throw new Error("pop must be 1 (in token '"+e.defaultType+"' of state '"+t+"')")}var h=function(e,t){this.startState=t,this.states=e,this.buffer="",this.stack=[],this.reset()};h.prototype.reset=function(e,t){return this.buffer=e||"",this.index=0,this.line=t?t.line:1,this.col=t?t.col:1,this.queuedToken=t?t.queuedToken:null,this.queuedThrow=t?t.queuedThrow:null,this.setState(t?t.state:this.startState),this.stack=t&&t.stack?t.stack.slice():[],this},h.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedThrow:this.queuedThrow}},h.prototype.setState=function(e){if(e&&this.state!==e){this.state=e;var t=this.states[e];this.groups=t.groups,this.error=t.error,this.re=t.regexp,this.fast=t.fast}},h.prototype.popState=function(){this.setState(this.stack.pop())},h.prototype.pushState=function(e){this.stack.push(this.state),this.setState(e)};var f=r?function(e,t){return e.exec(t)}:function(e,t){var r=e.exec(t);return 0===r[0].length?null:r};function d(){return this.value}if(h.prototype._getGroup=function(e){for(var t=this.groups.length,r=0;r<t;r++)if(void 0!==e[r+1])return this.groups[r];throw new Error("Cannot find token type for matched text")},h.prototype.next=function(){var e=this.index;if(this.queuedGroup){var t=this._token(this.queuedGroup,this.queuedText,e);return this.queuedGroup=null,this.queuedText="",t}var r=this.buffer;if(e!==r.length){if(o=this.fast[r.charCodeAt(e)])return this._token(o,r.charAt(e),e);var s=this.re;s.lastIndex=e;var n=f(s,r),i=this.error;if(null==n)return this._token(i,r.slice(e,r.length),e);var o=this._getGroup(n),a=n[0];return i.fallback&&n.index!==e?(this.queuedGroup=o,this.queuedText=a,this._token(i,r.slice(e,n.index),e)):this._token(o,a,e)}},h.prototype._token=function(e,t,r){var s=0;if(e.lineBreaks){var n=/\n/g,i=1;if("\n"===t)s=1;else for(;n.exec(t);)s++,i=n.lastIndex}var o={type:"function"==typeof e.type&&e.type(t)||e.defaultType,value:"function"==typeof e.value?e.value(t):t,text:t,toString:d,offset:r,lineBreaks:s,line:this.line,col:this.col},a=t.length;if(this.index+=a,this.line+=s,0!==s?this.col=a-i+1:this.col+=a,e.shouldThrow)throw new Error(this.formatError(o,"invalid syntax"));return e.pop?this.popState():e.push?this.pushState(e.push):e.next&&this.setState(e.next),o},"undefined"!=typeof Symbol&&Symbol.iterator){var b=function(e){this.lexer=e};b.prototype.next=function(){var e=this.lexer.next();return{value:e,done:!e}},b.prototype[Symbol.iterator]=function(){return this},h.prototype[Symbol.iterator]=function(){return new b(this)}}return h.prototype.formatError=function(e,t){if(null==e){var r=this.buffer.slice(this.index);e={text:r,offset:this.index,lineBreaks:-1===r.indexOf("\n")?0:1,line:this.line,col:this.col}}var s=Math.max(0,e.offset-e.col+1),n=e.lineBreaks?e.text.indexOf("\n"):e.text.length,i=this.buffer.substring(s,e.offset+n);return t+=" at line "+e.line+" col "+e.col+":\n\n",(t+="  "+i+"\n")+"  "+Array(e.col).join(" ")+"^"},h.prototype.clone=function(){return new h(this.states,this.state)},h.prototype.has=function(e){return!0},{compile:function(e){var t=p(u(e));return new h({start:t},"start")},states:function(e,t){var r=e.$all?u(e.$all):[];delete e.$all;var s=Object.getOwnPropertyNames(e);t||(t=s[0]);for(var n=Object.create(null),i=0;i<s.length;i++)n[v=s[i]]=u(e[v]).concat(r);for(i=0;i<s.length;i++)for(var o=n[v=s[i]],a=Object.create(null),l=0;l<o.length;l++){var c=o[l];if(c.include){var f=[l,1];if(c.include!==v&&!a[c.include]){a[c.include]=!0;var d=n[c.include];if(!d)throw new Error("Cannot include nonexistent state '"+c.include+"' (in state '"+v+"')");for(var b=0;b<d.length;b++){var y=d[b];-1===o.indexOf(y)&&f.push(y)}}o.splice.apply(o,f),l--}}var g=Object.create(null);for(i=0;i<s.length;i++){var v;g[v=s[i]]=p(n[v],!0)}for(i=0;i<s.length;i++){var x=s[i],w=g[x],E=w.groups;for(l=0;l<E.length;l++)m(E[l],x,g);var _=Object.getOwnPropertyNames(w.fast);for(l=0;l<_.length;l++)m(w.fast[_[l]],x,g)}return new h(g,t)},error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:function(e){for(var t=Object.create(null),r=Object.create(null),s=Object.getOwnPropertyNames(e),n=0;n<s.length;n++){var i=s[n],o=e[i];(Array.isArray(o)?o:[o]).forEach((function(e){if((r[e.length]=r[e.length]||[]).push(e),"string"!=typeof e)throw new Error("keyword must be string (in keyword '"+i+"')");t[e]=i}))}function a(e){return JSON.stringify(e)}var l="";for(var u in l+="switch (value.length) {\n",r){var c=r[u];l+="case "+u+":\n",l+="switch (value) {\n",c.forEach((function(e){var r=t[e];l+="case "+a(e)+": return "+a(r)+"\n"})),l+="}\n"}return l+="}\n",Function("value",l)}}})?r.apply(t,[]):r)||(e.exports=s)},654:function(e){var t;t=function(){function e(t,r,s){return this.id=++e.highestId,this.name=t,this.symbols=r,this.postprocess=s,this}function t(e,t,r,s){this.rule=e,this.dot=t,this.reference=r,this.data=[],this.wantedBy=s,this.isComplete=this.dot===e.symbols.length}function r(e,t){this.grammar=e,this.index=t,this.states=[],this.wants={},this.scannable=[],this.completed={}}function s(e,t){this.rules=e,this.start=t||this.rules[0].name;var r=this.byName={};this.rules.forEach((function(e){r.hasOwnProperty(e.name)||(r[e.name]=[]),r[e.name].push(e)}))}function n(){this.reset("")}function i(e,t,i){if(e instanceof s){var o=e;i=t}else o=s.fromCompiled(e,t);for(var a in this.grammar=o,this.options={keepHistory:!1,lexer:o.lexer||new n},i||{})this.options[a]=i[a];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new r(o,0);this.table=[l],l.wants[o.start]=[],l.predict(o.start),l.process(),this.current=0}function o(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return e.toString();if(e.type)return"%"+e.type;if(e.test)return"<"+String(e.test)+">";throw new Error("Unknown symbol type: "+e)}}return e.highestId=0,e.prototype.toString=function(e){var t=void 0===e?this.symbols.map(o).join(" "):this.symbols.slice(0,e).map(o).join(" ")+" ● "+this.symbols.slice(e).map(o).join(" ");return this.name+" → "+t},t.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},t.prototype.nextState=function(e){var r=new t(this.rule,this.dot+1,this.reference,this.wantedBy);return r.left=this,r.right=e,r.isComplete&&(r.data=r.build(),r.right=void 0),r},t.prototype.build=function(){var e=[],t=this;do{e.push(t.right.data),t=t.left}while(t.left);return e.reverse(),e},t.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,i.fail))},r.prototype.process=function(e){for(var t=this.states,r=this.wants,s=this.completed,n=0;n<t.length;n++){var o=t[n];if(o.isComplete){if(o.finish(),o.data!==i.fail){for(var a=o.wantedBy,l=a.length;l--;){var u=a[l];this.complete(u,o)}if(o.reference===this.index){var c=o.rule.name;(this.completed[c]=this.completed[c]||[]).push(o)}}}else{if("string"!=typeof(c=o.rule.symbols[o.dot])){this.scannable.push(o);continue}if(r[c]){if(r[c].push(o),s.hasOwnProperty(c)){var p=s[c];for(l=0;l<p.length;l++){var m=p[l];this.complete(o,m)}}}else r[c]=[o],this.predict(c)}}},r.prototype.predict=function(e){for(var r=this.grammar.byName[e]||[],s=0;s<r.length;s++){var n=r[s],i=this.wants[e],o=new t(n,0,this.index,i);this.states.push(o)}},r.prototype.complete=function(e,t){var r=e.nextState(t);this.states.push(r)},s.fromCompiled=function(t,r){var n=t.Lexer;t.ParserStart&&(r=t.ParserStart,t=t.ParserRules);var i=new s(t=t.map((function(t){return new e(t.name,t.symbols,t.postprocess)})),r);return i.lexer=n,i},n.prototype.reset=function(e,t){this.buffer=e,this.index=0,this.line=t?t.line:1,this.lastLineBreak=t?-t.col:0},n.prototype.next=function(){if(this.index<this.buffer.length){var e=this.buffer[this.index++];return"\n"===e&&(this.line+=1,this.lastLineBreak=this.index),{value:e}}},n.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},n.prototype.formatError=function(e,t){var r=this.buffer;if("string"==typeof r){var s=r.split("\n").slice(Math.max(0,this.line-5),this.line),n=r.indexOf("\n",this.index);-1===n&&(n=r.length);var i=this.index-this.lastLineBreak,o=String(this.line).length;return t+=" at line "+this.line+" col "+i+":\n\n",(t+=s.map((function(e,t){return a(this.line-s.length+t+1,o)+" "+e}),this).join("\n"))+"\n"+a("",o+i)+"^\n"}return t+" at index "+(this.index-1);function a(e,t){var r=String(e);return Array(t-r.length+1).join(" ")+r}},i.fail={},i.prototype.feed=function(e){var t,s=this.lexer;for(s.reset(e,this.lexerState);;){try{if(!(t=s.next()))break}catch(e){var i=new r(this.grammar,this.current+1);throw this.table.push(i),(l=new Error(this.reportLexerError(e))).offset=this.current,l.token=e.token,l}var o=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var a=this.current+1;i=new r(this.grammar,a),this.table.push(i);for(var l,u=void 0!==t.text?t.text:t.value,c=s.constructor===n?t.value:t,p=o.scannable,m=p.length;m--;){var h=p[m],f=h.rule.symbols[h.dot];if(f.test?f.test(c):f.type?f.type===t.type:f.literal===u){var d=h.nextState({data:c,token:t,isToken:!0,reference:a-1});i.states.push(d)}}if(i.process(),0===i.states.length)throw(l=new Error(this.reportError(t))).offset=this.current,l.token=t,l;this.options.keepHistory&&(o.lexerState=s.save()),this.current++}return o&&(this.lexerState=s.save()),this.results=this.finish(),this},i.prototype.reportLexerError=function(e){var t,r,s=e.token;return s?(t="input "+JSON.stringify(s.text[0])+" (lexer error)",r=this.lexer.formatError(s,"Syntax error")):(t="input (lexer error)",r=e.message),this.reportErrorCommon(r,t)},i.prototype.reportError=function(e){var t=(e.type?e.type+" token: ":"")+JSON.stringify(void 0!==e.value?e.value:e),r=this.lexer.formatError(e,"Syntax error");return this.reportErrorCommon(r,t)},i.prototype.reportErrorCommon=function(e,t){var r=[];r.push(e);var s=this.table.length-2,n=this.table[s],i=n.states.filter((function(e){var t=e.rule.symbols[e.dot];return t&&"string"!=typeof t}));return 0===i.length?(r.push("Unexpected "+t+". I did not expect any more input. Here is the state of my parse table:\n"),this.displayStateStack(n.states,r)):(r.push("Unexpected "+t+". Instead, I was expecting to see one of the following:\n"),i.map((function(e){return this.buildFirstStateStack(e,[])||[e]}),this).forEach((function(e){var t=e[0],s=t.rule.symbols[t.dot],n=this.getSymbolDisplay(s);r.push("A "+n+" based on:"),this.displayStateStack(e,r)}),this)),r.push(""),r.join("\n")},i.prototype.displayStateStack=function(e,t){for(var r,s=0,n=0;n<e.length;n++){var i=e[n],o=i.rule.toString(i.dot);o===r?s++:(s>0&&t.push("    ^ "+s+" more lines identical to this"),s=0,t.push("    "+o)),r=o}},i.prototype.getSymbolDisplay=function(e){return function(e){var t=typeof e;if("string"===t)return e;if("object"===t){if(e.literal)return JSON.stringify(e.literal);if(e instanceof RegExp)return"character matching "+e;if(e.type)return e.type+" token";if(e.test)return"token matching "+String(e.test);throw new Error("Unknown symbol type: "+e)}}(e)},i.prototype.buildFirstStateStack=function(e,t){if(-1!==t.indexOf(e))return null;if(0===e.wantedBy.length)return[e];var r=e.wantedBy[0],s=[e].concat(t),n=this.buildFirstStateStack(r,s);return null===n?null:[e].concat(n)},i.prototype.save=function(){var e=this.table[this.current];return e.lexerState=this.lexerState,e},i.prototype.restore=function(e){var t=e.index;this.current=t,this.table[t]=e,this.table.splice(t+1),this.lexerState=e.lexerState,this.results=this.finish()},i.prototype.rewind=function(e){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[e])},i.prototype.finish=function(){var e=[],t=this.grammar.start;return this.table[this.table.length-1].states.forEach((function(r){r.rule.name===t&&r.dot===r.rule.symbols.length&&0===r.reference&&r.data!==i.fail&&e.push(r)})),e.map((function(e){return e.data}))},{Parser:i,Grammar:s,Rule:e}},e.exports?e.exports=t():this.nearley=t()}},t={},r=function r(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s].call(i.exports,i,i.exports,r),i.exports}(289);IMICROS_FEEL_Interpreter=r})();